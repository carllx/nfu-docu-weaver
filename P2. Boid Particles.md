[[Source_4_Particle Systems_Boid]]

![|200](https://i.ytimg.com/vi/J3TUPYVsxow/hqdefault.jpg)
(Source:  [youtube.com: Blender Tutorial - Full Guide to Boid Particles](https://youtu.be/J3TUPYVsxow?t=3))
将自然系统的观察融入到构建和完善群体粒子模拟的过程中


---


# P2. Boid Particles 群体行为

Boids 是模拟生物群与环境的交互行为的粒子模型。
由人工生命和计算机图形学领域的专家 Craig Reynolds (克雷格·雷诺兹) 在1986年提出
人工智能研究中低成本呈现Emergent Behaviour(涌现行为) 的方式之一.  


---



**涌现行为的复杂性**：Boids中涌现行为的复杂性来自于以下几个因素的相互作用：
    
- **规则层级（Rule Hierarchy）**：Boid Brain中规则的优先级顺序影响Boids对不同刺激的响应。
- **规则评估（Rule Evaluation）**：不同的规则评估方法，如平均、随机选择或模糊逻辑，影响Boid对规则的遵守，并导致个体和集体行为的变化。
- **参数值（Parameter Values）**：分配给个人空间、恐惧因素和漫游等参数的具体值影响Boids响应的强度和变化性。

---

Daniel Shiffman的"Swarm"视频装置艺术作品，它实现了一个受Boids算法启发的鸟类飞行模式，并将其适应到了一个持续运动的画笔上(这个飞行模式被适应到了一个持续运动的"画笔"上)，这种运动方式让人联想到Jackson Pollock的滴画风格，这也是Shiffman的灵感来源之一。

Swarm 使用 Reynolds 的"Boids"模型模拟鸟群的运动，将这种有机、动态的运动转化为"画笔" ，实时地在屏幕上"绘制"出色彩
继承了 Pollock 强调绘画过程和行动本身的理念
将 Pollock 的Action painting(行动绘画)精神以一种互动、动态的方式呈现出来，让观众参与到创作过程中 ，并通过对观众动作的反应，生成不同的抽象形状和颜色

[[Automatic writing|Action painting]](行动绘画)
[[Jackson Pollock]]的即兴情感和直觉驱动的行为绘画, 并通过倾倒和自然滴落, 流动油漆的方式进一步在创作过程中创造更多的"意外" ，强调绘画过程本身的随机性. 

[[Non-photorealistic rendering]]
![bg fit left:50% vertical](https://i.imgur.com/7GOIhRZ.webp)

(Source:  [siggraph.org: "Swarm" by Shiffman – ACM SIGGRAPH HISTORY ARCHIVES](https://history.siggraph.org/experience/swarm-by-shiffman/))


---

## Understanding the Boids Physics Panel for Students

### 1. Movement

The Movement section controls the basic physics of the boids, dictating how they move in the air and on land.

Movement 部分控制了鸟群的基本物理特性，决定了它们在空中和地面上的运动方式

- **Air and Land Settings:** These parameters, such as **Max Air Speed, Min Air Speed, Max Air Acceleration**, and **Max Air Angular Velocity**, control how fast and how quickly boids can change direction in the air. Students can experiment with these values to observe how they impact the agility and speed of the flock. The same settings are available for movement on land, allowing for separate control of behaviours in different environments.
- **Personal Space:** The **Air Personal Space** and **Land Personal Space** parameters define the radius around each boid that it will try to keep clear of other boids. This setting is crucial for understanding how boids avoid collisions and maintain realistic spacing within the flock.
- **Landing Smoothness:** This parameter controls how smoothly boids transition from flight to landing on a collision object. Higher values result in a more gradual descent, while lower values create a more abrupt landing. This setting can be used to fine-tune the realism of the simulation, depending on the type of creature being simulated.
- **Land Stick Force:** This parameter determines the strength of a force required to affect a boid while it is on the ground. This can be used to simulate the boid's resistance to external forces while landed, such as wind or a push from another boid.

### Battle

The Battle section allows for the simulation of combat between different boid particle systems, introducing a competitive element to the flocking behaviour.

- **Health and Strength:** These settings control the initial health points of each boid and the amount of damage they can inflict per second when attacking. Students can experiment with different values to create battles with varying levels of intensity and survivability.
- **Aggression:** This parameter determines how willing a boid is to engage in combat with a stronger opponent. Higher aggression values will make boids more likely to attack even if they are at a disadvantage, while lower values will make them more cautious.
- **Accuracy:** This setting controls the precision of the boids' attacks. Higher accuracy values increase the likelihood of attacks landing successfully.
- **Range:** This parameter defines the maximum distance at which a boid can attack another boid. This can be used to simulate different types of combat, from close-quarters melee to ranged attacks.

### Misc

The Misc section contains settings that affect the visual presentation of the boids, rather than their core behaviour.

- **Banking:** This parameter controls the amount of rotation around the velocity vector when a boid turns, influencing the smoothness and realism of its turning motion. Higher values create a more pronounced banking effect.
- **Pitch:** This setting adds rotation around the side vector, affecting the boid's tilt during flight. This can be used to create more dynamic and varied movements.
- **Height:** This parameter controls the boid's height relative to its particle size. While the sources note that this setting may not have a significant visual impact in some scenarios, it can be used to fine-tune the vertical positioning of boids within the flock.

### Relations

The Relations section defines how different boid particle systems interact with each other, establishing relationships of friend, enemy, or neutral.

- **Target Object and System:** These settings allow the user to select specific particle systems for interaction.
- **Mode:**
    - **Enemy:** Setting the mode to Enemy will cause the selected particle systems to engage in combat, using the parameters defined in the Battle section.
    - **Friend:** Setting the mode to Friend will make the boids from different particle systems behave as a single flock, following the same rules and goals.
    - **Neutral:** Setting the mode to Neutral will result in the boids from different particle systems ignoring each other, moving independently.

### Boid Brain

The Boid Brain panel is the heart of the Boids physics system, where the user defines the rules that govern the boid's behaviour and the order in which they are evaluated.

- **Rule Evaluation:** This setting determines how the rules are applied to the boids.
    - **Average:** All rules are given equal weight and are averaged together, resulting in a balanced behaviour.
    - **Random:** A random rule is selected for each boid, introducing variability in their responses.
    - **Fuzzy:** The rules are evaluated based on fuzzy logic, with a threshold (**Rule Fuzziness**) determining how strongly each rule is followed. This method allows for more nuanced and realistic behaviour, as boids can respond differently to multiple, sometimes conflicting, stimuli.
- **Rules:** The Boid Brain includes a variety of rules that can be added and rearranged in order of priority:
    - **Goal:** Seek a designated target object or force field.
    - **Avoid:** Evade a designated predator object or force field.
    - **Avoid Collision:** Avoid colliding with other boids or deflector objects.
    - **Separate:** Maintain a minimum distance from other boids.
    - **Flock:** Align movement with neighbouring boids.
    - **Follow the Leader:** Follow a designated leader object.
    - **Average Speed:** Maintain a certain average velocity.
    - **Wander:** Introduce random movement.
    - **Fight:** Engage in combat with boids from designated enemy particle systems.

Students should be encouraged to experiment with different combinations of rules and their order of priority to understand how they influence the emergent behaviour of the flock. Adjusting parameters within each rule will further refine the flocking patterns, allowing students to create a wide variety of realistic and engaging simulations.


---

## [[Source - 4_Particle Systems]]




# Boid 粒子系统教程

设置和配置 Boid 粒子系统以模拟群体行为

1. 基础设置
- 选择立方体对象
- 添加新的粒子系统
- 在物理设置中将类型从 Newtonian 改为 Boids
- 设置 Lifetime 为 1000
- 设置粒子数量为 200



---




2. 创建对战场景

- 复制立方体并移动到侧面
- 为第一个粒子系统设置立方体实例
- 为第二个粒子系统设置 Suzanne 实例
- 调整实例比例至 0.3



---

3. 设置粒子渲染对象
   - 将渲染模式从 Halo 更改为 Object
   - 选择要实例化的对象（立方体或 Suzanne）
   - 为不同粒子系统选择不同实例对象

---



4. 配置 Boid 飞行参数
- 启用 Allow Flight 选项


Boid粒子飞行速度
Max Air Speed (最大加速度), 
Min Air Speed (最小空中速度) , 限制减速, 相对于Max Air Speed的值


Max Air Acceleration(加速度的最大值)，较高的值会让粒子加速更快(es.火箭🚀)，较低的值则会让加速更平缓(es.汽车🚗)。

Max Air Angular Velocity(改变方向的速度值)。低值,缓渐进的转向，高值, 锐利、迅速的转向。

Air Personal Space(个人空间) 大值, 会让粒子之间保持更大的距离, 有助于防止粒子相互碰撞。


---


5. 设置 Boid Brain 行为
- 添加 Fight 行为规则
- 创建新的关系设置
- 选择目标对象为另一个粒子系统
- 将关系模式设置为 Enemy



---



关键参数设置路径：
- 粒子系统基础设置：`Physics > Type > Boids`
- 渲染设置：`Render > Render As > Object`
- 行为规则：`Boid Brain > Add > Flight`
- 关系设置：`Relations > Add > Mode > Enemy`




- Max Air Speed: 控制飞行最大速度 (米/秒)
- Min Air Speed: 控制飞行最小速度
- Max Air Acceleration: 控制加速能力
- Max Air Angular Velocity: 控制转向速度
- Air Personal Space: 控制粒子间距

---




Boid 粒子作用

- 质量和质量与大小的关系
- 运动设置, 如最大空中速度, 最小空中速度, 最大空中角速度等
- 个人空间设置, 控制粒子之间的距离

![bg fit left:50% vertical](https://i.imgur.com/IrYCKAz.webp)

---






1. 设置基础粒子系统
- 选择立方体对象
- 添加新的粒子系统
- 在 Physics 设置中将类型从 Newtonian 更改为 Boids
![bg fit left:50% vertical](https://i.imgur.com/HDeWOJN.webp)


---


2. 配置基本参数

Mass 质量

影响粒子与风、重力或力场的交互

Multiply Mass with Size

根据粒子大小乘以质量，以模拟不同大小的粒子具有不同的质量
![bg fit left:50% vertical](https://i.imgur.com/aREh0zH.webp)

---


- 设置 Lifetime 为 1000
- 设置粒子数量为 200
![bg fit left:50% vertical](https://i.imgur.com/nqf1cT3.webp)


---


![bg fit left:50% vertical](https://i.imgur.com/Ms51jO8.webp)

如果基本寿命是50秒，随机因子是0.5，那么气球的寿命会在50秒到25秒之间随机变化。
如果随机因子是0.75，那么气球的寿命会在50秒到12.5秒之间随机变化。

---


复制 Data Block
![bg fit left:50% vertical](https://i.imgur.com/Gnk8bPS.webp)


![|200](https://i.ytimg.com/vi/KcX05V4j1aI/hqdefault.jpg)
(Source:  [youtube.com: Important Five-Minute Lesson on Blender Data Blocks and Fake Users](https://youtu.be/KcX05V4j1aI?t=179)[youtube playlist](https://www.youtube.comhttps://www.youtube.com/redirect?event=infocard&redir_token=QUFFLUhqa1gzT0p2VGNHcl9EMGNEM0NrTkZrWmQ3OFB6UXxBQ3Jtc0trNUJ3cE9RbWJoc0VKX0tkVjRqdVZ1dk9TLVhmNjdnYjV2VTFmbGVjalhXWkJiUVROY1FsYTBVRzUtenlXR241RlpSV19SNmlwcWxFVmxYdnhjeUFuRkJzR1FPNW9PZE10UFlCd0JrRlhKdFpDTkVqdw&q=https%3A%2F%2Fblendermarket.com%2Fcreators%2Fbrandonsdrawings))


---



4. 创建粒子对象
- 设置第一组为立方体粒子
- 添加第二组 Suzanne 作为粒子
![bg fit left:50% vertical](https://i.imgur.com/CfxUAuj.webp)

---



![bg fit left:50% vertical](https://i.imgur.com/UNx8KT3.webp)
- 粒子显示大小,  es. Scale 为 0.3

---


- 在 Render 设置中将显示方式改为 Object
- 选择相应的实例对象




---


Render As

None: 渲染为"无", 粒子不会被显示。这在你需要用粒子来复制物体时非常有用。

Halo(光晕): 光晕是呈现为发光的小点或小云雾的效果。虽然它们能被看到，但不能照亮其他物体。

Path(路径): 路径的可视化需要使用 Hair particle(毛发粒子系统)或 Keyed particles (键控粒子)。

B-Spline(B样条): 使用B样条来平滑毛发。如果你希望渲染时使用较低的设置，这个选项会减少控制能力，但增加路径的平滑度。

Steps(步骤): 步骤指的是渲染路径的细分数量，通常是2的幂次方。增加这个值会显著增加内存需求，因此需要谨慎选择。比如，0步有1个细分，1步有2个，依此类推。



---

5. 配置 Boid 行为参数
- Allow Flight 设置
* Max/Min Air Speed: 粒子运动的最大(小)飞行速度


![bg fit left:50% vertical](https://i.imgur.com/amTKGL3.webp)

---
  * Max Air Acceleration: 控制加速度

![bg fit left:50% vertical](https://i.imgur.com/PfUxXm0.webp)

---


  * Max Air Angular Velocity:  为了遵循规则转向而加速的程度

![bg fit left:50% vertical](https://i.imgur.com/8fLrhcI.webp)


---



  * Air Personal Space: 控制粒子间距, 周围的半径, 也是粒子大小的百分比。
![bg fit left:50% vertical](https://i.imgur.com/gKZQIsE.webp)


---


- Health(健康值): 粒子的生命值，数值越低，粒子死亡越快。[7:23]
- Strength(强度): 粒子的攻击力。[7:37]
- Aggression(侵略性): 粒子攻击敌人的积极性，数值越高，越积极主动攻击。[7:57]
- Accuracy(精准度): 粒子攻击的精准度。[9:00]
- Range(范围): 粒子攻击的距离。[9:00]
- Banking(倾斜): 粒子旋转时的倾斜角度。[10:04]
- Pitch(俯仰): 粒子旋转时侧向旋转的程度。[10:30]
- Height(高度): 该参数的作用在视频中未明确解释。[10:45]

1. 设置 Boid Brain
- 添加 Flight 规则
- 设置粒子关系
  * 添加新关系
  * 选择目标对象
  * 将模式设置为 Enemy

2. 微调行为参数
- 调整 Max Air Speed 至 10
- 设置 Min Air Speed 为 0
- 将 Max Air Acceleration 设为 0.5
- 设置 Max Air Angular Velocity 为 0.5
- 根据需要调整 Air Personal Space


关键界面路径:
Particles > Physics > Boids
Render > Object
Boyd Brain > Add Relation



---



### 战斗
- 粒子可以相互攻击, 根据生命值和攻击力决定胜负
- 可以设置攻击距离, 逃跑距离, 准确度等参数

### 关系
- 可以设置粒子之间的关系, 如敌人, 朋友或中立
- 根据关系决定粒子的行为, 如攻击或合作

### Boyd大脑
- 可以设置多种规则来控制粒子的行为, 如追逐, 分离, 编队等
- 规则的优先级和模糊性会影响粒子的决策

### 陆地移动
- 可以让粒子在地面上移动, 包括最大速度, 跳跃速度等设置
- 地面摩擦力和粘性可以控制粒子在地面上的行为


![bg fit left:50% vertical](https://i.imgur.com/ikDPp3W.webp)
- Landing Smoothness(着陆平滑度): 粒子接近地面时的减速效果。[3:08]

---


- Land Stick Force(陆地粘性): 决定力场影响**着地**粒子的强度。[3:30]
![bg fit left:50% vertical](https://i.imgur.com/MTsW6v6.webp)

---



![bg fit left:50% vertical](https://i.imgur.com/AWXUFIy.webp)



## More

![|200](https://i.ytimg.com/vi/PvOBnmiD8z0/hqdefault.jpg)
(Source:  [youtube.com: Boids Simulation - Blender Geometry Nodes](https://youtu.be/PvOBnmiD8z0?t=828)[youtube playlist](https://www.youtube.comhttps://www.youtube.com/redirect?event=infocard&redir_token=QUFFLUhqbmszRUM1eTZHaWxZcVp4LU5aVVdDd2VvN0xEUXxBQ3Jtc0ttRVFKV09BV0RsckwwQzBRVVRhOGZSRElPeE5KeVR4X3NtTjFzbnRBZmV6enMwNlpIWlNnajh3ZTlZVlBrd3laTEd2MjU5M2J1eTBrMUlGcnRORkxaTjZNV0pVbjhQc3JpZFN5d3NJeTV2aFpHd052TQ&q=https%3A%2F%2Fdanielhickox.com%2Fexperiments%23boids))

![|200](https://i.ytimg.com/vi/S9JBSvtmD_k/hqdefault.jpg)
(Source:  [youtube.com: [3.1] Blender Tutorial: Colorful Butterfly Swarm Animation](https://youtu.be/S9JBSvtmD_k?t=7))


---
##  Bake Particle Systems into Keyframe

How to Convert Particle Systems to Keyframe Animations in Blender

1. 为Sketchfab烘焙粒子系统
- ![bg fit left:50% vertical](https://i.imgur.com/WazJITc.webp)
- (Source:  [sketchfab.com: Baking Particles for Sketchfab (Blender Edition) - Sketchfab Community Blog - Sketchfab Community Blog](https://sketchfab.com/blogs/community/baking-particles-sketchfab-blender-edition/))


2. 使用CakeParticles插件
- ![|200](https://repository-images.githubusercontent.com/489032694/29d2609c-3210-4b34-9cad-92669190ac93)
- (Source:  [github.com: GitHub - Scaryplasmon/CakeParticles: Blender Addon to Bake Particles as Keyframed Objects](https://github.com/Scaryplasmon/CakeParticles))


## Practices - Boid
## Mastering Boid Particles in Blender: A Project-Based Approach

This breakdown focuses on using Boid Particles within a project-based learning framework. The goal is to create an engaging and immersive learning experience by connecting Boid particle behaviours to real-world scenarios familiar to students. 

**Main Objective:** Create a simulation of a natural phenomenon or system using Boid Particles in Blender.

### Phase 1: Observe & Conceptualise  


1.  **选择现象：**
    * 学生选择一个展现集群、群集或集体行为的自然现象或系统
    * 例如：鸟群、鱼群、昆虫群、交通流量模式、人群移动

2.  **详细观察：**
    * 通过视频、纪录片和科学文章进行深入研究，以理解所选现象
    * 重点关注：
        * 移动模式：个体如何在群体中移动？是否有**领导者**或特定队形？
        * 互动：个体如何对彼此和环境做出反应？
        * 环境因素：什么影响群体的行为（障碍物、捕食者、食物来源等）？

3.  **概念草图：**
    * 将观察结果转化为视觉表现，使用草图或图表
    * 绘制关键行为和互动，以指导在Blender中设置Boid粒子系统
    *   Translate observations into visual representations using sketches or diagrams.
    *   Illustrate key behaviours and interactions to guide the Boid Particle setup in Blender. 


### Phase 2: Building the Simulation in Blender (2 Weeks)


1.  **Setting Up the Environment:**
    *   Create a new Blender project.
    *   Model or import a simplified 3D environment representing the natural setting of the chosen phenomenon.
    *   Consider adding objects that influence Boid behaviour, like obstacles or attractors.  
2.  **Creating the Boid Particle System:**
    *   Add a particle system to an object. `Properties Panel > Particles Tab > +`
    *   Select "Boids" as the physics type. `Properties Panel > Particles Tab > Physics > Type > Boids`
    *   Adjust the number of particles to represent the scale of the phenomenon. `Properties Panel > Particles Tab > Emission > Number` 
3.  **Defining Boid Movement:** `Properties Panel > Particles Tab > Physics > Movement`
    *   **Allow Flight/Land/Climbing:** Enable or disable based on the chosen phenomenon.
    *   **Max Air/Land Speed:** Define the speed limits for Boids.
    *   **Air/Land Personal Space:** Control how much space Boids maintain between each other. 




1.  **设置环境：**
    *   创建新的Blender项目。
    *   建模或导入简化的3D环境，用于表现所选自然现象。
    * 用blender 创建地形

Creating Terrain in Blender

在Blender中创建地形
    *   考虑添加能影响 Boid 行为的物体，如 obstacles or attractors(障碍物或吸引物)。

2.  **创建Boid粒子系统：**
    *   为物体添加粒子系统。`属性面板 > 粒子选项卡 > +`
    *   选择"Boids"作为物理类型。`属性面板 > 粒子选项卡 > 物理 > 类型 > Boids`
    *   调整粒子数量以反映现象的规模。`属性面板 > 粒子选项卡 > 发射 > 数量`

3.  **定义Boid运动：** `属性面板 > 粒子选项卡 > 物理 > 运动`
    *   **允许飞行/着陆/攀爬：** 根据所选现象启用或禁用。
    *   **最大空中/地面速度：** 设定Boids的速度限制。
    *   **空中/地面个体空间：** 控制Boids之间保持的距离。


1.  **Setting Up Boid Rules:** `Properties Panel > Particles Tab > Physics > Boid Brain`
    *   Add rules to govern Boid behaviour using the "+" icon.
    *   Available rules: **Goal, Avoid, Avoid Collision, Separate, Flock, Follow Leader, Average Speed, Fight, Flee**.
    *   Adjust rule parameters to match observations from Phase 1. For example:
        *   **Goal:**  If the phenomenon involves seeking a target (like food), set up a Goal object in the scene.
        *   **Avoid:**  If the phenomenon involves evading predators or obstacles, add Avoid rules and corresponding objects.
        *   **Flock:** Use this rule to simulate cohesive group movement, adjusting parameters like Distance and Rule Fuzziness to fine-tune flocking behaviour.
2.  **Visualising the Boids:**
    *   Choose how Boids are represented:
        *   `Properties Panel > Particles Tab > Render > Render As > Halo:`  Simple glowing dots.
        *   `Properties Panel > Particles Tab > Render > Render As > Object:`  Use another object as an instance for each Boid.
        *   Adjust size, colour, and material to enhance visual appeal and clarity.

### Phase 3: Analysis, Refinement & Presentation (1 Week)

**Actionable Steps:**

1.  **Analysing the Simulation:**
    *   Run the simulation and observe how Boids behave. 
    *   Compare the simulation to real-world observations from Phase 1.
    *   Identify areas where the simulation does not accurately reflect the chosen phenomenon.
2.  **Refining Boid Behaviour:**
    *   Adjust parameters in the Movement, Boid Brain, and Render sections to improve the simulation's accuracy and visual quality.
    *   Experiment with different rule combinations and parameter values to achieve the desired effect. 
    *   Document changes and their impact on the simulation for future reference.




1.  **分析模拟：**
    *   运行模拟并观察Boid的行为。
    *   将模拟结果与第一阶段的真实世界观察进行比较。
    *   识别模拟中未能准确反映所选现象的区域。
2.  **优化Boid行为：**
    *   调整移动、Boid智能和渲染部分的参数，以提高模拟的准确性和视觉质量。
    *   尝试不同的规则组合和参数值以达到预期效果。
    *   记录更改及其对模拟的影响，以供将来参考。





