

## 第1章 Unity基础与探索
### 为什么选择 Unity

- 社区庞大且活跃
- 创作形式多样 (跨平台, VR, AR   )


---


### Visualize a house project with Unity 2023

1. 安装与设置
2. 搭建场景
3. 添加材质
4. 制作特效
5. 渲染

---


### 如何使用 Exercise files

![150|](https://i.imgur.com/KE8FkcN.jpg)


---


🔍 在exercise files文件夹中找到当前章节的 文件夹
`Exercise Files > Resources> Ch*_xxx`

![](https://tingwu.aliyun.com/api/editor/get/v2/524379/0/17597cd25021447294d903054ae565b2/bebe65c19ba44cb2ba4e232c56719769.png)

---
- 安装 Unity Hub, 和Unity编辑器
- 🖥️ 打开Unity项目,显示项目文件夹位置
 
![](https://tingwu.aliyun.com/api/editor/get/v2/524379/0/cbe5a7152f4a4bb0bf4f522126c0e084/bae55edabc6241edba217b8f4064413c.png)

---


• 🔍 在 exercise files 文件夹中找到当前章节的 文件夹
• 📁 复制文件夹中的assets文件
• 📌 将复制的assets文件替换到你的Unity项目文件夹中

![](https://tingwu.aliyun.com/api/editor/get/v2/524379/0/ab3d7a03502b48029fd37043f824bd5b/7db55a45b36c4b5abefa7d3646e3db91.png)

---

## 1.1 Unity编辑器界面概览

---

### Unity用户界面介绍

#### Unity 界面介绍

Unity 中有四个主要部分：
  
‒ Hierarchy (层级视图) 
‒ Project (项目视图) 
‒ Inspector (检视器) 
‒ Scene (场景视图) 

---

Project(项目)

-  Assets 小心误删
-  Console 解决问题的线索(不显眼但重要). 
 

---

Scene (场景)

左方工具 - Transform 控制
上方工具 - 视图控制选项

<!--
-  左侧的工具栏 - 的工具，可以对游戏对象进行移动、旋转、缩放等操作。
-  上方的工具栏 - 包含视图控制选项，可以切换不同的视图模式。
-->

---

Inspector(监视器)

-  修改游戏对象的属性。 


---


Hierarchy (层级视图) 

-  Hierarchy 中的对象与 Scene (场景视图) 中的对象是对应的。 

> 演示: 通过 Hierarchy 修改对象属性. 


- [x] 在 Hierarchy 中选择一个对象，在 Inspector 中修改对象的属性 ✅ 2025-02-20



---

Game

-  窗口顶部的工具栏包含游戏控制、层级控制和布局控制等选项。
-  切换到 "Game" (游戏) 视图点击播放按钮，可以运行游戏场景。

---


### 自定义UI

通过Layout菜单可以自定义Unity界面布局,以适应个人需求。

![](https://tingwu.aliyun.com/api/editor/get/v2/524379/0/b66917515e844dd6a8abc375dc653557/f715d57c8b2e4e10a9b61e49387ec88d.png)

---



## 3. 了解Unity界面


- [ ] 探索Unity界面的主要部分,
- [ ] 学习如何自定义布局
- [ ] 导航场景,
- [ ] 如何利用Unity文档和路线图。


---


### Unity文档

Help > Unity Manual  是查命令和解决问题的重要资源,可通过Help菜单访问

![](https://tingwu.aliyun.com/api/editor/get/v2/524379/0/80a90d95095b4177beb416fc58a90e05/c68505e016014007b9208fd23f8bbc2f.png)


> 使用 AnythingLM 创建导师.


---

### Roadmap (路线图)

🔍 在Google上搜索"Unity Roadmap"
🌐 访问Unity官方Roadmap页面: unity.com/roadmap, 了解Unity未来的开发计划(es AI)


---



## 1.2 项目创建与管理

---

## 设置Unity项目

了解Unity项目文件结构


---

### 安装Unity

1. unity.com, 下载, 安装Unity Hub 
2. 安装Unity Editor, 选择  LTS (长期支持版) 
3.  硬件要求: GPU性能

> 应用基础部分范例先安装, 2022.3.1f1(LTS)


---


### 项目设置概述

---
#### 通过模板创建新项目

3D 几个管线模板对比

| 渲染管线  | 目标平台                  |
| --------- | ------------------------- |
| 3D (Built-In) | 基础3D项目            |
| Universal 3D  | 2D和3D项目，从移动设备到高端主机和PC |
| 3D HDRP       | PS4, PS5, XBox One, Xbox Series, VR. 包含物理基础光照、高级材质、光照和后期处理、实时光线追踪、离线路径追踪 |


---

选择3D HDRP模板
URP 侧重于跨平台兼容性和性能，HDRP 则专注于高保真视觉效果。
HDRP 适用于需要极致视觉效果的游戏和动画项目,但需要更强大的硬件支持(更好的GPU性能)和更多的开发时间.

---
### 文件管理和项目组织

当我们保存Unity 项目时, 会写入相应的文件到我们的电脑
_Project 目录与 储存文件的对应关系_

![](https://tingwu.aliyun.com/api/editor/get/v2/524379/0/905eedabf33948d6b7f7db0437474019/9db626680b9f426e9218dbf764cf3f33.png)


---

Assets: 存放所有项目资源
- Library: 由 Unity 自动生成，存放项目相关的元数据和缓存文件
- Logs: 存放Unity日志
- Packages: 存放项目所需包
- ProjectSettings: 项目设置
- UserSettings: 用户设置

---


## 1.3 基本游戏对象操作

---

### 导航的6个组合键

- 右键 + W/A/S/D 键：控制场景视角的前进、后退、左移和右移 
- 右键 + Q/E 键：控制场景视角的上升和下降


---

## 第2章 构建虚拟世界：场景设计与材质应用


---

## 2.1 场景设计基础  

---
### Import from Assets  Store


Practices - Assets Store
![|200](https://i.ytimg.com/vi/AzItMI583kY/hqdefault.jpg)
(Source:  [youtube.com: How to Import Assets from Unity Asset Store 2022](https://youtu.be/AzItMI583kY?t=78))

---


## 使用 Asset 

介绍Unity中的 GameObjects 
- GameObjects 创建
- Assets Store [[#04-02 - Asset Store 和 Package Manager]]
- 包管理器,
- 导入资产的最佳实践和方法。

---

### GameObjects 创建

**万物皆对象**


🖱️ 在Hierarchy 场景层级中右击，选择"创建空物体"（Create Empty）来创建一个新的游戏对象。

遵循编程语言面向对象的规范, 属性..

👀   Empty 有Transform 属性.


---

荷兰哲学家 Baruch Spinoza:

> 物质、属性和模式
> Substance, attributes, and modes:


现代哲学的一个检验点，因此可以说：你要么是`Spinozist` (斯宾诺莎主义者)，要么根本就不是哲学家。





---
## Asset Store 和 Package Manager

Unity中有两个重要工具用于获取资源和包：
Asset Store和包管理器

---
### 1. Package Manager

🔍 探索该项目中已安装的包和可安装的包
`Window > Package Manager` 打开包管理器
<!--  包管理器是Unity该项目已有的必要包，也可手动添加或移除。-->

---

### 2. Asset Store

Asset Store是Unity官方的资源商店，提供各种插件、3D模型和材质等，可大大提升开发效率。
`Window > Asset Store` 

> [!info] 
> 第一次打开资源商店时，您会看到此消息：
> 资源商店已移动。您只需单击“始终从菜单中的浏览器中打开”，
> 然后单击“在线搜索”。



---

### 导入"干净的"资产

以保证性能和质量, 在Assets 导入是的检查一下关键要素的规范: 
- 模型多边形点量、2k 以下, 清晰拓扑, 布线合理"整洁"。
- UV映射、坐标, Color, AO, Normal 等一致的正方形 """$>=2^4$ """
- 纹理分辨率
- 动画等简洁("关键"帧, 避免冗余). 
- 对齐原点(0,0,0), 避免导入模型后有偏移.


---
#### Unity支持的文件格式

![](https://tingwu.aliyun.com/api/editor/get/v2/524379/0/de7d6346c452417ab113f62618a45018/ff339f5cc2664d90a50b13df6336159a.png)
   

- FBX: 最常用的格式,支持在同一文件中包含纹理、材质、动画和3D网格。
- 其他格式通常只导入模型本身。




---

#### Unity支持的纹理格式:

![](https://tingwu.aliyun.com/api/editor/get/v2/524379/0/c7049cc551f3418684d0257df10fb954/1c69f89ea51d4f5fb432cc89b8a14308.png)


   - PNG: 压缩无损, 支持alpha通道。(推荐, 适合用于web项目)
   - TGA: 无损, 非压缩, 支持alpha, 适合在运算过程中使用,因为它的保存速度更快,并且可以更方便地处理透明通道。 [7](https://discussions.unity.com/t/tga-vs-png/635055)
   - PSD和TIF: 可以保留图层导入。


---

### 将资产导入Unity

导入资产:
- 可通过拖放
- 菜单或文件夹导入资产,导入后可将其放置到场景中使用。


---
万物皆空




<!--  

➕ Empty 可以添加组件, 点击"添加组件"（Add Component）为游戏对象添加新的功能。

🔍 在组件搜索栏中搜索并添加特定组件，如"光源"（Light）或"网格渲染器"（Mesh Renderer）。

🗑️ 如需要，可以从游戏对象中移除不需要的组件。

我们看到虽然是空对象，它能构成任意实体。因此，从这个例子可以了解, 数字世界的创建, 与禅宗思想的核心 "万物皆空"以及现代宇宙学中"宇宙从无到有"的观点相呼应。

-->
---

## Level Building(ProBuilder)

![|200](https://i.ytimg.com/vi/YtzIXCKr8Wo/hqdefault.jpg)
参考:
(Source:  [youtube.com: MAKING YOUR FIRST LEVEL in Unity with ProBuilder!](https://youtu.be/YtzIXCKr8Wo?t=281))
[[source - Making your first level in Unity with Probuilder]]
官网说明 (Source:  [unity.com: Build Virtual Worlds From Scratch | Unity ProBuilder](https://unity.com/features/probuilder))

---

ProBuilder 是 Unity 内置的3D建模工具.

应用场景: 
- 构建游戏场景原型(prototypes), 关卡Level Building
- 创建 Convex 用于 collision(碰撞检测)

---

### Introduction to ProBuilder

实践目标：
1. 安装和使用 ProBuilder 工具
2. 了解 ProBuilder 的基本功能

---

![150|](https://i.imgur.com/kbP8HyO.webp)

实现目标的步骤：

1. 安装 ProBuilder
   a. 打开 `Window > Package Manager`
   b. 在Package Manager顶部，切换  `Packages: in Project -> Unity Registry`
   c. 在搜索栏中输入 "Pro Builder", 并点击安装

---

2. 打开ProBuilder工具
   a. 点击 `Tools > ProBuilder > ProBuilder Window` 打开ProBuilder窗口
   
---

3. 使用ProBuilder创建简单几何体
   a. 在ProBuilder窗口中，点击 "New Shape"
   b. 从弹出的菜单中选择所需的形状（如立方体、球体、圆锥等）
   c. 在场景中创建所选择的几何体

---

补充说明：
- ProBuilder主要用于在Unity中直接构建简单几何体
- 它通常用于在获得详细3D模型之前进行关卡设计和结构搭建
- 大多数情况下，设计师使用ProBuilder创建初步结构，之后会用3D艺术家提供的模型替换这些简单几何体

---

### Exploration of ProBuilder tools

深入探索ProBuilder的各种工具,如创建形状、编辑顶点/边/面、平滑等功能。

实践目标：
1. 探索ProBuilder工具的基本功能
2. 演示如何创建和编辑3D对象
---

![150|](https://i.imgur.com/D10ZYRj.webp)


1. 设置ProBuilder界面
   - 将ProBuilder菜单停靠在Inspector旁边
   - 点击三个点按钮，选择窗口显示模式（可停靠或浮动）
   - 选择文本模式或图标模式显示

---

2. 设置好网格系统
   - 启用Unity的网格系统（非ProBuilder功能）
   - 调整网格透明度
   - 选择网格平面（地板或墙面）

![150|](https://i.imgur.com/CtwSQ1z.webp)

---

3. 创建基本3D形状
   - 在`New Shape`菜单中选择形状（如立方体、圆柱体等）

---
![150|](https://i.imgur.com/Mbdiyt5.webp)

4. 编辑3D对象
   - 选择编辑模式：`Object`、`Vertex`、`Edge`或`Face`
   - 使用移动(W)、旋转(E)和缩放(R)工具修改对象
   - 选择并编辑特定顶点、边或面

---
![150|](https://i.imgur.com/vQv9mb8.webp)

5. 使用Poly Shape工具创建自定义形状
   - 选择`New Poly Shape`工具
   - 在场景中点击创建顶点，形成闭合形状
   - 调整形状高度
   - 完成编辑后，可以像其他对象一样进行修改


---


![150|](https://i.imgur.com/mn0UMQs.webp)

---

Point Mode > Set Pivot

![150|](https://i.imgur.com/InZZANV.webp)

---

Point Mode > Collapse point
焊接点

---
Face Mode Point Mode > Set Pivot

案例, 创建窗口的墙体
- 建立平面 
- extrude face 

![150|](https://i.imgur.com/TB9jP7R.webp)


---
Edge Mode

Insert Edge loop

---


---


## 2.2 材质和纹理的理解与应用  

---


## 应用材质

介绍 Unity中材质的基本概念、创建和组织方法,以及材质和纹理属性的说明。

>克隆练习项目文件::
> `Ex_Files_Unity_2023_EssT_1/Ex_Files_Unity_2023_EssT_1`


> Material package: 
>`Ex_Files_Unity_2023_EssT_5/Resources/materials.unitypackage`


---

#### 1.打开练习文件

- 关闭 Unity Editor, 回到 Hub
- 打开(Reveal) Project 文件夹, 
- 用练习文件覆盖Project 文件夹. 
> 练习项目文件: `Ex_Files_Unity_2023_EssT_1/Ex_Files_Unity_2023_EssT_1` 

---

#### 2.导入材质包 (Material Package) 
> Ex_Files_Unity_2023_EssT_5/Resources/materials.unitypackage


- 进入 `Assets > Import Package > Custom Package`
- 导入`exercise_files > resources > materials Unity.package`

![](https://tingwu.aliyun.com/api/editor/get/v2/524379/0/7d8de97ca81c4f37abbf0b59a5f9719a/0e09fb5b67e54123ac1eb65375eb3230.png)

---
### 材质简介

---

构成材质(Material)的基本元素:
- 着色器 (Shader)
- 纹理文件 (Texture)
- 属性参数

---


着色器(Shader): 

Shader 是一种计算机程序,用于在 3D 渲染过程中计算光照、阴影和颜色。
定义了物体表面如何与光线交互的程序。(**整体信息**)
![](https://tingwu.aliyun.com/api/editor/get/v2/524379/0/c95347c793724f17b4955ce127d6497f/fe2f89f165bf4d758d8ec65433d21771.png)


---

Unity Shader Graph 创建一个交互的shader 
[[Shader Graph -  Unity 中创建交互式 Vertex Displacement]]

![](https://imgur.com/y29r2gr.gif)


---


纹理(Texture):

图像文件,用于为 Materials 控制**细节信息**,如颜色、凹凸等。(Substance Painter)

![](https://tingwu.aliyun.com/api/editor/get/v2/524379/0/085d4887f2be49738c1b0924ef5f82b8/a595312b4719450bb643bca139ba2e8e.png)

---

材质(Materials): 

通常引用`Shader`和`Texture`, 以及相关`属性值` 来定义物体的最终渲染效果。
![](https://tingwu.aliyun.com/api/editor/get/v2/524379/0/0349f86d9f844f84ac6e91f30f6afbc3/486888d7db804772a04470c74f6125d8.png)

---

### 创建和组织新材质

TLDR: 演示了如何在Unity中创建新材质,选择合适的着色器,并简要介绍了不同类型着色器的用途。


---

### 构建 Materials 

• 📁 如果还没有,创建一个 Materials 文件夹
• 🖱️ 在 Materials 文件夹中右击,创建一个新材质并 Rename  "TestMat"

---

• 🔍 探索典型的着色器(shaders)及其效果
- `Particles > ...`
- `HDRP > Eyes`


---
### Autodesk Interactive 介绍


🎨 选择 `HDRP / Autodesk interactive` 着色器

Autodesk Interactive 着色器是一种用于3D建模和渲染软件中的材质着色器。它的主要作用包括:

1. 在Autodesk的多个软件中保持一致的材质外观。(如Maya、3dsMax, Blender等)

2. PBR支持 - 遵循基于物理的渲染(Physically Based Rendering)原则,产生更真实的视觉效果。


---

### 材质和纹理属性

---

材质编辑器添加纹理方法

• 📁 `Assets/Materials/Texture/steel glossy` 为例, 将纹理文件导入到项目的纹理文件夹中。

• 将base color map 拖进材质的base color设置中. `TestMat > Exposed Properties > base color`。

• 勾选启用。


---


Sketchfab, 了解各种贴图的作用及调整方法。

**Base color 基础颜色贴图:** 决定材质基本颜色,拖放到Base Color栏。
**Metallic map 金属度贴图** : 控制反射度(有时是Specular map)。
**Roughness 粗糙度贴图** : 调节表面光滑度,值越高越粗糙,可用贴图或滑块调整。
**Normal map(法线贴图)**: 增加几何细节,不改变实际几何形状。
**Emission map发光贴图**: 用于发光物体,添加光源颜色。
**AO map 环境光遮蔽贴图** : 增加真实感,定义间接光照。
**UVoffset (UV 偏移设置):** 解决贴图显示问题,调整缩放和位置。

---

![PBR material|200](https://media.sketchfab.com/models/4b4c92c011bf4a2390cb50d44b8f561c/thumbnails/ca423af7658a4271b5f82f4a603e71b3/13322c5c78154141a1c9c2a5a1383795.jpeg)
(Source:  [sketchfab.com: William - 3D model by DarkNik (@DarkNik) [4b4c92c]](https://sketchfab.com/3d-models/william-4b4c92c011bf4a2390cb50d44b8f561c))



---

## 2.3 光照与阴影的基本原理


---

### 什么是Prefabs(预制件)

---

#### 1. 基本概念

> Templates to create multiple instances of the same  

- Prefabs 相当于 GameObject 的 **模板(分身)**.
- Prefabs 使得'分身'的属性能互相继承, 并同步更新。
![150|](https://i.imgur.com/FMmF29h.webp)

---

#### 2. Prefab的应用场景
> Used for props and NPCs (non-player characters)

- 常用于Props(道具)和NPC(non-player Characters, 群演)。
- 节省大型场景的性能. 

---

#### 3. 嵌套Prefab和变体
> Can be nested and Variations.
> 
例如， 10 棵树 (children)， 一组是🟢  叶， 一组是🔵叶。
```json
[
    [
        ["🌳1", ["🟢1","🟢2",...]],
        ["🌳2", ["🟢1","🟢2",...]],
        ["🌳3", ["🟢1","🟢2",...]],
        ["🌳4", ["🟢1","🟢2",...]],
        ["🌳5", ["🟢1","🟢2",...]],
    ],
    [
        ["🌳6", ["🔵1","🔵2",...]],
        ["🌳7", ["🔵1","🔵2",...]],
        ["🌳8", ["🔵1","🔵2",...]],
        ["🌳9", ["🔵1","🔵2",...]],
        ["🌳10", ["🔵1","🔵2",...]],
    ]
]
```

---


### 创建Prefabs(预制件)


#### 1. 创建Prefab文件夹

- 在 `Project > Assets` 中创建专门的Prefabs文件夹，以便更好地组织管理Prefab。
#### 2. 从场景对象创建Prefab
- 选择场景中的对象,拖放到Prefabs文件夹中即可创建Prefab

![150|](https://i.imgur.com/xuuM9P4.webp)



---

#### Prefab 应用(不同材质)

![150|](https://i.imgur.com/E23djhQ.webp)



---

 

### Prefabs Variants (预制件变体)

Prefabs Variants 是Prefabs 的特殊版本,可作为新的Prefabs(预制件)使用,适用于创建相似但不完全相同的对象。

---

![150|](https://i.imgur.com/K3FVWdB.webp)

![150|](https://i.imgur.com/XyBpPc9.webp)

---

在 Prefabs 原版 增加 Object 会传递到所有 Prefabs 中
![150|](https://i.imgur.com/jRKJFfw.webp)

---

在 Prefabs Variants 添加 Object
![150|](https://i.imgur.com/Ujs7qbp.webp)


---

参考教程
![|200](https://i.ytimg.com/vi/S0cjIhI2fIw/hqdefault.jpg)
(Source:  [youtube.com: Prefabs & Prefab Variants - Unity Tutorial](https://youtu.be/S0cjIhI2fIw?t=464))
[[Prefabs & Prefab Variants - Unity Tutorial]]

---
> 注意: 
> Unity不允许Prefab嵌套
> 在Unity中创建Prefab(Prefab)时, 如果GameObject 是内嵌在一个 Prefab 中会遇到的**嵌套错误**问题。


解决方法, `Prefab> unpack` 创建新的：
- 选择场景中的父级Prefab对象。
- 右键点击，选择"Prefab"选项。
- 选择"Unpack Completely"（拆包）

---
#### Tips: 
Camera 与 ViewPoint 的切换: 
ViewPoint >> Camera:  `GameObject >Align View To Selected`
Camera >> ViewPoint:  `Ctrl` + `shit` + `F` 

---



---

## 第3章 动画与生命：角色动画与行为控制


---

## 3.1 动画基础与动画编辑器  

---

## Creating and Implementing Animation

`create > Animator`
![150|](https://i.imgur.com/fAhQbpp.webp)

---


以下是该课程章节的概括和次章节，使用 Markdown 格式输出：

### Unity 中的动画基础和编辑器

> TLDR: 介绍 Unity 中的动画基础，重点讲解使用 Animation Window 创建简单动画的方法。

---

#### Animation Window

 `Window > Animation > Animation` 

---

#### 创建动画文件

1. 选择场景中的GameObject
2. 在 Animation Window 中`Create`创建新动画文件.
3. 存储在专门的动画文件夹中。
4. `Add Property`选择要动画的对象属性，如 Transform 组件的 Position。


---


#### 设置关键帧

调整动画的总时长，`5*60` == 5s
![150|](https://i.imgur.com/dwAQ4VC.webp)

帧率 == 60
`「⋮」> Set Sample Rate ` (60fps)

---
#### 编辑动画曲线
曲线参考 [[Animation curve]] 缓动函数
(-- `Easing Functions Cheat Sheet` [easings](https://easings.net/))
![150|](https://i.imgur.com/CK7uFEM.png)


---
#### Animator Controller

![150|](https://i.imgur.com/1klsOFj.webp)



---


## 3.2 角色控制器的创建与应用  

---

## 创建和实现动画

TLDR: 本章介绍Unity中的动画基础、动画控制器和物理系统，包括创建简单动画、使用动画控制器管理多个动画片段，以及为游戏对象添加物理特性。

---

### Unity中的动画基础和编辑器

TLDR: 介绍了Unity中创建动画的基本方法，重点讲解了使用Animation窗口创建简单动画。

- Unity提供多种创建动画的方式
- Animation窗口是最简单的动画创建工具
- 演示了如何为场景中的椅子对象创建简单的移动动画
- 解释了如何添加动画属性、设置关键帧和调整动画时间线

---

## 3.3 动画状态机的构建

---

### Animation Controller 动画控制器

TLDR: 讲解了动画控制器的作用和基本使用方法，演示了如何为多个对象创建动画并在一个控制器中管理。

- 动画控制器允许为一个游戏对象添加多个动画并基于状态进行切换
- 演示了如何创建多个椅子的动画并添加到同一个控制器中
- 解释了如何在动画状态机中连接不同的动画状态
- 介绍了如何设置摄像机以正确查看动画效果

---

在 Unity 中实现动画循环有以下几种方法:

1. 在动画导入设置中设置循环模式(Wrap Mode)为"Loop"。[[015 Understanding frequency]](https://discussions.unity.com/t/animation-loop/34663)[[02-04 时间轴进阶]](https://stackoverflow.com/questions/22809514/how-to-make-an-animation-clip-on-unity-to-loop)[[2016 奥巴马 3D Scan]](https://docs.unity3d.com/540/Documentation/Manual/LoopingAnimationClips.html)

2. 在动画窗口中找到动画剪辑,并将默认选项(Default)设置为循环。[[02-04 时间轴进阶]](https://stackoverflow.com/questions/22809514/how-to-make-an-animation-clip-on-unity-to-loop)

3. 如果无法直接编辑动画的循环属性,可以在项目窗口中找到该动画文件,并在检查器窗口中进行设置。[[02-04 时间轴进阶]](https://discussions.unity.com/t/how-do-i-stop-an-animation-looping/90663)[[015 Understanding frequency]](https://www.reddit.com/r/gamedev/comments/wreuwy/trying_to_stop_my_animation_from_looping_unity/)[[1956  Dartmouth workshop (达特矛斯会议)- 人工智能概念的诞生]](https://discussions.unity.com/t/animation-keeps-repeating/231243)

4. Unity 还提供了一些高级的循环优化工具,可以帮助确保动画循环的平滑过渡。[[2000_Thrift_Still Life in Nearly_KEY-W8S2HJ87]](https://docs.unity3d.com/540/Documentation/Manual/LoopingAnimationClips.html)[[1899 Nikola Tesla - Everything Is Light]](https://www.youtube.com/watch?v=WwCPOt0gMMw)[[1899 Nikola Tesla - Everything Is Light]](https://discussions.unity.com/t/how-to-make-an-loop-animation/793442)[[10000hour 定律(刻意练习) 的质疑]](https://docs.unity3d.com/Manual/LoopingAnimationClips.html)

总之,Unity 提供了多种方法来实现动画循环,开发者可以根据具体需求选择合适的方法。


---
Wrap Mode 是一个 Unity 动画系统中的属性，它决定了动画片段在播放结束后如何继续处理。  它可以设置为 Loop（循环）、PingPong（来回播放）、Clamp Forever（固定在最后一帧）等模式。  例如，如果您将一个动画片段的 Wrap Mode 设置为 Loop，那么该动画片段会在播放结束后再次从头开始播放。  

在较旧的 Unity 版本中，您可以在 Animation 窗口中直接设置 Wrap Mode。  然而，在较新的 Unity 版本中，您需要在 Inspector 中将 Animation Clip 设置为 Debug 模式才能访问 Wrap Mode 的设置。  此外，您也可以通过 Animation Import Settings 中的 Wrap Mode 属性来设置动画片段的循环模式。 

(Source:  [unity.com: Animation Loop - Questions & Answers - Unity Discussions](https://discussions.unity.com/t/animation-loop/34663/2))
---

## 第4章 虚拟物理世界：物理引擎与碰撞处理


---


## 4.1 Unity物理引擎基础  

---

## Collider 


参考教程
![|200](https://i.ytimg.com/vi/S0MXZ6AXzTE/hqdefault.jpg)
(Source:  [youtube.com: Unity Explained - Colliders - Beginner Tutorial](https://youtu.be/S0MXZ6AXzTE?t=1))



---

## RidgeBody (物理和刚体)

RidgeBody 是一个让 GameObject 拥有物理特性的 Component(组件)。

---

### 质量(Mass)

定义 GameObject 的质量(以千克为单位)

> **真空环境**中,Mass 不会影响物体在重力作用下的下落速度.
> **空气环境**中,更重的物体由于受到更大的空气阻力.

---

### 阻力(Drag)

阻力是物体速度减慢的程度。这个设置可以模拟空气阻力或摩擦力的影响。
> **低值**表示缓慢衰减,适合**模拟重物**.
> **高值**表示快速衰减,适合**模拟轻物**.

---

真空实验
[[Aristotle Galileo and Newton's Laws]]

![150|](https://i.imgur.com/MYeELqz.webp)

---

## 4.2 碰撞体与触发器的设置  

---

## Collider(碰撞器)
Collider(碰撞器)是GameObject 的一个Component (组件)。


---

### 设计触发事件
Collider 不仅可以让物体相撞弹开。我们还能用触发事件, 设计物体触发后的反应。比如，当玩家碰到一个宝箱时，宝箱就会打开。



![150|](https://i.imgur.com/F9zFvcx.webp)

---

### Unity Collider components 设计感知环境的外衣
它就像是给游戏物体穿上了一件看不见的衣服. 有不同的形状，比如方形、圆形或者更复杂的形状。这件衣服可以让物体感知到周围的其他物体，并且在碰到时产生反应。

![150|](https://i.imgur.com/PC2jnrZ.webp)

---

- Box Collider: 最常用，适用于大多数对象
- Mesh Collider: 适用于不规则形状
- Sphere Collider: 适用于圆形对象
- Capsule Collider: 适用于无肢体动作的角色


---


### Applying Colliders

为场景中复杂的对象添加适当的碰撞体, 例如

- 为地板、墙壁、天花板等添加Box Collider
- 为不规则形状的物体添加Mesh Collider
- 为椅子添加Capsule Collider

---

## 4.3 刚体动力学与碰撞响应

---

### Optimizing Collisions

优化和调整碰撞体以获得更 realistic 的效果。

- 使用 Edit Collider工具调整碰撞体大小和形状
- 为不同对象选择最合适的碰撞体类型
- 添加Physics Material来控制物体的弹性和摩擦力
- 通过调整参数来实现所需的物理效果

---


Animation + Physics 实验

右键 `Project/Assets` , `Create > Physical Material`

![150|](https://i.imgur.com/o5xOqAA.webp)

![150|](https://i.imgur.com/m6Pe11z.webp)


---

#### Friction
- Static Friction(静摩擦力):  决定**推动物体所需的力**
- Dynamic Friction(动摩擦力): 决定物体**滑动时的阻力**


---

   - 范围从0到1。
   - 0表示无摩擦(如冰面),1表示高摩擦(如橡胶)。
   - 具体值取决于材质,例如:
     金属对金属: 0.2
     橡胶对金属: 0.7
     橡胶对混凝土: 0.9
     皮肤对金属: 0.6(默认值)

---
将在以下章节学习`NoFriction`:
> [[Bumper Cubes (Visual Scripting) 01]] 中会使用 NoFriction 滑动的方块
---

#### Bounciness (弹性)

   - 范围从0到1。
   - 0表示不弹(如软粘土),
   - 1表示完全弹性(如橡胶球)。


---

#### Friction Combine和Bounce Combine

   - 决定如何计算两个碰撞体之间的摩擦力和弹性。
   - 默认均为Average(平均)。
   - 其他选项包括Minimum(最小值)、Maximum(最大值)和Multiply(相乘)。

---

[[Unity - PhysicsMaterial values]]


---

## 第5章 声音：音频的添加与调整


---

## 5.1 Unity音频系统概览  

---

## 5.2 音频源与音频监听器的使用  

---

## 5.3 音频混合器与音频效果的应用

---

## 第6章 增强现实：Unity与AR开发


---


XR(Extended Reality，简称XR)  扩展现实 -
- 构建可人机交互的数字环境
- 包罗万象的术语(虚拟现实(VR)、增强现实(AR)和混合现实(MR) ...R..R.R.R)
![bg fit left:50% vertical](https://i.imgur.com/xEiCDcd.webp)

---
![bg fit left:50% vertical](https://i.imgur.com/qN3yZDl.webp)

---


## AR 开发环境因素


###  ARFoundation - 目标平台插件

ARFoundation 是Unity的跨平台AR框架, 为ARCore和ARKit等平台提供统一接口 
ARFoundation 的XR插件
- Android设备需要`ARCore` XR插件 
- iOS和visionOS设备则需要 `ARKit` XR插件来实现AR功能


![bg fit left:50% vertical](https://i.imgur.com/8OyJlPD.webp)

---

### ARSubsystems - 目标平台Tracking  方式支持

Subsystems Unity 的 AR Subsystems 包现已废弃，相关功能已集成到 AR Foundation 包中。用户需要在 manifest.json 文件中替换相关依赖项。如果使用的第三方包仍依赖于 AR Subsystems，则可能需要升级该第三方包或降级 AR Foundation 版本

| Feature(功能)           | ARCore Android | ARKit iOS | visionOS | HoloLens | Meta Quest |
| --------------------- | -------------- | --------- | -------- | -------- | ---------- |
| Session(会话)           | Yes            | Yes       | Yes      | Yes      | Yes        |
| Device tracking(设备跟踪) | Yes            | Yes       | Yes      | Yes      | Yes        |
| Camera(相机)            | Yes            | Yes       | -        | -        | Yes        |
| Plane detection(平面检测) | Yes            | Yes       | Yes      | Yes      | Yes        |
| Image tracking(图像跟踪)  | Yes            | Yes       | Yes      | -        | -          |
| Object tracking(物体跟踪) | -              | Yes       | -        | -        | -          |
| Face tracking(人脸跟踪)   | Yes            | Yes       | -        | -        | -          |
| Body tracking(人体跟踪)   | -              | Yes       | -        | -        | -          |
(Hands Tracking.)

---
###  目标平台选择

- Android开发需要PC和Android设备(Android Studio并非必需)
- iOS/visionOS开发则需要Mac和对应设备(**构建是依赖Xcode)**

es. 虽然技术上可以在PC上使用Mac构建服务器等工具开发iOS应用，但这会增加复杂性。


---

## Tracking Features

AR功能的基础
- 会话 (Session)
- 设备追踪 (Device Tracking)
- 摄像头 (Camera)

会话 (Session)是实现AR功能的基础，通过设备追踪 (Device Tracking)来定位设备在现实中的位置和姿态。

---


环境识别:
- 环境平面检测 (Plane Detection)以放置虚拟物体。
- 图像追踪 (Image Tracking)
- 物体追踪 (Object Tracking)

生物识别
- 人脸追踪 (Face Tracking)
- 身体追踪 (Body Tracking)
- ~~Hands Tracking~~


---


### Basic - 会话 (Session)

AR会话的管理，这是所有AR功能的基础。

### Basic - 设备追踪 (Device Tracking)

追踪设备在物理世界中的位置和方向, 它让虚拟内容能稳定地显示在现实环境中
### Basic - 摄像头 (Camera)

能否访问并操作设备的摄像头。系统使用摄像头进行场景渲染和视觉处理 


---

### 平面检测 (Plane Detection)

识别地面、桌面和墙壁等平面区域，可在其上放置虚拟物体，常用于家具摆放效果预览


![bg fit left:50% vertical](https://i.imgur.com/gNkfeHx.gif)


---

#### Case -IKEA Place

IKEA Place 是一款基于 ARKit 的免费应用，适用于 iOS 11 及以上版本的 iPhone 和 iPad。用户可以通过该应用将超过 2,000 件宜家家具虚拟摆放在家中，帮助做出购买决策，同时展现 ARKit 的强大功能。

![bg fit left:50% vertical](https://i.imgur.com/BMahhcA.webp)

---

#### Case -KAWS 第三个空间


街头 -- 衣服 -- 博物馆 -- "第三个空间" ''
KAWS作为街头艺术家，通过捕捉大众情绪来批判流行文化符号米奇。他的艺术作品打破了物理空间的限制，从街头艺术延伸到建筑前，又以商业艺术的形式出现在服装上，体现了消费主义特征。2022年，他更是与游戏平台合作，在美术馆这个"第三空间"展示其作品。

![bg fit left:50% vertical](https://i.imgur.com/Eo4Xnlw.webp)
![bg fit left:50% vertical](https://i.imgur.com/R4xco4Y.webp)

(Source:  [theguardian.com: Kaws: New Fiction review – an art show where you brush shoulders with virtual visitors | Exhibitions | The Guardian](https://www.theguardian.com/artanddesign/2022/feb/05/kaws-new-fiction-review-brian-donnelly-serpentine-gallery-north-london#img-2))

---


### 图像追踪 (Image Tracking)

识别图像并添加 AR 虚拟对象, 可用于追踪海报, 标志, QR 等目标 。

---


#### Case
以包装、标志、名片等各种物体为目标进行追踪, 并以其为锚点显示AR。例. Eyejack--`|AR transparent video playback in Unity – yuuuuu.net` [yuuuuu](https://yuuuuu.net/2018/02/04/ar-transparent-video-playback-based-on-vuforia-in-unity/) 
![|200](https://i0.wp.com/cdn.shopify.com/s/files/1/1502/2530/t/24/assets/eyejack-exhibitions.gif?w=1100&ssl=1)


---

--`|Unity  AR旋转罗盘(Vuforia)` [bilibili](https://www.bilibili.com/video/BV1CJ41177Xy?t=50)
![|200](http://i1.hdslb.com/bfs/archive/8e0e478ff78771beac85eddb2dc8efa319a895ed.jpg)



---

--非常花时间 ,[[Unity Mars]] to speed up the process`|the character interact with the environment in an intelligent way | Unity for Humanity` [youtube](https://www.youtube.com/watch?v=CrG8GkeFCog?t=1505)
![|200](https://i.imgur.com/xQAipBE.png)


---



### 物体追踪 (Object Tracking)

追踪现实世界中的3D物体。


---

#### Case
跟踪具有玩具和文具等特征的物体。 与图像识别相比,需要更多的工时, 例如需要提前扫描目标。 

例.Infiniti QX50 X-Ray --`|AR & VR Experiences for Creative Agencies & Brands | Unity` [unity](https://unity.com/solutions/brands-and-creative-agencies)--`|Visionaries 777 Ltd.` [vz777](https://www.vz777.com/index.html?project=project-infiniti_propilot_ar)
![|200](http://vz777.com/images/detail/infiniti_model_target/infiniti_model_target_slideshow-01.jpg)


---


**当代艺术与数字世界的融合**

(AR)和游戏平台Fortnite相结合,KAWS的"新虚构"展览。

艺术家创造了一个让不同世代、不同文化背景的观众得以对话的平台。展览中漂浮的Companion形象既是数字时代的象征,也是人类情感连接的媒介。

作品通过多维度呈现方式,探讨了在数字化时代艺术的真实性、可及性与永恒性。它提醒我们:艺术的本质不在于载体的形式,而在于其传达的情感与思想。

例. Street artist Kaws`|‘Who’s to say it’s not real?’ Street artist Kaws on creating Fortnite’s first exhibition | Street art | The Guardian` [theguardian](https://www.theguardian.com/artanddesign/2022/jan/18/kaws-fortnite-serpentine-street-art-augmented-reality)
![|200](https://i.guim.co.uk/img/media/b6a413807853326d0878b80880283c3139cd3afe/0_303_3912_2347/master/3912.jpg?width=1200&height=630&quality=85&auto=format&fit=crop&overlay-align=bottom%2Cleft&overlay-width=100p&overlay-base64=L2ltZy9zdGF0aWMvb3ZlcmxheXMvdGctZGVmYXVsdC5wbmc&enable=upscale&s=5a1daf3d9762e5c35c42551cd05bc407)





---


### 人脸追踪 (Face Tracking)

追踪人脸，并可以用于创建面部特效或虚拟试妆等应用。
![bg fit left:50% vertical](https://i.imgur.com/t3ZTRQd.webp)

---
![bg fit left:50% vertical](https://i.imgur.com/bhPGK5j.webp)

Fangli Jun的艺术作品以光头冷漠的人物形象为主要特征 通过夸张的哈欠表情来表达对现代社会的不满和疏离感 这些无表情的人物反映了在社会控制下个人的孤独和无助

---


#### Case
可以识别人脸并显示物体, 它在 Instagram、抖音和美图等相机应用中得到高度开发和广泛使用。
例. Beauty3000 --`|Johanna Jaskowska speaking her creative mind - Forward Festival` [forward-festival](https://forward-festival.com/article/johanna-jaskowska-speaking-her-creative-mind)



---


### 身体追踪 (Body Tracking)
用于全身动作交互控制,  进行人体关键点检测与追踪(Pose Estimation)等功能.

应用: 
- Motion Capture(运动捕捉)
- 全身交互（如虚拟角色驱动）
- 虚拟试衣

姿态估计
![bg fit left:50% vertical](https://i.imgur.com/hXoNEtT.webp)




---
## Further

#### 手势追踪 (Hands Tracking)


---


#### Markless (无标记) 
显示空中物体的 AR。根据周围信息调整显示位置, 但基本上不需要跟踪目标。 除此以外的AR都是基于标记AR(Marker-based)--`|What is Pokémon Go and why is everybody talking about it? - Vox` [vox](https://www.vox.com/2016/7/9/12132748/what-is-pokemon-go-game)
![|200](https://cdn.vox-cdn.com/thumbor/BOekFb2MEYAoVc-kJbvBwsMC2Xc=/0x58:804x479/fit-in/1200x630/cdn.vox-cdn.com/uploads/chorus_asset/file/6765237/20160708-pokemon-go.jpg)




---


### Street Art

可关联艺术家: [[Artisti/Keith Haring]]

![](https://publicdelivery.org/wp-content/uploads/2017/06/Keith-Haring-%E2%80%93-Crack-is-Wack-1986-handball-court-at-128th-Street-and-2nd-Avenue-New-York-1-2-800x600@2x.jpg?ezimgfmt=ng:webp/ngcb36)



---



通过AR为全球有变革意义的贡献.
移动设备上的AR应用在社会影响、教育、意识提升和环境保护方面发挥作用.



![bg fit left:50% vertical](https://lh3.googleusercontent.com/yR8GRREoLJ3cZYT5TgTgW8uLf6zizJdbQfnI9zYcd7q_syRhxGtL6Zmydvx6qQbA9PfzU8HVpycTg8KQqcUed6-3TIZsfLc)



**Just a Line**基于 ARCore,  在AR环境中自由创作简单的绘画，并通过视频分享作品.

在公共空间任意发挥个体情感.
与他人分享情绪或信息.
甚至构建一个全新的空间.

---

--`|Just a Line - Draw anywhere, with AR` [withgoogle](https://justaline.withgoogle.com/)
--`| AR Experiments: Expanding creative possibilities with ARCore` [youtube](https://www.youtube.com/watch?v=7SwZUNDsWaM?t=97)

---



### Story Museum

2016年底 Jack Sachs 在Tate(泰特美术馆) 将马戏团和玩具店的的欢腾气氛, 打破传统的博物馆参观方式，为观众提供了更多维度的心理与感官体验, 激发观众对艺术更特别的思考. 


--`|SHHH! Jack Sachs x Tate Britain | Blink Productions | Tate Collective | D&AD Awards 2017 Pencil Winner | Brand Expression in Moving Image | D&AD` [dandad](https://www.dandad.org/awards/professional/2017/branding/25976/shhh-jack-sachs-x-tate-britain/)
![bg fit left:50% vertical](https://i.imgur.com/LNzQSQ0.png)


---



### Consciousness Elevation
心理健康意识等各个方面: **增强精神健康和内在感知** 

应用如 Helium 可以通过生物反馈(es. Wareable Devices,  ) 让用户“看见”自己的情绪状态和body Physical cue(生理信号esBrainWave)，并用 AR 创造沉浸式的放松体验，从而增强个人对思想和情绪的觉知与控制


![bg fit left:50% vertical](https://i.imgur.com/fl7dmbb.webp)

---





--Sufficient light`|/ Persistent world-scale AR experiences with ARCore - Unite Copenhagen` [youtube](https://www.youtube.com/watch?v=op-zs0mJOH0?t=467)
--Cross Platform shared AR `|Cloud Anchor/ Persistent world-scale AR experiences with ARCore - Unite Copenhagen` [youtube](https://www.youtube.com/watch?v=op-zs0mJOH0?t=341)


![|200](https://i.ytimg.com/vi/op-zs0mJOH0/hqdefault.jpg)
```
Unity 集成了 ARCore Cloud Anchors, 允许多用户在同一地点同时感受到一致的虚拟内容，支持 iOS 和 Android
```
(Source:  [youtube.com: Get off to a great start with handheld AR - Unite LA](https://youtu.be/op-zs0mJOH0?t=106))



![|200](https://i.ytimg.com/vi/rgVm0J3_qGY/hqdefault.jpg)
```
Unite LA 演讲 AR Foundation 
```
(Source:  [youtube.com: Get off to a great start with handheld AR - Unite LA](https://youtu.be/rgVm0J3_qGY?t=377))

---


### 红外线
- **tof ar**(Time-of-Flight时间飞行) 是Sony开发的AR 工具包,。可访问手机上的深度传感器,通过测量光的时间飞行来获取3D深度信息,从而深度信息更稳定精确(VS 光学识别). 工具包支持(带红外线功能的)索尼、三星、华为和苹果的许多设备 (Source:  [tof-ar.com: ToF AR - AR・VRアプリケーション開発のための進化したツールキット](https://tof-ar.com/s/tofaren/))![bg fit left:50% vertical](https://i.imgur.com/ClA6tkP.webp)

---




## Tutorial

[[Unity - AR for Humanity_p1]]
[[Unity - AR for Humanity_p2]]

**AR Foundation Samples**：GitHub 上为初学者提供的一个很棒的资源。这些示例提供了预配置的场景，展示了各种AR功能，可以帮助你快速掌握ARFoundation概念。

![](https://user-images.githubusercontent.com/2120584/86506046-52276b00-bd80-11ea-83de-77ceb634ac8c.gif)
(Source:  [github.com: GitHub - Unity-Technologies/arfoundation-demos: AR Foundation demo projects](https://github.com/Unity-Technologies/arfoundation-demos))


---


官方范例文档下载 --`|Unity-Technologies/arfoundation-samples: Example content for Unity projects based on AR Foundation` [github](https://github.com/Unity-Technologies/arfoundation-samples)

---


--(45 分钟)官方AR Foundation 详解`|The speakers/ What’s new in Unity’s AR Foundation | Unite Now 2020` [youtube](https://www.youtube.com/watch?v=jBRxY2KnrUs?t=103)
![|200](https://i.ytimg.com/vi/jBRxY2KnrUs/hqdefault.jpg)

---



--`| Unity AR Foundation - AR Draw Adding Multi-Touch Support (Part 2)` [youtube](https://www.youtube.com/watch?v=juRvdphom8k?t=479)
![|200](https://i.ytimg.com/vi/juRvdphom8k/hqdefault.jpg)[youtube playlist](https://www.youtube.com/playlist?list=PLQMQNmwN3FvzLN-8moCKmZb00gr7sdcrZ)


---



--Vuforia`|如何开发增强现实AR程序（Vuforia, 无需编程)` [bilibili](https://www.bilibili.com/video/BV1134y167ik?t=318)
--Vuforia `4.5 Virtual Buttons(Vuforia)|Augmented Reality for Everyone - Full Course` [youtube](https://www.youtube.com/watch?v=WzfDo2Wpxks?t=29279)
--AR Foundation`|Introduction/ Learn AR Development: AR Foundation Face Detection` [youtube](https://www.youtube.com/watch?v=MJ5pd_xDD2A&list=PL4g4CxkYXn3sjtFTSEW0uGv8J9QLsEWm8&index=4?t=14)


---

## 6.1 AR技术基础与Unity AR工具  

---

## 6.2 AR Foundation的使用  
---


--AR Foundation`|Placement Eagle Object Setup/ Getting Started With AR Foundation in Unity 2021 - AR Foundation 101 for Beginners (ARCore, ARKit)` [youtube](https://www.youtube.com/watch?v=lelX8GGh_S8?t=449)
![|200](https://i.ytimg.com/vi/lelX8GGh_S8/hqdefault.jpg)
--AR Foundation`|face Tracking` [youtube](https://www.youtube.com/watch?v=nfZHguNQYLA?t=209) `Channel VionixStudio` [youtube]
![|200](https://i.ytimg.com/vi/nfZHguNQYLA/hqdefault.jpg?sqp=-oaymwEbCKgBEF5IVfKriqkDDggBFQAAiEIYAXABwAEG&rs=AOn4CLB1Xt25iv9NEqbmV_hsu7WzU4ywzw)
--LBS (location-based service) , _LBS_社交 `008GoMap的图块机制` [bilibili](https://www.bilibili.com/video/BV1XJ411y7e7?t=12)
--`Unity定位SDK | 腾讯位置服务` [qq](https://lbs.qq.com/mobile/unityGeo/unityGeoGuide/unityGeoOverview)
--`游戏行业解决方案 | 高德地图API` [amap](https://lbs.amap.com/solution/game)


---


User interfaces VS interactions
AR 不需要学习 UI--`|Agenda/ 7 things you need to know when creating a mobile AR app | Unite Now 2020` [youtube](https://www.youtube.com/watch?v=Q3smmTWtzng?t=135)



---

## 6.3 创建简单的AR应用

### Reference

[[Source-Changing the world with AR -  Unity for Humanity]]

![bg fit left:50% vertical](https://i.imgur.com/J8WNNUE.png)

---





## Task 1:  Simple 🍉

创建第一个AR应用程序

在移动设备上创建并运行一个简单的AR应用，展示3D 模型
![bg fit left:50% vertical](https://assetstorev1-prd-cdn.unity3d.com/key-image/10f5d56b-8578-4f0d-b8a3-d1bc17fa153e.png?v=1)


---


### 1. 环境准备

安装所需的 Build Modules(构建模块)

  * Android build support（安卓设备）
  * iOS build support（苹果设备，需要Mac电脑）
![bg fit left:50% vertical](https://i.imgur.com/MjoXVcb.webp)


---

###  (暂时不建议)独立下载版
```
安装包以及模块的本地下载安装方式: 
https://unity.com/releases/editor/archive

```
![bg fit left:50% vertical](https://i.imgur.com/ZieJaP6.webp)

---

 (暂时不建议)
![bg fit left:50% vertical](https://i.imgur.com/a2P6dvW.webp)
![bg fit left:50% vertical](https://i.imgur.com/Enu3IjV.webp)

(Source:  [unity.com: Download Archive](https://unity.com/releases/editor/archive))


---

### 2 创建新项目
- 在 Unity Hub 中选择 `New > Unity 202x`
- 设置项目名称和位置

---

安装必要包,  `Window > Package Manager` 
  * AR Foundation
  * XR Plugin Management
	  * AR Core（安卓设备）
	  * AR Kit（苹果设备）
![bg fit left:50% vertical](https://i.imgur.com/pz0Qscp.webp)
---

### 3 设置AR环境
- 在 Hierarchy(层级窗口)创建会话 `XR > AR Session`
- 创建 AR 中心原点 ` XR > AR Session Origin` 
![bg fit left:50% vertical](https://i.imgur.com/nDtTEwO.webp)

---

- 删除 Main Camera(主摄像机)
- 设置 AR 相机 Tag(标签为) Main Camera

(相机标记为MainCamera后可通过Camera.main直接访问)

![bg fit left:50% vertical](https://i.imgur.com/RGZ14m7.webp)

---


### 4 添加3D模型
- 通过 `Window > Asset Store` 访问资源商店
- 搜索并下载 Food Pack
[unity](https://assetstore.unity.com/packages/3d/food-pack-3d-microgames-add-ons-163295)

![bg fit left:50% vertical](https://assetstorev1-prd-cdn.unity3d.com/key-image/10f5d56b-8578-4f0d-b8a3-d1bc17fa153e.png?v=1)


---


- 在项目窗口中找到模型
- 将模型拖放到 Hierarchy(层级窗口)
- 调整模型为物理比例, es:  0.1m(10厘米)
![bg fit left:50% vertical](https://i.imgur.com/z0Vjupd.webp)


---


5 场景控制技巧

- 使用 Gizmo 按钮切换是否显示符号
![bg fit left:50% vertical](https://i.imgur.com/45xygL0.webp)


---


## 部署游戏至 Android 设备

相关资料：
- PPT：[[Unity Build Android - AR Foundation]]
- PPT：[[Unity 构建 APK 时卡在 IPostGenerateGradleAndroidProject]]
- PPT：[[手机缺乏 ARCore 集成]]

如需了解所有问题及解决方案，请参阅：
PPT：[[Unity AR Android Issue]]


---


## 部署游戏到 IOS 设备

PPT: [[Unity Build IOS - AR Foundation]]


---

## 第7章 游戏发布与市场策略：构建与发布


---

## 7.1 游戏构建与优化  

---

## 7.2 多平台发布策略  

---

## 7.3 游戏市场分析与推广




[kimi](https://kimi.moonshot.cn/chat/cr5d4desdv18qbs84cn0)

在《Human Virtuality and Digital Life》[@2021frankelHumanVirtualityDigital]一书中，Richard Frankel 和 Victor J. Krebs 深入探讨了媒体技术的发展及其对人类虚拟性的影响。以下是根据书中内容整理的媒体技术发展简史


## 媒体技术发展简史：从内心世界到虚拟宇宙

### 引言

媒体技术的发展历程反映了人类不断寻求表达和传递内心世界的努力。从最初的语言到当今的数字媒体，每一次技术革新都为人类提供了新的方式来展示和分享我们内心所塑造的世界。

---


### 语言：内心世界的第一扇窗

语言是人类最早的技术之一, 它是我们传递内心世界的工具。通过语言，我们能够将抽象的思想和复杂的情感转化为他人可以理解的形式。语言成为了连接个体内心世界的桥梁，使得我们能够互相塑造与体验他人的世界。

---




语言的抽象化功能:

1. 概念形成:
   - 例子:看到松树,形成"树"的抽象概念
   - 应用:遇到槐树时,更新"树"的概念,无需重新学习

2. 想象力激发:
   - 例子:听到"树",能在脑中想象出树的形象
   - 特点:即使未亲见,也能基于已知概念进行想象

总结:语言技术帮助我们将具体事物抽象化,并能在脑中创造相应的画面。


---


### 文字：将思想刻印于时间

文字的发明让人类得以跨越时空的限制，将内心世界的生命延续下来。借助文字，我们的思想、情感和体验不再局限于当下，而是可以被保存、传播和继承。文字成为了人类内心世界的时间胶囊，使得千年之后的人能够体验古人所描绘的世界。

[[薛定谔的猫]]


---



### 印刷术：思想的广泛传播

印刷术的出现极大地扩展了人类内心世界的传播范围和速度。它使得个人的思想和创意能够快速复制并传播给更多的人。印刷术让人类的内心世界能够更广泛地影响和塑造社会。


---


### 摄影：捕捉瞬间的艺术

摄影技术, 能够精确地捕捉现实世界的瞬间，与前面的技术语言、文字和绘画相比，摄影减少了创作者和观众之间的抽象过程。摄影技术呈现的世界使信息传递更加直接，为观众提供了更确定、更具体的视觉体验。

---


### 电影：时间维度的延伸

19世纪中叶，电影技术在摄影的基础上增加了时间维度，使动态的世界能被记录和重现。它不仅能展现外部世界的变化，创作者还能通过编排叙事顺序和运用视觉语言（[[库列绍夫效应]]），深入操控观众的复杂情感，从而塑造另一个世界。电影技术为观众提供了一种沉浸式方式进入创作者的所塑造的世界。

---


### 计算机与互联网：虚拟世界的创造与演进

计算机和互联网技术的出现为人类开辟了一个全新的数字领域，使我们成为虚拟宇宙的创造者和探索者。这一技术革命不仅改变了信息传播的方式，更重要的是，它为人类提供了一个无限可能的创造空间。

---




数字技术：现代创世纪

计算机、互联网和虚拟现实技术开创了一个全新的数字世界，让我们成为虚拟宇宙的创造者。元宇宙代表了人类对这个数字宇宙的终极愿景，从物理世界转向探索更深层次的形而上学reality。

---


AI的出现进一步推动了这一进程。AI通过学习和分析人类积累的海量数据，不断提升自身能力，为我们创造出更丰富、更智能的虚拟体验。

然而，我们也要警惕技术沉迷的风险。学生们应该平衡现实生活和虚拟世界，不要过度沉浸在数字技术中。

---


这场数字革命延续了人类表达和分享内心世界的传统，同时开辟了探索和创造的新领域。它让我们以前所未有的方式拓展想象力和创造力，共同构建一个跨越现实与虚拟的新世界。


---


### 未来更现实的游戏

英伟达的AI NPC技术，让NPC能够与玩家进行自由对话，并根据玩家的需求给出更贴切的回答和解决方案，打造更真实的互动体验。
育碧展示了AI NPC应用「NEO NPC」，为游戏中的NPC"注入灵魂"，让NPC拥有更丰富的对话内容和更生动的行动逻辑。


---



### 结论

从语言到元宇宙，媒体技术的发展史就是人类不断寻求更好方式来表达、分享和创造内心世界的历程。在数字时代，我们拥有了前所未有的能力来塑造虚拟现实，让集体想象成为可共同居住的世界。这一进程使人类越来越接近"创世者"的角色，让我们能够按照自己的意愿来设计和构建全新的虚拟宇宙。


---



Practices - Assets Store
![|200](https://i.ytimg.com/vi/AzItMI583kY/hqdefault.jpg)
(Source:  [youtube.com: How to Import Assets from Unity Asset Store 2022](https://youtu.be/AzItMI583kY?t=78))



[[Source-Unity 2023 Essential Training]]


---
## 评分体系与标准

1. 成绩登记方式：百分制
2. 评分体系与标准（总计100%）

---

###### A. 平时成绩（50%）

- 出勤率（15%）：全勤15分，每次无故缺席扣2分。
- 课堂参与度（15%）：根据学生在课堂上的表现评分，包括主动回答问题、参与讨论的频率和质量。
- 作业（20%）：每次作业按指定时间递交，根据完成质量给分。

---
#### B. 过程性考核（20%）

考核课程前半部分的理解和展示创作思路包括以下三部分：
  - 课程理论应用 （8分）
  - 课程作品 （6分）
  - 构思展示: 排版,  创新性, 主题相关性. （6分）

---

#### C. 期末考核（30%）

期末作业, 评分标准包括：
  - 选题创新性（10分）
  - 主题背景分析（5分）
  - 用户体验（5分）
  - 最终渲染效果（10分）

---

# Bumper Cubes (Visual Scripting)


使用 Visual Scripting(可视化脚本编程) 创建一个无需编码的简单3D游戏
![bg blur](https://i.imgur.com/AulZlPl.png)


> 该实践最终效果 Video


---
## Reference

[[Source-Make a Game with Visual Scripting]]
实践参考:  How to Make a Game with Visual Scripting (E01) - Getting Started - Unity 2021 Tutorial (Bolt [youtube playlist](https://www.youtube.com/playlist?list=PLrw9uFU6NhfPCiMfDLsL-ccDMCMJ0bMJk)
笔记:  [[UnityScript - (CSharp && Visual Scripting && Bolt)]]


---

## E01 Scene setup(创建场景)

TLDR: 主要实践目标:
1. 设置游戏场景
2. 添加玩家移动功能


---

### 1. Props 设置游戏场景


在层级(Hierarchy) 中创建
-  Cube as`Ground` with cube(Cube); 调整地面的比例(Scale)为 `X` == 15, `Z` == 1000
-  Cube as`Player`(玩家), assign `PlayerMat` in Red;
-  Cube as`Obstacle`(障碍物), `ObstacleMat` in Grey(灰色).
-  Cube as`Destination` (🏁) 

- [[Basic Tips#更改背景]]


---

![bg auto left:50%](https://i.imgur.com/DtjSyhN.webp)


### 2. Player  前进动力(物理引擎)

- ADD Component `Rigidbody` to `Player`;
- ADD Component`Script Machine` Component(组件)
- Create  Visual Script Graph(视觉脚本图表)

---

#### Events 
当游戏对象处于活动状态时，
 - `Start event`  只会触发一次.
- `Update event`  每帧都会触发更新.
- `FixUpdate event`每0.02秒（即50帧每秒）执行一次 与物理系统同步更新

---

在Unity中脚本编写使用的是C#编程语言，而可视化脚本是一种图形化的“语言”，可以让你以图示方式编写指令。例如，这两个脚本实现了相同的功能——它们只是用两种不同的语言编写的。
![bg fit left:50% vertical](https://i.imgur.com/7Oj4mNB.webp)

---




![bg fit left](https://i.imgur.com/sbtqG2g.webp)

---
![bg fit left:50% vertical](https://i.imgur.com/VgLhSXB.webp)
### 为什么使用图形界面
- 让视觉思维的人(艺术生)更容易理解和学习编程概念. 
- 你还能实时看到脚本的运行过程。
- 像思维导图把拼接生命与(世界)的形式。



---

### Visual "language" 的局限


- **表达能力有限：** 表达能力可能不如文本编程语言C或Python [50:33]、[50:40]，在处理复杂算法或大型项目时可能显得力不从心, (例如图形的占用我们的创作空间)。
- **可扩展性不足：** 虽然 Visual language 允许创建自定义模块 [56:52]，[1:10:42]，但这可能无法满足所有编程需求，尤其是在需要使用特定库或外部工具时。例如对底层硬件的控制能力有限

参考 (Source:  [youtube.com: CS50 2021 in HDR - Lecture 0 - Scratch](https://youtu.be/1tnj3UCkuxU?t=121)[youtube playlist](https://www.youtube.com/playlist?list=PLhQjrBD2T383f9scHRNYJkior2VvYjpSL))

参考意义:  Scratch 课程, 关于学习可视化编程语言（如Scratch），以直观的方式掌握基本概念，如循环和函数。降低学习编程的门槛，让概念更易于理解。
![bg fit left:50% vertical](https://i.imgur.com/QiVTAxx.webp)




---



![bg left:50%](https://i.imgur.com/kGCdtSY.webp)

- ADD  `Rigidbody: Add Force (Force, Mode)`( z:10;Mode: Acceleration)
- CONN `FixUpdate`

---

![150|](https://i.imgur.com/9jyMMQr.webp)


---
![bg auto left](https://i.imgur.com/wWjnyT4.webp)
![bg fit vertical](https://i.imgur.com/TgZInUK.webp)


去除因 Friction 造成的滚动, 
- Create  `Physical Material` reName to "NoFriction"`  
- Drag NoFriction  into Player's Box Collision > Material
- Dynamic&&Satatic Friction : 0 
- Friction Combine:  average> Minimum(两个平面之间的平均值作为 Friction)
- Bounce Combine: average > Minimum



---
### 3. Player  前进动力(键盘)

![bg auto left](https://i.imgur.com/4JCANyI.webp)

自定义动力, 取代 ~~物理动力~~:  用 `Rigidbody: Set Velocity`节点取代 ~~`Add Force`~~

BUT, Player 只能按设定的固定速度值(x,y,z) 移动.

---

### 4. Create Controller


- 创建`Vector3`节点组合X、Y、Z轴速度
- 添加 `Input: Axis Name`, Axis Name:  "Horizontal" 获取键盘的水平输入 (Axis Name 可以查看`Edit > Project Setting > Input Manager`)  

![bg auto left](https://i.imgur.com/TL1haZM.webp)


---



![150|](https://i.imgur.com/bDc1Nok.webp)

- 使用`Multiply`节点调整水平移动速度
- 创建变量控制前进和侧向速度



---
### 5. 使用变量控制玩家速度



![150|](https://i.imgur.com/LrCozSc.webp)

用变量替代数值, 好处是在脚本外可以调节或被调用
![150|](https://i.imgur.com/314ONp2.webp)



---


![bg fit left:50% vertical](https://i.imgur.com/x90NnP2.webp)



数据支持程序的操作和传递, 常用的数据类型包括:
- **Integer (整数)** 用于计数或排序，可以表示正负数。
- **Float(浮点数)** 用于测量，可以表示正负数。
- **Boolean(布尔值)** 只有真假两种值，用于表示对象状态或控制脚本流程。
- **String(字符串)** 是可变长度的文本，用于显示消息或动态文本。
- **Enum(枚举)** 是一组预定义值的类型，用于指定单一值。
- **Vector(向量)** 是2、3或4个浮点值的组合，用于表示位置、速度等。



---

![150|](https://i.imgur.com/JomtSEU.webp)


---



在Unity中，变量的范围（Scope）包括以下几种：

1. **Graph**：图形脚本变量，仅在这个的图形脚本有效。
2. **Object**：对象变量，属于特定的 GameObject。
3. **Scene**：场景(关卡)变量，可以在同一场景(关卡)中共享。
4. **App**：应用程序变量，整个应用程序可用。
5. **Saved**：保存变量，这些变量使用 Unity的PlayerPrefs系统，能够在应用程序关闭后持久保存数据


---


Unity中不同范围变量(Scope)的特点和用途:

Graph变量 : 日记本，只有你自己能看到.
Object变量: 课室黑板，只有本班同学看到
Scene变量: 学院的公告栏，本院所有班级可以看到.
App变量: 相当于学校的广播系统，整个学校的师生都能听到
Saved变量: 就像是学校的档案室，N 年之后，你的孩子上这所学校也能看到这个消息


---

> Question: 为什么不用 Add Force?  

`Set Velocity` 更适合控制. 

![bg left:50%](https://i.imgur.com/4aiwJKW.webp)


---



![bg left:50%](https://i.imgur.com/2utOolH.webp)

施加力的物理计算几种方式:

- `AddForce`   适用于需要**持续施加力**的对象，例如火箭；(会考虑阻力等因素)
- `rigidbody.velocity`适用于具有干扰物理引擎的方式定义推动力。 
- `AddRelativeForce`在局部空间添加力 ... 


---
### Camera Follow 设置相机跟随

- 在 package manager(包管理器) `Window > PPackage Manager / Unity Registry > 搜索Cinemachine > Install`, 安装 `Cinemachine` 包. 
- 添加虚拟相机：`Hierarchy > Cinemachine > Virtual Camera` (添加 2d camera(虚拟摄像机) in `hierarchy` )

![bg fit left vertical](https://i.imgur.com/bYeZpcS.webp)

![bg  fit vertical](https://i.imgur.com/0jXc90F.webp)

---


- 调整主摄像机的位置和角度
- 添加虚拟相机并设置跟随目标为玩家 follow: `player`
- (将主摄像机背景改为纯色)

![150|](https://i.imgur.com/DJy7jW7.webp)


\

---


- 使用`Rigidbody: Get Velocity`获取Y轴速度(完整获得重力效果, 包括Drag,  ~~-9.8~~)
![](https://i.imgur.com/YIzsZBe.png)




---

## E02 游戏循环关卡 Level
## Reference

[[Source-Make a Game with Visual Scripting]]


---

![bg fit left:50% vertical](https://i.imgur.com/x90NnP2.webp)

常用数据类型:
- **Integer (整数)** 用于计数或排序，可以表示正负数。
- **Float(浮点数)** 用于测量，可以表示正负数。
- **Boolean(布尔值)** 只有真假两种值，用于表示对象状态或控制脚本流程。
- **String(字符串)** 是可变长度的文本，用于显示消息或动态文本。
- **Enum(枚举)** 是一组预定义值的类型，用于指定单一值。
- **Vector(向量)** 是2、3或4个浮点值的组合，用于表示位置、速度等。




---

![150|](https://i.imgur.com/JomtSEU.webp)


---


15 分钟术语词汇小测
![bg fit left:50% vertical](https://i.imgur.com/COEjLPS.webp)

---
### 1. 添加失败条件

实践目标:
1. 添加失败条件
1. 创建游戏循环
3. 添加胜利条件
4. 实现收集硬币功能

创建伪节点 "Group(组)"
> (Tips) 将现有的移动逻辑分组 `Ctrl + Drag`

![bg fit left:50% vertical](https://i.imgur.com/PqJkXJS.webp)

---
### 人类语言翻译成编程语言

```
"如果 Player 出轨, 游戏重新开始."
```

---


```
如果 Player 越出轨道, 游戏重新开始.
```
或者

```
如果 Player 掉落, 游戏重新开始.
```



---


```
如果
Player 的 Y 轴  
< 0, 

游戏重新开始.
```


---


![bg fit left:50%](https://i.imgur.com/8hulPDh.webp)

#### a) 掉落失败:
- 添加 `if` 判断 Player 的 Y 轴位置
- 使用 `Transform` 组件获取立方体位置
- 用 `Less Than` 单元检查 Y 值是否小于 -1 
- 如果为 True , 重新加载游戏(当前场景)





---

重新加载当前场景
- `Scene Manager / Get Active Scene`, 输出 当前活动的 Scene
- `Scene / name(get)`, 从 scene 对象中获得的名字
- `Scene Manager / Load Scene`, 加载 xxx 名字的 scene
![bg fit left:50% vertical](https://i.imgur.com/KoifuwF.png)
![bg fit left:50%](https://i.imgur.com/68QH1fy.webp)


---

```csharp
// 如果 Player 的 Y 轴  < 0, 
if (transform.position.y < -1) 
{
	// 那么重新加载游戏. 
	ReloadScene();
}
```

---
如果重新加载Scene 后照明不同:

> [[(Tips)Lighting 没有保留, when Reload Scene]]

- 可忽略, 导出游戏没问题. 
- 可以, 创建新光照设置: `Window > Rendering > Lighting`
![bg left:50%](https://i.imgur.com/6Eni0zR.webp)


---
#### b) 碰撞障碍物失败:

```
如果 player 碰到障碍物, 就重启游戏
```



---

```
碰到"障碍物"
```


> Player 在游戏过程都碰到什么? 
- 使用 `On Collision Enter` 函数
- 结果: `Floor` 和 `Obstacle`
![bg fit left:50% vertical](https://i.imgur.com/IUtKulD.webp)


<!-- Console 查找解决问题的线索  -->

---

识别 Obstacle 
![bg fit left:50% vertical](https://i.imgur.com/BEUMPd1.webp)

![bg fit left:50% vertical](https://i.imgur.com/d8dQwMN.webp)



---
![bg fit left:50% vertical](https://i.imgur.com/PQBrnzq.webp)
怎么办?
Obstacle  
Obstacle (1)  
Obstacle (2)
Obstacle (3)
Obstacle (4)

---
🤯🤯🤯🤯🤯🤯🤯

![bg fit left:50% vertical](https://i.imgur.com/GJ6MeEG.webp)







---

- 为 Obstacle(障碍物) 添加 "enemy"(敌人) 身份标签. 
- 使用 `Compare Tag` 检查碰撞对象是否为 "enemy" 身份标签的 GameObject 
- IF True(如果是), 重新加载场景

![bg fit left:50% vertical](https://i.imgur.com/6lCYTK6.png)
![bg fit left:50% vertical](https://i.imgur.com/dElDhoG.webp)





---


## Reference

[[Source-Make a Game with Visual Scripting]]


#####  Debug - 用户体验
 加 2-3 秒Delay(缓冲时间)
2. 可以添加动画过渡效果, 控制游戏节奏
1. 重新挑战的准备时间
3. 消除用户挫折感


---

```
如果挑战失败, 等待 2 秒, 重新开始游戏
```

- IF True(如果是), 添加 `Timer` 单元延迟2秒, ....

---

### Timer 节点

**输入端口**
- Start：开始计时器
- Pause：暂停计时器
- Resume：恢复已暂停的计时器
- Toggle：切换计时器的运行/暂停状态
- Duration：计时器持续时间(秒)
- Unscaled：是否使用不受时间缩放影响的时间

**输出端口**
- Started：计时器开始时触发
- Tick：每帧更新时触发
- Completed：计时结束时触发
- Elapsed：已经过的时间/ Remaining：剩余时间
- Elapsed %：完成百分比(0-1) / Remaining %：剩余百分比(0-1)

![bg fit left:30% vertical](https://i.imgur.com/gFAIedv.webp)


---

#### Issue - 陷入避免死循环 (重复的缓冲叠加)

**Issue:**  `Player` 可能会连续碰到多个 `Obstacle` , 反复触发失败条件(延迟 2 秒) ... 

**Solution:**  失败条件只触发一次.


---

```
如果挑战失败, (触发一次) , 等待 2 秒, 重新开始游戏
```

- 使用 `Control > Once` 节点, 确保只触发一次
 

![bg fit left:50% vertical](https://i.imgur.com/DnmfUX6.png)


---


### Once 节点

**Input 端口**
- 触发箭头：触发节点执行
- Reset：重置节点状态，允许再次执行

**output端口**
- Once：首次触发时执行一次
- After：首次触发后的所有后续触发都从这里输出

![bg fit left:50% vertical](https://i.imgur.com/OT2JPsf.webp)

---



### Player 如何与 Obstacle 相撞后, 停止运动? 

**方法1:** 终止驱动力, 以及后面的运算

用 `Toggle`, 终止 `Set Velocity` 的**Flow(流)** 

![bg  left:65% vertical](https://i.imgur.com/TEXOrix.webp)


---


### Toggle(Flow)节点

输入端口：

- 输入触发器(顶部箭头)：激活节点的主要触发输入
- On(Off)：当需要将状态设置为开启(关闭)时触发
- Toggle：切换当前状态(开→关 或 关→开)时触发

输出端口：

- On(Off)：当状态变为开启(关闭)时触发此输出
- Turned On(Off)：仅在状态从关(开)变为开时触发
- Is On：布尔值输出，表示当前是否处于开启状态



![bg left:35% vertical](https://i.imgur.com/a9Aklzm.webp)

---

参数设置：

- Start On：如果勾选，则节点初始状态为开启；否则为关闭

这个节点主要用于控制游戏中的开关状态，比如：

- 控制灯光的开关
- 切换游戏功能的启用/禁用
- 控制UI元素的显示/隐藏
- 管理游戏系统的激活状态
![bg left:35% vertical](https://i.imgur.com/a9Aklzm.webp)

---


#### 回顾 - 什么是Flow? 

- 触发箭头, 处理事件响应链
- 电池之间串联(并发)各功能模块, 一个节点执行完毕后，会通过Flow端口触发下一个节点
- 指导游戏逻辑的执行顺序, 实现条件分支和循环
- 管理游戏状态转换

---

Flow 类似推动生命的形式运行的能量.
Flow 类似 给"抽象素材", 引导, 串联拼凑成形式.(思维导图)


![bg fit left:50% vertical](https://i.imgur.com/VgLhSXB.webp)

---


**方法2:**  将推动速度 `Velocity`  设置为 0,  
将 `forwardSpeed` (Object Variable对象变量 ) 设置为 0.


![bg fit left:50% vertical](https://i.imgur.com/8XyOG3F.webp)

---
![bg fit](https://i.imgur.com/9ZE28u1.webp)

---
### 2. 添加胜利条件

(挑战)
```
如果, Player 碰到 Destination(终点) , 通往本关(暂时)
```

---

- 将 `Destination(终点)` 对象, tag(标记)为 "finish".
- Player 中添加碰撞检测
- 触发重启本关(后续会改为加载下一关)
![bg fit left:50% vertical](https://i.imgur.com/6duE5jh.webp)

---
### 答案 1


![bg fit left:85% vertical](https://i.imgur.com/qF9ttQm.webp)

---

### 答案 2

![bg fit left:50% vertical](https://i.imgur.com/89hPjeE.webp)



---


## Reference

[[Source-Make a Game with Visual Scripting]]

---


## E03 UI设计基础 - UI 和 关卡 Levels

在这一部分,我们将添加 UI 和 Levels 关卡系统。我们将
- 创建开始场景和UI界面
- 设计多个游戏关卡, 实现关卡之间的转换
- 完善计分系统, 添加一个显示收集硬币数量的UI元素。


(Source:  [aliyun.com: E03_How to Make a Game with Visual Scripting - UI & LEVELS - Unity 2021 Tutorial (Bolt)](https://tingwu.aliyun.com/doc/transcripts/dej8nbxwy6a4qpog))

---


#### 1. 创建开始场景
- 在 Scenes 文件夹创建 Start 场景

---


####  2. 添加UI背景图片
![fit left:50% vertical](https://i.imgur.com/WqlJAsA.webp)
- 选择 `Hierarchy > UI > Image`
- 在 Game 视图中调整
- 使用 Stretch 选项铺满窗口


---


#### 3. 设置Start UI文字


![ fit left:60% vertical](https://i.imgur.com/U6yJqOx.webp)

-  添加UI文本: `Hierarchy > UI > Text`
- 设置尺寸: w800, h100
- size: 80
- Align: 居中

---

导入自定义字体
- 创建 Fonts 文件夹
- 导入 Roboto 字体
- 应用字体设置


推后 [[Unity Fonts(TMP) 中文字体]]

---

#### 4. UI 自适应缩放设置
1. 选择 Canvas 组件
2. 更改 UI Scale Mode 为 Scale with Screen Size
3. 选择 Height 作为参考
![bg fit left:50% vertical](https://i.imgur.com/wKt6FuM.webp)

---


### 场景管理系统


实现点击开始界面跳转到第一关卡

---


1. 设置开始场景的UI
   - 选择并重命名背景图片`Image`为 `UI background`
   - 添加组件 Script Machine
   - 选择 Embedded 选项
   - 打开  Graph

![bg fit left:50% vertical](https://i.imgur.com/wukrpDX.webp)

---


2. 配置鼠标输入响应, 添加点击事件触发场景加载
   - 添加 On Mouse Input 单元
   - 添加 Scene Manager Load Scene 单元
   - 设置 Scene Build Index 为 1
![bg fit left:50% vertical](https://i.imgur.com/apuwVA6.webp)

---


3. 场景文件管理, 设置构建索引顺序
   - 进入 Assets > Scenes 文件夹
   - 将原场景重命名为 Level 1

![bg fit left:50% vertical](https://i.imgur.com/qY0ddMk.webp)


---


4. 构建设置配置
   - 打开 `File > Build Settings`
   - 添加场景到构建列表：
     * Start Scene (Build Index 0)
     * Level 1 (Build Index 1)
![bg fit left:50% vertical](https://i.imgur.com/TXOxwSb.webp)

---



关键技术点：
- Script Machine 组件
- On Mouse Input 单元
- Scene Manager Load Scene 功能
- Build Settings 场景管理
- Scene Build Index 索引系统


---


## 关卡管理
TLDR: 创建多个游戏关卡，使用 Prefabs(预制体)管理重复元素，实现关卡进度系统。


---

### Prefab 管理
- 为游戏对象创建预制体
- 配置预制体属性和行为
- Prefab 使用 Graph(图形化编辑器)管理逻辑, 不用 Embed.

---

在 Script Machine 中编辑器类型选择方式:
### Embed vs Graph
Embed 适用于:
- 简单一次性的场景特定逻辑
- 仅在单个 GameObject 内使用的功能
- 快速原型开发和测试
- 简单的交互行为实现

Graph 适用于:
- Prefab 中需要的可重用逻辑
- 多个对象间共享的复杂功能
- 需要长期维护的系统
- 独立资源形式的模块化功能


---

### 4. 为各个关卡创建 Prefab
1. 创建 Prefab 文件夹
2. 制作以下预制体:
   - **金币 (Coin)**
   - 障碍物 (Obstacle)
   - 终点线 (Finish Line)
   - 玩家 (Player)
   - 地面 (Ground)
   - 关卡基础 (Level Base)

![bg fit left:50% vertical](https://i.imgur.com/D2JbUav.webp)

---

### 5. 设计递进难度的关卡
1. 复制 Level 1 创建更多关卡
2. 使用正交视图设置障碍物和金币位置
4. 调整难度递增

![bg fit left:50% vertical](https://i.imgur.com/UuiHkxp.webp)


---
别忘了
![bg fit left:50% vertical](https://i.imgur.com/bEL4nsj.webp)

---

挑战: 

```
如果赢了, 进入下一关.

```

---

![bg fit left:50% vertical](https://i.imgur.com/kPlMTc6.webp)
`Set Kinematic` ?????
该 GameObject(对象) 受动画(关键帧)控制移动而非物理引擎作用.

---


### Player 停止活动  方法 3 
Player 设置为 "is Kinematic" 
(不用手动勾选, 该图只是示意)
![bg fit left:50% vertical](https://i.imgur.com/OfMpesK.webp)

- 最简单方法停止 Rigidbody (刚体)运动, 只需一行代码
- 可随时切回 Dynamic 模式恢复物理效果

---


### 6. 创建 END 场景转换
1. 设置 END 场景加载逻辑
1. 配置 Build Settings, 添加所有场景到构建列表

![bg fit left:50% vertical](https://i.imgur.com/RsuJAvr.webp)
![bg fit left:50% vertical](https://i.imgur.com/l8jaLLY.webp)


---


## UI 计分系统
1. 在关卡基础预制体中添加计分UI
2. 设置计分显示位置和样式
3. 实现金币计数更新逻辑


---


### 1 修改 Level Base 预制体设置
- `>`进入预制体编辑模式
![bg fit left:50% vertical](https://i.imgur.com/6uK6wn9.webp)


---


### 2. Set Canvas 'Scale With Screen Size'
- 将 UI Scale Mode 设置为 Scale With Screen Size，使用Height(高度)模式
![bg fit left:50% vertical](https://i.imgur.com/EyQYG3x.webp)

---


### 3. Coin's UI
- 添加 `UI > Image` 组件并选择默认图标 `knob`
- 将图像颜色改为黄色
- 将图像定位到左上角，尺寸设为 50x50

![bg fit left:50% vertical](https://i.imgur.com/mNW18TK.webp)


---


### 4. Text's UI
- 在 Image 内添加 UI > Text 组件
- es. 设置文本左对齐，Position X 设为 140
- es. 高度设为 60，并居中
- es. 字体大小设为 30, 字体为 Robot Light


![bg fit left:50% vertical](https://i.imgur.com/em8HZuP.webp)

---

### 5. Text 's counter logic 计数逻辑
- 为 Text 添加 Script Machine 组件
- 切换到 Embedded 模式并添加图表
- 使用 Set Text 节点
- 在 Start 和 Update 中设置文本
- 从 Saved Variables 中获取金币数量
- 使用 Integer to String 单元转换数值


![bg fit left:50% vertical](https://i.imgur.com/rLEQc1s.webp)

---

创建 END 场景

---


别忘了

- 将 End Scene 添加到 Build Settings

![bg fit left:50% vertical](https://i.imgur.com/Su2EEMk.webp)

---


## 优化场景 Lighting 设置


---

- 添加场景雾效
  - 打开 `Window > Rendering > Lighting`
  - 在 Environment 中启用 Fog
  - 将雾色设置为背景色
  - 调整雾密度

![bg fit left:50% vertical](https://i.imgur.com/MxwoadY.webp)

---

- 在所有关卡中同步雾效设置


![bg fit left:50% vertical](https://i.imgur.com/MxwoadY.webp)




---

5 构建游戏
- 打开 Build Settings
- 选择 Windows 平台
- 创建 Builds 文件夹
- 点击 Build and Run

![bg fit left:50% vertical](https://i.imgur.com/LG3StBC.webp)


---



## 思考

如何在不同的Level  中设置不同 Player 的 Forward Speed ??

![bg fit left:50% vertical](https://i.imgur.com/uqu8JWO.webp)


---


## Reference

[[Source-Make a Game with Visual Scripting]]

---




## E04 过场动画

创建关卡完成时的过场动画效果


---


## 1 创建  UI Complete
1. 在 level base 中重用现有 Canvas
2. 重命名为 UI coin
3. 添加新的 UI image 组件作为关卡完成界面

![bg fit left:50% vertical](https://i.imgur.com/7tgSaKe.webp)


---

1. 添加文本组件
- 输入 level complete 文字
- 选择 Robot Bold 字体
- 设置高度为 100，宽度为 800
- 字体大小设为 80
- 居中对齐

---

## 2. 创建过度动画

1. 打开 Animation 窗口
2. 创建新动画，命名为 es. level complete animation

![bg fit left:50% vertical](https://i.imgur.com/P7bKADy.webp)

---



设置动画
   - Background.es ：
     * 起始时设置 alpha 为 0
     * 1秒后设置 alpha 为最大值
   - Text.es. ：
     * 起始时设置透明度为 0
     * 在背景出现后显示

![bg fit left:50% vertical](https://i.imgur.com/H95jPjd.webp)



---


## 3. 触发 'complete' UI 关卡切换动画


通过 `Active` UI 切换显示

![bg fit left:50% vertical](https://i.imgur.com/KOPYh7b.webp)


---


### 在 level base (Prefab)中添加变量 供 Player 访问
   - 进入 Level Base 对象
   - 在 `Game Object Variables` 中添加新变量 level complete
   - 连接到相应的界面元素
   -   将变量类型设为 Game Object
   - 连接 level complete 对象到该变量
![bg fit left:50% vertical](https://i.imgur.com/pUAfsIa.webp)
![bg fit left:50% vertical](https://i.imgur.com/n8Pn2kG.webp)

 
 
---



### 配置 Player 对象逻辑
   - 打开 Player 对象
   - 使用 `Game Object Find By Name` 节点查找 Level Base
   - 使用 `Get Object Variable` 节点获取 level complete 变量
   - 添加 `Game Object Set Active` 节点并设置为 true
   - 连接 level complete 对象作为激活目标

![bg fit left:50% vertical](https://i.imgur.com/XESTgRx.webp)

(Source:  [youtube.com: How to FIND the CHILD of a GameObject THROUGH SCRIPT in Unity - GetChild function](https://youtu.be/O_TtOLdbnL4?t=92)[youtube playlist](https://www.youtube.com/watch?v=qcI3tFmZ7sU&list=PLkYLdQEQ__ti94UUicgYPWPy3VEypFj98))


---

  设置场景切换延时
   - 添加 Timer 节点
   - 设置延时时间为 3 秒
   - 连接 Load Next Scene 节点到 Timer 完成事件


![bg fit left:50% vertical](https://i.imgur.com/9srqvUp.webp)




---


4. 调整动画设置
   - 在 Assets 中找到动画文件
   - **关闭 Loop Time 选项**
   - 确保动画只播放一次

![bg fit left:50% vertical](https://i.imgur.com/Hspwn80.webp)



---

## END

## 最终效果
- 完成关卡后显示淡入动画
- 背景先淡入
- 文字随后淡入
- 3 秒后自动进入下一关


---

# Reference

[[Source-Make a Game with Visual Scripting]]



---


# E05 商店系统


![bg fit left:50% vertical](https://i.imgur.com/jQPTIvZ.webp)

在这一部分, 我们将创建一个商店系统, 玩家可以在其中使用收集的硬币购买不同的皮肤。我们还将实现观看奖励视频广告来解锁新皮肤的功能。


主要目标：
1. 创建可购买皮肤的商店界面
2. 实现皮肤购买和保存系统
3. Player 皮肤切换功能


---

## 1. 创建商店Scene(场景) 
- 复制 start scene：`Control + D`
- 重命名为 "Store"
- 打开新场景
![bg fit left:50% vertical](https://i.imgur.com/DFGBKoH.webp)

---


## 2. 设置商店Title(标题)
Canvas/Text 重命名为 'Store'
- 修改顶部Text(文本)为 'Store'
- 调整锚点位置至顶部
- 向下微调位置

![bg fit left:50% vertical](https://i.imgur.com/vx85dqK.webp)


---



## 3. 创建商品列表
- 新建 `GameObject > Empty`(空)  作为`List` Container(列表容器)
- 添加布局组件选择
- 选择 Horizontal Layout 组件

![bg fit left:50% vertical](https://i.imgur.com/iXOp3IZ.webp)


---

### 说明: Layout Component (布局组件)
 * Horizontal Layout：单行布局
  * Vertical Layout：垂直布局
  * **Grid Layout：多行布局**
![bg fit left:50% vertical](https://i.imgur.com/0KXRNrc.webp)



---

## 4. 创建商品项
- 创建 UI Image 对象
- 设置 Color 蓝色皮肤
- 重命名为 'blue,' 或其他
- (阵列3 个作为布局参考,稍后删除)
![bg fit left:50% vertical](https://i.imgur.com/Q1LFubN.webp)

---


## 5. 调整布局设置
- 设置间距为 20
- 选择 Upper Center 对齐方式
- 设置 Rectangular Transform 尺寸为 100x100
- 关闭 Child Force Expand 选项 中的 `Width`
![bg fit left:50% vertical](https://i.imgur.com/u9SjWre.webp)

---


- Anchor(锚点) 居中平铺
(Alt 键 可同时设置位置)
(删除其余三个Blue)
![bg fit left:50% vertical](https://i.imgur.com/qEyd8s6.webp)

---

## 6. 添加价格显示

### 复用 UI Coin 
- 从 level 1 Scene(场景)复用 UI coin 对象
- 粘贴到 coin shop 场景的 UI background 中
- 并内嵌在 Blue 对象容器中.

![bg fit left:50% vertical](https://i.imgur.com/VumYItP.webp)

---


### 修改UI Coin 
- 在 blue 商品中添加价格显示
  * 设置位置为右下角
  * 缩放比例设为 0.7
  * 修改文本显示为 10 coins


![bg fit left:50% vertical](https://i.imgur.com/hivSiki.webp)


---
### Script(Graph) 处理商店系统


* 移除原有的脚本(Start Scene)

![bg fit left:50% vertical](https://i.imgur.com/whYmEfP.webp)




---

商品添加 Graph 脚本

![bg fit left:50% vertical](https://i.imgur.com/exKzJXj.webp)

---

- 暂在Blue商品(GameObject)添加初始变量, 供脚本调用：
  - ID 
  - Color (Color, 任意)
  - Price (float, 1)
  - priceTextObject (GameObject, 拖入Text对象)


---


![bg fit left:50% vertical](https://i.imgur.com/QitaHoa.webp)



---



![](https://i.imgur.com/YfKJksI.webp)



---

### Text's Graph script

1.`on Start Event`, 当游戏开始, 触发以下逻辑...

2.`Set Color `节点设置 Color 
- 使用Get/Set Color节点设置颜色

3.`Set Text(TMP)`节点显示价格
- 通过Get Variable节点获取Prices变量;
- (必须将数值到字符串的转换逻辑)
- Get Variable节点获取Text(GameObject)



---


![](https://i.imgur.com/JXpBv1g.webp)


---


1 初始化商品配置
- 创建其他 Item(商品), 通过复制
- 重命名游戏对象以便管理
![bg fit left:50% vertical](https://i.imgur.com/2GBrEdU.webp)

---

2 为每个商品对象设置唯一 ID

- skin01, ID = `sk1`
- skin02, ID = `sk2`
- skin03, ID = `sk3`
- skin04, ID = `sk4`




---



### ID 让世界井然有序

对象(GameObject)的唯一标识
  - 每个人都有独特的身份证号码
  - 图书馆中每本书都有特定编号
  - 某地的邮政编码

---

```bash
# 互联网世界的应用, 以YouTube视频ID示例:
https://www.youtube.com/watch?
v=5XVvwPYuUCc
&list=PLrw9uFU6NhfPCiMfDLsL-ccDMCMJ0bMJk
&index=5
```

URL中的信息解析
  - **v=** : 视频唯一标识符
  - **list=** : 播放列表标识
  - **index=** : 视频在列表中的位置
  

---

2 设置商品颜色
- 为不同商品配置颜色值

---


3 配置各商品价格：
- skin01,  Price = 0
- skin02,  Price = 10
- skin03,  Price = 20
- skin04,  Price = 25


---

4 测试验证
- 进入播放模式
- 确认每个商品显示正确的颜色
- 验证价格文本正确显示
- 检查所有商品 ID 是否正确关联

![bg fit left:50% vertical](https://i.imgur.com/zepj4nx.webp)



---


## 7. 实现皮肤购买逻辑

### 监听Click Event(点击事件)
- 在图形界面中添加 `On Pointer Click` 事件监听器
![bg fit left:50% vertical](https://i.imgur.com/khsswcw.webp)

---


### 判断购买力

- `If` 单元对比`Saved/Score` 和`Object/Price`(商品价格)
 ( `Saved/Score` 已保存的变量 `Score` )

![bg fit left:50% vertical](https://i.imgur.com/h8QBQSW.webp)


---
### 3. 如果金额足够, 更新购后余额

- 使用 `Set Variable` 更新金币数量 (Score - Price)
![bg fit left:50% vertical](https://i.imgur.com/beJVkPZ.webp)

---

### 4. 在皮肤选择后添加 `Load Scene` 单元
- `Save` 创建颜色变量储存皮肤 `playerSkin`
- 设置类型为 Color
- 加载第一关
![bg fit left:50% vertical](https://i.imgur.com/6wGx2bK.webp)



---

## 6. 用Saved(存档) 的 Color 驱动 Player 的材质

- 进入Player 预制体图形界面
- 添加 `On Start` 事件
- 使用 `Get Material` 获取网格渲染器材质
- 使用 `Set Color` 应用保存的皮肤颜色

![bg fit left:50% vertical](https://i.imgur.com/JLH4pOm.webp)


---

理解 Color 的驱动过程

1. 商店系统的颜色若改变后
2. 存档颜色(保存当前Player的颜色状态)
3. Player 的Material (材质) 改变


---


### 5. Item 记录已购 ID

![bg fit left:50% vertical](https://i.imgur.com/4eHYNEe.webp)


---

### 6. Item 判断已购

![bg fit left:50% vertical](https://i.imgur.com/tOKoc5H.webp)


---



## END

设计商店如何访问.

- 创建按钮访问
- 完成后访问


---

参考 As Level Complete

![](https://i.imgur.com/LO9ZjXa.webp)


---


![](https://i.imgur.com/WNW8lYv.webp)


---


![](https://i.imgur.com/aWFggZI.webp)




---



Next, 理解 List 
- List是有序的集合(es.书柜)
- 可以存储多个相同或不同类型的元素
- 使用索引(从0开始)访问元素

```c#
List<string> mySkins = ['skin1', 'skin2','skin3']
```
![bg fit left:50% vertical](https://i.imgur.com/F0gmyxT.webp)


---


- List是可变的,可以随时添加、删除、修改元素


