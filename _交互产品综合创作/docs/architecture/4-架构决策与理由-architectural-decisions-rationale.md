# **4. 架构决策与理由 (Architectural Decisions & Rationale)**

- **决策一：【重构】采纳以教学逻辑（Epic）为核心的目录结构**
    
    - **理由**: 使物理目录结构与 `prd.md` 中的教学大纲完全对齐，极大地提升了人类和AI对知识库内容的可理解性。同时，通过 `shared_assets` 和 `_IGNORE_DO_NOT_PROCESS` 文件夹，实现了关注点分离和安全隔离。
        
- **决策二：保留 `00_INBOX` 作为强制性的唯一入口**
    
    - **理由**: 为AI的“资源策展”任务提供了一个确定的、有限的扫描范围。这保证了策展流程的高性能和100%的可靠性，避免了全局扫描带来的性能瓶颈和漏处理风险。同时，通过优化的SOP，教师在AI完成策展后仍保有对文件位置的完全控制权。
        
- **决策三：在YAML元数据中增加 `course_name` 属性**
    
    - **理由**: 这是一个关键的**未来适应性 (Future-Proofing)**决策。它确保了当前课程的笔记资产可以在未来被轻松地重用、迁移或与其他课程的知识库集成，而不会发生数据混淆。
        
- **决策四：采用Bases/Dataview导出CSV作为人机接口**
    
    - **理由**: (维持不变) 完美解决了“外部AI无法直接与Obsidian插件交互”的技术壁垒。CSV是通用、稳定、Token高效的数据交换格式。
        
- **决策五：在模板和所有交付物中强制嵌入“Handoff协议”**
    
    - **理由**: (维持不变) 将隐性的工作流步骤显性化、标准化，为教师提供清晰的操作指引。
        
- **决策六：引入Story文档作为核心执行单元**
    
    - **理由**: (维持不变) 将高层的产品需求（PRD）与底层的执行任务解耦，提高了AI代理执行任务的精确性和可靠性。
        
- **决策七：【新增】引入标准化工具链 (Standardized Toolchain)**
	- **理由**: 将重复性的、规则明确的任务（如添加YAML frontmatter）封装为独立的、可执行的脚本工具 (`frontmatter_tool.py`)，是提升自动化流程稳定性的关键。它将AI的工作模式从较为模糊的“理解并执行自然语言指令”转变为精确的“调用拥有清晰输入输出的工具”，极大地降低了任务失败率和结果的不可预测性。