

![|200](https://i.ytimg.com/vi/guycIP56YeY/hqdefault.jpg)
(Source: [youtube.com: Welcome/ (320) Kent Beck On The FIRST Testing Frameworks, TDD, Waterfall & MORE | The Engineering Room Ep. 16 - YouTube](https://youtu.be/guycIP56YeY?t=0)[youtube playlist](https://www.youtube.com/playlist?list=PLwLLcwQlnXByuoAE-jYYg8MSNrzodVtJX))

### 重点整理

在这期视频中，我（Dave Farley）有幸采访了软件界的传奇人物 Kent Beck。我首先介绍了 Kent Beck 对我们行业的深远影响，包括他是 Agile 宣言的签署者之一，并开创了像 Continuous Integration、Test-Driven Development (TDD) 和 Pair Programming 等重要实践。

我们的谈话从 Agile 的现状开始。Kent Beck 有些无奈地指出，尽管 Agile 已经存在多年，但他发现自己仍然在重复30年前的观点，而这些观点在今天却被视为新颖。他甚至观察到，在某些地方（尤其是在 Silicon Valley），那种僵化的、按部就班的 waterfall 思维模式正在卷土重来，尽管实践证明它并不高效。这引出了我们的一个共识：成功的软件开发并非一个可预测的、工厂式的生产过程，而是一个充满不确定性的、持续学习和探索的过程。

我们深入探讨了软件开发作为“学习学科”的本质。我分享了 David Deutsch 在《The Beginning of Infinity》中的观点，将 Agile 的迭代方式比作一种通往无限可能性的开放式探索，与 waterfall 的封闭式计划形成鲜明对比。Kent Beck 对此表示赞同，他强调了在开发中“被揭示的价值”（revealed value）往往远大于“预先预测的价值”（predicted value）。因此，我们的流程应该优化学习和反馈，而不是单纯追求生产效率。

接着，我们聊到了 TDD。Kent 澄清说，他更愿意称自己为 TDD 的“重新发现者”，因为这个想法的种子在他很小的时候就已经种下，甚至可以追溯到上世纪60年代的软件实践，比如 Project Mercury。对我而言，xUnit 框架（如 JUnit）是一个重要的启示，它优雅地展示了如何将测试作为代码的一部分，从而极大地简化了自动化测试的实现。

Kent 也分享了他对 TDD 工作流的最新思考——TCR (test && commit || revert)，这是一种更激进的实践，通过在测试失败时自动回滚代码来激励开发者进行极小步长的开发。

最后，Kent Beck 介绍了他的新书系列计划。第一本书名为《Tidy First?》，它将软件设计视为一种“人际关系的练习”。这个系列的核心观点是：好的软件设计不仅关乎技术（如 coupling 和 cohesion），更关乎人与人之间、人与代码之间的关系。他将设计过程分解为“改变结构”和“改变行为”两种活动，并探讨了何时以及如何进行“整理”（tidying）作为一种对未来自己和同事负责的“自我关怀”行为。整个系列旨在从微观的个人实践，逐步扩展到团队协作，最终探讨技术团队与业务方之间的关系，为如何构建更健康、更高效的软件开发环境提供了深刻的见解。

### 视频逐字稿

[00:00:00] **(开场动画)** [音乐]

[00:08:24] **Dave Farley:** 欢迎来到 The Engineering Room。这是一个每月一次的系列节目，我们会与软件界有影响力的人物进行长篇对话。

[00:15:20] **Dave Farley:** The Engineering Room 系列由 Equal Experts 赞助，我想感谢他们一直以来的支持。所以，如果你在构建出色的软件方面需要帮助，或者有兴趣寻找一个很棒的工作场所，请务必查看描述中的链接。

[00:30:16] **Dave Farley:** 我今天的嘉宾无需任何介绍，尤其是对这个频道的观众而言。但实际上，对于任何从事软件开发的人来说都一样。即使你在过去的25年里没有太关注，并且出于某种难以理解的原因不知道他是谁，你也肯定知道，并且可能被他的思想深刻影响。

[00:51:19] **Dave Farley:** 他是 Agile 开发的奠基人之一，作为那个团体的一员，至少对我来说，他的思想最贴切地代表了工程核心的真谛，即如何真正做好工作，而不仅仅是计划做好工作。

[01:06:21] **Dave Farley:** 但他也向现代世界介绍了像 Continuous Integration、Test-Driven Development (TDD)、Pair Programming 等许多理念。他还谈到了软件开发中至关重要的价值观：简单、反馈、勇气、尊重，以及我至今仍在其中发现新价值的理念——拥抱变化。

[01:26:01] **Dave Farley:** 这个人对我们的行业产生了深远的影响，当然也对我的工作生涯产生了深远影响。请欢迎 Kent Beck。

[01:33:14] **Kent Beck:** 非常感谢你，Dave。很高兴终于能和你谈谈。

[01:38:20] **Dave Farley:** 很高兴。我们的路途之前没有交集，尽管我们多年来都在相似的地方和一些相同的人打交道。我非常高兴地欢迎你来到这里，并感谢你同意今天和我们聊天。我……我对你的很多想法都非常感兴趣，我们可能要谈论的话题太多了。

[01:59:02] **Dave Farley:** 不过，我想从一个地方开始，鉴于我的介绍。你现在对于被介绍为 Agile 开发的奠基人之一有何感想？你显然是其中之一。

[02:22:20] **Kent Beck:** 嗯……实际上，我是 Agile Manifesto 的第一个签名者——按字母顺序排的。我并没有……我并没有太依赖那个身份。我认为那是一个有趣的时间快照，它激发了很多能量。嗯……大部分情况下，据我所见，它已经……我现在又在说我30年前说的同样的话。而人们却把它当作新颖、全新的东西。

[03:04:00] **Kent Beck:** 所以我的一部分会想，嗯……我们难道没有取得任何进展吗？嗯……但另一部分会说，是啊，我们确实取得了一些进展。但真正重要的、没有改变的事情，是围绕软件开发的权力结构。在这些改变之前，像 Test-Driven Development 和 Continuous Integration 这样的东西，都只是权力结构投下的影子。你无法在不改变现实的情况下改变影子。对我来说就是这样。软件开发中仍有如此巨大的潜力尚未实现。然而，正是这些人类问题需要我们取得进展，才能真正做出任何根本性的、持久的改变。

[03:58:20] **Dave Farley:** 是的。对我来说，这似乎是一个有趣的地方……这是我享受软件开发职业生涯的原因之一，因为它似乎是一个相当有深度的职业。软件开发的核心有一些深刻的理念和真理，你知道，处理这种叫做“信息”的短暂物质，这似乎就像，你知道，现代物理学认为这是一个相当深刻和深远的理念。但……

[04:30:03] **Dave Farley:** 我有一段时间的想法是，Agile 运动……我认为它确实产生了积极影响，但我开始更多地把它看作是……你知道，牛顿力学与广义相对论。它是一个很好的近似，是我们需要达到的目标，但它并不是那种……你知道，之后会有更多的事情出现，来完善我们对其中一些事物的看法，但其中仍然有深刻的真理。所以我不会……你知道，我仍然会告诉人们去读 Agile Manifesto，然后说，你知道，如果你想知道 Agile 是什么，看看那个，当你做完所有这些之后，我们再谈，你知道，这……你知道，这似乎是起点。

[05:20:00] **Dave Farley:** 所以我想说，你和你的同事，最初的签署者们，取得的一大积极成果是……

[05:25:21] **Kent Beck:** 那些中年白人男性。

[05:27:14] **Dave Farley:** 是的，是的是的。是的，所有那些在 Bouldern 的中年白人男性。是……但其影响是，你知道，25年前，如果你问任何一个组织，平均而言，除非他们像你我的一样奇怪，你知道，他们会说，“哦，是的，我们在用 waterfall”，但现在他们不这么说了。

[05:47:11] **Kent Beck:** 它回来了，Dave。它回来了。我是说，也许这是个 Silicon Valley 的现象，但我听到聪明的人们一本正经地说，“嗯，你首先要做的是对市场机会进行彻底的调研。”是的。“然后设计部门制作线框图，然后程序员实现它，这就是你构建成功软件的方式。”

[06:16:03] **Kent Beck:** 这根本就不是，没有任何成功的软件是那样构建的。没有任何产生巨大影响的东西是那样的。然而，这正是 waterfall。虽然用了新词，但它就是同样的顺序，同样……而且它不起作用的原因，和它过去不起作用的原因完全一样。然而，这个虚构的故事太吸引人了，以至于人们会回到它那里。

[06:46:17] **Dave Farley:** 是的。我……我当然认为……我当然同意它从未消失。我没有……我没有看到那种复苏。所以我会说，我会这样描述，就是……你知道，大多数组织都只是口头上说在以 Agile 的方式工作，但实际上骨子里还是在做那些和非技术管理层认为事情应该如何运作的方式相符的旧事。这不仅仅是他们……我不是想责怪非技术经理，这也是我们的错。但是……

[07:27:12] **Kent Beck:** 哦，当然。是的，所以我在过去五到十年里看到的变化是，曾经有一段时间，你会因为说一些明显是 waterfall 的话而感到羞愧。而现在人们说这话时，好像他们应该为此感到自豪。

[07:44:02] **Dave Farley:** 好的。嗯，好吧，也许……我还没看到那个，我希望我不会看到。但是……但是，但是当然……当然，你知道……我不认为……我不认为反对 waterfall 的斗争已经消失了，因为……哦不。你知道，那是……我猜当你简单地思考时，它很有诱惑力。如果你能做出所有这些对未来的完美预测，那会很好。只是你做不到。

[08:15:19] **Kent Beck:** 是的。我记得我早期的一个 Extreme Programming 工作坊，有个家伙，双臂交叉，坐在前排，这是在丹麦，一整天都是这样，怀疑，怀疑，怀疑。然后在一天快结束时，就在事情快结束时，他举起了手。我说，“是的，先生？”他说……你知道，我一直在讲拥抱变化。你知道，Extreme Programming 就是拥抱变化。这真的是……这真的是核心。是的。我一直在讲 Extreme Programming 中拥抱变化的所有不同方式，然后……他举起手说，“一开始就做对，不是更容易吗？”

[09:03:00] **Dave Farley:** [笑]

[09:04:18] **Kent Beck:** 我说，“是的，先生，是更容易。”是的。但那只是我的选项之一，所以……我必须适应。但是，当然，如果一开始就做对会更容易。如果你知道“它”是什么，以及你知道如何“正确”地做它，而且目标不会改变，团队也不会……等等等等。有很多很多原因让这是一个荒谬的陈述。是的。然而，是的，如果那样会更容易。

[09:37:21] **Dave Farley:** 那是……那是我……我几年前读过一本书，这本书……我……我……我和朋友以及在这里偶尔提到过。这是一本关于物理学的书。这是 David Deutsch 写的一本关于科学哲学的书，他来自 Oxford。他是一位教授，他基本上发明了……嗯……量子计算的概念，从提出算法的角度来说。所以……像 Feynman 和……其他人做了最初的想法，但是……但是 David Deutsch 是一个……你知道，他是一个才华横溢的人。但他写了一本很棒的书，叫《The Beginning of Infinity》，他在书中谈论科学是由好的解释驱动的，并且是……你知道……有些想法在范围上是无限的。他在书中举的一个例子是象形文字和字母文字的区别。如果你……你知道，象形文字很好，只要你和我都认识某个词的符号，然后如果我用一个你没见过的符号，或者你说一个我不知道符号的词，那就不好用了。而字母文字是，我们试图模仿声音，所以我们可以写下一个我们从未见过的词……你可能会拼错，我们可能会拼错，但我们可以写下一个我们从未见过的词，你可以说出一个你从未听过的词，诸如此类。所以他说，你知道，这是其中的一个想法。对我来说，Agility 相对于 waterfall 的一个重大进步是，它是通往无限的一步。如果我在项目的第一天开始，我对客户真正想要什么毫无头绪，这是事实，而且接下来该做什么也毫无头绪，这通常也是事实，你知道，我将努力去发现这些东西，去探索和学习。这是一种开放式的工作方式。而如果我开始一个 waterfall 项目，最终，如果我要从一个计划开始，我基本上在某种程度上被我的大脑范围，被我能想出的那个狭窄版本的完美的组织背景所限制，就像你那位丹麦学生所说的那样。

[11:49:18] **Kent Beck:** 是的，我喜欢这个想法，因为……我认为这……

[11:51:24] **Dave Farley:** 是的，我喜欢这个想法。

[12:02:18] **Kent Beck:** 当然，你已经拥有的价值和你将要发现的价值之间的平衡，会改变发现新事物的价值。如果你已经知道几乎所有事情，而且不会有任何新东西出现，那么就去吧，好好思考。没关系。我只是从来没有遇到过那种情况，所以我只能假设我不知道的东西比我知道的更广阔，价值也大得多。是的。如果我围绕这个原则来组织开发，那么任何看起来像是清晰易懂的模型，都必然是错的。是的。因为它关注的是我已经知道的东西。

[12:54:24] **Dave Farley:** 是的。是的。

[12:57:04] **Kent Beck:** 但那也很不舒服，对吧？因为这就像……你要发现什么？我……

[13:04:10] **Dave Farley:** 这似乎是……但这……我……我……我不……我……我……对我来说，其中一件事，我……我……我一直在为那些和我交谈的人做一些研究，看看……你知道，他们一直在谈论和写的东西我还没有跟上。当我为你做这些研究时，它让我明白，我这么长时间以来一直很喜欢你的作品的原因之一，不可避免地是它和我自己的世界观非常契合。我是个……你知道，我是个人，这是我们倾向于喜欢的事情之一。但是……但我认为其中一件事，我想……用我的话来表达我们俩可能都非常坚信的一点是，将软件开发组织成一个渐进的学习过程。我们……我们会去……你知道，不断地寻找更好的答案，并基于我们所知的进行构建，然后试着弄清楚我们所知的是对是错，然后再基于我们学到的东西继续前进。这似乎深深地融入了你思考和谈论事情的方式。

[14:11:13] **Kent Beck:** 是的，我很快就学会了，如果我专注于学习，而不是专注于……当我还是个孩子的时候，“软件工厂”这个比喻……好吧，这就是我们要解决软件问题的方式，我们将有一个软件工厂。所有东西都清晰易懂，有阶段，有可预测的输入、可预测的过程和可预测的输出。如果我只是把这当成一门大学课程，我不知道我会学到什么，因为如果我知道我要学什么，那我就不是在学习了。是的。如果我只是把它当作一门“课程”而不是一个“工厂”，我庆祝我学到的东西，当然，我们也会产出一些可运行的软件，因为如果我们不让软件运行起来，我们就没有反馈来真正学习。是的。所以，是的，当然会有一些功能出来，一些结构出来，但是如果我们设置事情来最大化学习而不是生产，产生的价值就会大大增加。

[15:31:05] **Dave Farley:** 是的，完全正确。而那……那……那是我最近写的关于我认为软件工程是什么的书中的一个观点，你知道……学习是绝对的基石，你知道，我们作为专业人士，你知道，我们应该优化自己，以便在学习上做得非常出色。我……你知道，我……我……我想说……这正是你多年前在《Extreme Programming Explained》中谈到的核心思想之一，你知道，Test-Driven Development、Continuous Integration、Pair Programming 等等，在我看来，这些都深深地植根于我们发现……快速学习、在很短的时间内发现事物的能力，然后我们可以……你知道，对我们发现的东西做出反应。

[16:23:17] **Kent Beck:** 嗯……说到 Test-Driven Development，在你个人的网站上，你……你……你……你说你是 Test-Driven Development 的“重新发现者”。我想很多人会认为你是……你知道，Test-Driven Development 是你的发明，或者是你团队在 C3 的发明，至少是这样。

[16:44:19] **Kent Beck:** 哦，不，它比 C3 早了相当一段时间。所以那个肯定是我的。所以，我之所以说“重新发现者”，是因为当我开始谈论 Test-Driven Development 时，会有一些老程序员，我现在老了，所以我可以用“老”这个词，他们会走过来对我说，“嗯，你当然要这样工作。”是的。如果你不知道输出应该是什么，你根本就不应该编程。我们过去一直都是这么做的。对我来说，这个想法的起源，想法的萌芽，是我还是个孩子时读过的一本书。我父亲是个程序员，他会带回关于编程的书。我会着迷地读这些书。我是那种 Silicon Valley 的孩子。其中一本书说，编程的方法是，你有输入磁带，你知道输出磁带应该是什么样子。所以你输入输出磁带，然后一直编程，直到得到你想要的输出磁带。所以那个种子在我九、十岁的时候就已经种下了。

[17:54:19] **Kent Beck:** 然后，我写了第一个 xUnit 风格的测试框架，不知怎么地，我把这两个想法结合了起来。所以这个想法已经存在很长时间了。然后当我开始谈论 TDD，给它起了个名字，并更多地谈论它时，人们会说，“哦，好吧，Project Mercury”，Mercury 太空飞船的软件，就是完全按照那种方式写的。我们不会编程，直到我们有预期的输出。是的。当然不会。然后我们会编程，直到实际输出与预期相符，然后我们就可以进行下一步。你永远不会在改变预期输出之前改变程序，这样你就知道你什么时候完成了。你当然会那样工作。所以，是的，就像……它以某种方式来到了我这里，而且……人们在 TDD 中使用的粒度要小得多，比那些早期的时候。但那个工作流程，那种工件的倒置，先写测试，再写代码，那是60年代的智慧。

[19:19:14] **Dave Farley:** 是的。那……那是……那是……那是我从你那里学到的 Test-Driven Development 的想法。我……我……在我读那本 Extreme Programming 的书之前，我就在做自动化测试和一种版本的 Continuous Integration。但是对我来说，其中一个启示实际上是 xUnit。我第一次看到……我当时在做 Java，我看到 JUnit，我想，“啊，我明白了。”因为我们仍然在试图构建太大、太复杂的测试。当我看到 Junit 的时候，我想，“哦，是的，当然。”你知道，那要优雅、简单得多。

[20:51:24] **Kent Beck:** 是的，那个……那个产生了巨大影响的决定是，用你正在测试的语言的源代码来表示测试。是的。在此之前，我见过很多测试工具，它们总是有某种脚本语言，我……当我……我大概已经构建了四、五次某种测试框架，是的。在我用 Smalltalk 写第一个 SUnit 之前。那个想法，就是让我在源代码中表示测试，它……它不……Junit 中的一个测试类，它看起来像 Java。是的。你看到 Junit 测试，它看起来像 Java，但语义完全不同。是的。你永远不会先调用这个函数，再调用那个函数，再调用那个函数。它……它在语法上是一样的，但在语义上完全不同。这取决于你的测试运行器如何拆解它，确保 setup 被调用，确保 teardown 被调用，无论如何……然后……按顺序执行，为每个测试构建一个新的实例，等等。所以，它……它看起来像 Java，但实际上不是 Java。但那一个决定意味着，它对程序员来说更容易上手，实现起来几乎是免费的。是的。而不像实现一个单独的脚本语言。而且……很多处理源代码的工具也可以处理你的测试，而不需要任何额外的东西。所以，但当时这是个新事物，用你正在测试的语言的源代码来表示测试。一旦我……你知道，我做……你做了上百次这样的决定，百分之九十九的时候它们都是糟糕的决定，因为你当时根本不知道的原因。但这是那百分之一的决定，真正产生了巨大的影响。

[23:17:15] **Dave Farley:** 是的，是的。是的，我完全同意。而那……那是我……我看到那个之后，我立刻就想，“当然，那太棒了！那……那完全是它应该有的样子。”而我……你知道，我当时在做的那个项目……我们……我们……我们确实做了很多自动化测试，但我们在一个更高的层次上做，而且正如我说的，它很丑，太复杂了，等等。当我们看到那个之后，我们直接扔掉了它，开始做真正的 Test-Driven Development，并且犯了人们在学习 TDD 时会犯的所有错误。但这很棒。那是……

[23:52:13] **Kent Beck:** 你试过 TCR 吗？

[23:55:01] **Dave Farley:** 我没有。我在你的视频里看过你做，在你的频道上。然后……

[24:01:21] **Kent Beck:** 链接会出现在这里。

[24:02:19] **Dave Farley:** 是的。是的是的，我们肯定会放上。

[24:06:16] **Dave Farley:** 这是一个有趣的想法，对我来说也很有道理。我……我……我有点像那样工作。我……我……我几乎是手动做那个版本，就是如果测试失败了，你就重新开始。但是，是的，非常酷。

[24:22:15] **Kent Beck:** 所以，对于那些还没接触过的人来说，这是 TDD 工作流程的一种变体，或者说替代品。TDD 工作流程是这种倒置，先写测试，再写通过测试的代码。

[24:37:04] **Kent Beck:** 所以，在 TCR 中，你写代码和写测试的时间没有那么严格的规定，但是，如果测试通不过，你就会恢复到上次所有测试都通过的版本。这产生了一种强烈的激励，让你以极小的步骤工作。你会想，好吧，这有四……哦，天哪，你第一次做的时候，你写了五行代码，然后想，好吧，这应该没问题了。“噗”的一声，它就消失了。你就会想，“什么？”你就会想，“不，不，不，不。我知道那是对的。”于是你又写了同样的五行代码，“噗”，它又消失了。最后你意识到，“哦……好吧。好吧，所以我要写五行代码。如果我写这行代码，它会给我一些反馈。如果那不行，那我肯定走错路了。然后我再写这两行……”所以，关于你做任务的顺序，思考就开始运转了，这通常……我们通常认为这是理所当然的。我有一大堆事情要做，我必须一次性把它们都塞进嘴里，“噗”，然后……但事实从来都不是这样，总是有方法可以一口一口地吃。但 TCR 是一种……我不会说“强迫”，而是“激励”你小口吃的方式。你仍然可以一次写五行代码，如果你想看它们消失，然后再试一次。嗯……它并没有以同样的方式流行起来。嗯……但这没关系。我已经习惯了想法需要一些时间来酝酿，所以……

[26:23:08] **Dave Farley:** 是的。是的。它……它……它是个好主意，绝对是个好主意。我……我……我……我唯一怀疑的一点是，它把“测试先行”变成了可选的。我……我……我是在开玩笑，因为有时实际上是这样的。但大多数情况下……你知道，我最看重的一件事是，它能给我设计上的反馈，通过那种由外向内的方式，你知道，通过写测试来设计。所以……那……那是其中之一……我完全沉迷于那个。

[27:04:22] **Kent Beck:** 哦，太棒了。是的。嗯……人们……所以让我烦恼的一件事是，当人们……人们说，“嗯，Test-Driven Development 不是一种测试技术。”见鬼，它当然是。当然是。它名字里就有。它在你创建的工件里。那些是测试。它们会通过或失败。哦，有人……有人说我们不应该谈论测试通过或失败，我们应该谈论系统通过或失败。我不知道。我得想想那个。好吧，所以它是一种测试技术，但它也是一种设计技术，因为它给你关于……逻辑设计的快速反馈，你正在做的 API 设计。它是一种规范技术，当然，因为你必须以一种否则你不会的方式写下你的假设。但它也是……对程序员来说就像 Xanax 一样。它是一种减轻焦虑的技术，这对我来说是最重要的。你知道，它的副作用比所有你能摄入的化学物质都少，为了达到同样的效果。它是一种团队合作技术，一种协作技术。当然，它是所有这些东西的集合。所以，如果你不想用它……很好。我……我会有人走过来对我说，“嗯，好吧，我其实不做 TDD。”我想，我为什么要关心？我不是你的牧师。嗯……你不想做，没关系，别做。

[28:40:08] **Dave Farley:** 你每写一个测试也拿不到一美元。

[28:42:07] **Kent Beck:** 我……我还没发现怎么收那笔钱。我肯定希望我发现了。就是这样了。嗯……是的，如果我……如果我有的话，我可能就不会有现在这样继续下去的动力了。所以，我猜这是一种福气。

[29:00:23] **Kent Beck:** 嗯……

[29:03:07] **Dave Farley:** 是的。

[29:04:18] **Kent Beck:** 你无论是否以测试驱动的方式工作，都必须解决所有这些问题。是的。你必须解决测试问题，系统的行为验证问题。你必须解决设计问题。你必须解决文档问题。你必须解决协作问题。你还必须处理你的焦虑。所有这些问题，无论你是否先测试，都将存在。是的。所以，你如何处理它们，很好，或者你处理到什么程度，这取决于你。但是，TDD 是一种……在一个吸引子的意义上，那是……你得走很远的路，才能找到更好的方式来处理所有这些问题。

[29:54:02] **Dave Farley:** 我读过的一些你最近至少从我的角度来看写的文章里……我不知道你最初是什么时候写的，但是……嗯……是分离行为和结果的想法，我认为 Test-Driven Development 帮助你做到这一点。

[30:16:04] **Kent Beck:** 我漏听了一个词，分离什么和结果？

[30:19:04] **Dave Farley:** 行为和结果。所以你……所以……所以写测试是关于行为的，然后重构和……等等是关于……是关于……是关于完善结果的。我们……我们……这对我来说似乎是在玩弄这个规范的想法，这个测试即规范的想法，这……这……你知道……我认为这是一个重要的想法，需要传达给人们，以防止他们……你知道，其中一个常见的困难是，用过度耦合的测试将所有东西焊接在一起，等等。但是……我真的很喜欢那个见解，因为……我认为那是一个……那样一个强大的……在思考……你知道，当我们写……当我们先写测试时，到底发生了什么？我们试图断言我们的系统或我们的代码，无论我们在评估哪个层面，都在提供我们感兴趣的一些行为。然后，你知道，那应该给我们自由，去分别地……你知道，玩弄和处理不同种类的结构，我们可以改变它来满足那个需求。

[31:27:09] **Dave Farley:** 我刚才说“结果”的时候，是不是应该说“结构”？我……我想说的是结构。

[31:31:05] **Kent Beck:** 是的，好的。现在这句话就有意义了。是的，行为和结构，这是我现在非常强调的一个区别。是的。我正在写一系列软件设计书籍的第一本，第一本叫《Tidy First?》。嗯……描述中有链接，对吧？这不是 YouTuber 该说的话吗？

[31:51:19] **Dave Farley:** 是的，这是 YouTuber 该说的话。

[31:53:14] **Kent Beck:** 哦，哇。我正在学习。所以我正在写这本书，有点……不，不是有点，是公开写的。所以付费订阅者会在章节完成后看到它们。直到我写这本书的时候，我才……我总是谈论“两顶帽子”。你知道，你要么在重构，要么在改变系统的行为。但是，直到我写这本书，结构和行为之间的区别才在我的脑海中变得更清晰。现在我建议人们……如果你必须使用 pull request 代码审查模型，这是一个完全不同的话题，关于它有多愚蠢。嗯……

[32:38:09] **Dave Farley:** 我有一些不错的视频，说的完全一样。

[32:52:13] **Kent Beck:** 好的，好的，好的。嗯……直到我……如果你要用那种模型，那么 pull request 中只能有结构性改变，或者行为性改变，永远不能两者都有。

[33:09:05] **Kent Beck:** 现在，我更倾向于像 TCR 那样的东西，代码每时每刻都是可部署的，所以代码每时每刻都被部署。嗯……但那是另一个话题了。

[33:26:07] **Dave Farley:** 是的。而……而……而……你可以……你可以根据不同的情况，调整到不同的程度，来获得不同种类的价值。但我认为，那个……那个……那个……你早些时候说的那件事，对我来说似乎是如此核心、如此中心，对于所有……所有我读过的你的东西，听你谈论的东西……是这个以小步快跑的方式处理这个过程的想法。所以，你知道，步子越小越好。我……我……我看过你的一个会议演讲，你在……你在谈论早期……思考以小步快跑的工作方式。你说，“哦，你知道，如果我们能把它做到每个月都能创造一些东西，那就太棒了。你知道，如果我们在一个月内完成所有设计，然后……然后如果我们能在几周内完成，然后如果我们能在一周内完成，然后如果我们能每天都做……”然后你把那个时间缩短。在每个阶段，你的设计都变得更简单。在每个阶段，都更容易理解。在每个阶段，你都能对真正发生的事情有更深入的了解。

[34:38:06] **Kent Beck:** 所有的开发都是渐进的。是的。如果你有1000个开发者在一个系统上工作，而你每年只发布一次，你知道，回到那个糟糕的旧时代。是的。它仍然是渐进的。如果你有那种上帝视角，能看到所有这些活动，每时每刻都有一行代码被写完。你知道，如果你有足够精细的时间戳，你可以把一年内一千个人写的所有代码都线性化。只是反馈不是渐进的。是的。

[35:18:14] **Kent Beck:** 所以问题是，你希望反馈周期和变化周期有多接近？排队论表明，你的感知循环和你的控制循环应该大小差不多。是的。所以，如果你每10秒钟改变一次代码，如果你每10秒钟就有一行新代码，那么每10秒钟得到一次反馈将是理想的。那……那是你能得到的最好的。是的。嗯……是的，出于很多原因，人们抵制这个。但是……嗯……就我而言，我们还没到那一步。我把这个叫做 limbo。因为 limbo 歌曲问，“你能降多低？”是的。所以这是……我们能把部署周期缩短到多快？是的。而且……嗯……我想我们还有很长的路要走。这是另一个可能超前20年的想法，但……没关系。你知道，如果人们想……如果人们想尝试这个，他们今天就可以尝试。

[36:31:01] **Dave Farley:** 是的。而……你知道，从我的角度来看……你知道，我谈论的那些东西……你知道，像为了持续交付、持续部署而组织，这样你就可以一直实践到生产环境中，然后你就可以一直关注着。就像你说的，一切都开始变得更简单，因为那个批次大小，那个变化的大小在减少，因为每个变化都变得更简单、更容易理解、更容易测试、更容易隔离。你在控制变量。如果我做这个改变，你做那个改变，我们怎么知道是哪个改变增加了客户注册？我们怎么知道？如果我们一次发布一个，我们就能知道。你知道，就是……一切都变得更简单了，当我们那样做的时候。我……我猜，不会变得更简单的事情，人们面临的挑战，我猜……你知道，从我读到的你的网站上关于你的新书……书系列的文章来看，是……是……不会对很多人变得更简单的东西是这个渐进式设计的想法。这对我来说似乎很自然，随着时间的推移。我……我……你谈论它的方式，似乎很自然。嗯……你认为这是一个本质上困难的事情，还是你认为这是一个……你知道，我们学习东西的方式错了，所以……所以换个方式很难，或者……或者只是因为你和我都很奇怪？

[37:54:15] **Kent Beck:** 那肯定是事实。我只是不确定这是否与这个话题相关。

[38:00:10] **Dave Farley:** [笑]

[38:00:23] **Kent Beck:** 我把这个叫做“萨拉米切片”问题。

[38:04:13] **Dave Farley:** 是的。

[38:05:05] **Kent Beck:** 是的。所以……所以这个故事里包含了所有……据我所知，所有的软件产品开发。你有……你有两个变量。切片有多薄，以及你按什么顺序吃它们。我把这个叫做“继承”问题。所以，回到你的问题，这是否是一个难题？部分原因我想说，这有时是一个极其困难的问题，去找出那个能最大化反馈、最大化学习的顺序。是的。那可能是一个巨大的挑战。嗯……而让事情更糟的是，我们根本不讨论它。我记得有一次看高速公路桥梁被替换，我每天都要开的那条高速路。所以他们……他们实际上在同一时间替换两座相隔5公里的桥梁，而且顺序完全不同，因为它们的位置……在一个例子中，他们建了一座临时桥梁，大概在两座桥之间，然后他们替换了其中一座，然后他们替换了另一座，然后他们拆掉了临时桥梁。但在另一个例子中，他们的空间更受限，所以他们不得不让两条……让双向车流都走一座桥，你知道，缩减到单车道。是的。然后他们替换另一座桥，然后再把车流移到……所以，有人必须考虑这个问题。这些都跟材料强度无关，都跟桥的形状无关，但有人必须非常仔细地考虑这个继承问题。我们要做哪些活动的顺序是什么，才能达到我们想要的目标？

[40:05:14] **Kent Beck:** 我认为……我认为软件的难点之一是我们根本不讨论那个继承问题。我们没有……我们没有像我们给结构描述那样，给予它同等的重视。所以我们会讨论设计模式，这里有一种反复出现的微观结构，它解决了一些反复出现的问题。但我们不讨论继承。我们不说，好吧，你有五行代码要写，而你认为唯一的办法就是写第1、2、3、4、5行。我四个手指却说了五行代码，抱歉。所有强迫症患者都要抓狂了，抱歉。嗯……所以……但那不一定是……不一定是你能写这几行代码的唯一顺序。因为也许你可以写第四行，然后给它一个常量，然后检查一下，确保你得到的答案和你以前的一样，然后……你拥有 n! 种方式来写 n 行代码。是的。而我们除了一个序列之外，几乎没有探索过。所以，我想……如果我们……如果我们把这个变成一个讨论的话题，如果我们开始更多地关注……哦，你知道，这里有一种很酷的方式，你可以先写这个再写那个。你可能会想……但实际上不是。我想我们会学到很多。在探索那 n! 个序列的空间中，可以释放出巨大的价值。但是，是的，目前我们还没那么做。所以我想这是一个非常困难的问题。对我来说，这更有趣。

[42:02:18] **Dave Farley:** 是的。

[42:04:19] **Kent Beck:** 我想这就是……这就是软件产品开发……

[42:11:00] **Dave Farley:** 这就是我们之前讨论的，这是一个学习的学科，你知道，我们需要探索的工具来探索和玩弄想法，然后找出我们现在在哪里，以及我们要去哪里，在任何给定的点上。

[42:15:00] **Kent Beck:** 是的，我认为是那个……是那个……当我……当我在教或指导一个“熟练工”程序员，一个……你知道，一个能让程序以某种方式运行，但可能只有一条路可走的人。是的。重新实现是一种非常强大的技术，因为这显然是浪费时间。是的。程序就在那里，而且它能用。谁在乎呢？是的。我们不是在问我们是否能做到。我们知道我们能让一个程序以某种方式运行。没什么大不了的。让我们打开……让我们打开我们可以从这里到那里的各种方式的空间，有些会更好，有些会更差。但是，有意识地塑造程序的展开，而不是仅仅有意识地塑造程序本身，这给了你更多的选择，来决定你能做什么。

[43:17:10] **Dave Farley:** 是的，是的。是的，我完全同意。而我……我……我最近在我的书中关于软件工程的一个观点是，你知道……学习是绝对的基石……

[43:17:15] **Dave Farley:** 是的， valuing 我们创造的结构和……你知道，那些……我们正在软件中构建的形状，真的，你知道，那些……嗯……我……我……我……我另一个部分的……我的工程理念是，你知道，我们学科的另一部分是管理复杂性，我们通过像 cohesion、coupling、abstraction、separation of concerns、模块化等工具来实现这一点，这些在我看来，构成了你新书很大一部分的核心，谈论那种层面的想法等等。但是……你知道，几乎……当……我是个软件人。如果……如果……如果你给我解释一个问题，我立刻就会在脑子里想象解决方案，而且我总是太不好意思了，我不会跟任何人提，因为它们一开始都太尴尬了。你知道，有一种质量，我们会应用到我们的设计、我们的解决方案中，我们珍视它，它让我们能……你知道，也许让这个渐进的过程更进一步，就像我们一直在谈论的那样。我……我……我公开说过一段时间的一件事是，我开始认为，你知道，软件质量的根本衡量标准是我们改变它的能力。你知道，其他一切都次于这一点。你知道，如果……你知道，你……当然，你希望它安全、快速等等，但如果你不能改变它，你就得不到这些东西。所以，优化以让我们能够改变它，是……你知道，是基本要求。我会偏好那些能够保持我改变它的能力的设计。我不是说过度设计，我只是说……

[48:57:04] **Kent Beck:** 是的，是的，是的。好的，好的。你……你……你……你知道我的想法了。

[49:01:21] **Dave Farley:** 我知道的。我……我……我绝对不是在说为未来设计，我是在为现在设计，但我要留一扇门。你知道，如果我的代码里有一个缝隙，我正在和数据库对话，我不想知道数据库的细节。我只想和它对话，我会写一点代码和数据库对话。那将是我现在需要的最低限度的代码，解决我眼前的问题。但我只是想在其中有一些形状，我更喜欢那些能让我继续改变它、继续测试它、继续做那些事的结构，随着我前进。

[49:35:05] **Kent Beck:** 是的。同样，这取决于我们在权衡中处于什么位置，我们知道价值在哪里，和我们不知道价值在哪里。如果……如果预测的价值是大部分价值，而我们将要学到的东西很少，那么，当然，你可以大块地做事情，因为你……你反正也学不到什么。但是，情况从来都不是这样。这个权衡，揭示的价值总是……有时甚至比预测的价值大好几个数量级。是的。如果……如果你陷入那种情况，而你又想抓住机会，那你完全是在……你知道，我们要如何发现并利用这些我们从未预料到的新价值来源？

[50:42:05] **Dave Farley:** 是的。是的。所以……所以……所以我们有点……我们有点走进了……对我来说，这更像是你新书系列的领域。你能告诉我们一点关于它们的内容，以及你……你的计划是什么吗？我很期待读它们，而且我……你知道，我会成为一个订阅者，这样我就可以开始读第一本了。

[51:03:22] **Kent Beck:** 哦，谢谢你。嗯……所以，2005年，我和 Ed Yourdon 以及 Larry Constantine 在一个座谈会上，庆祝《Structured Design》这本书出版25周年。那本书引入了 coupling 和 cohesion 的概念。这些概念是根据 IBM 的程序凭经验得出的，其中一些程序容易改变或改变成本低，而另一些则非常昂贵。所以，coupling 和 cohesion 是对所有相对容易改变的程序中共同点的观察。嗯……所以，我大学时那本书是教科书，所以当然我没读过。所以在准备那个座谈会时，我开始读它，我又一次……第一次……我完全被震撼了。这是软件开发的牛顿运动定律。是的。但我们第一次没抓住重点。所以，我给自己设定了任务，为现代读者重写这些材料。所以，没有关于纸带和汇编语言与高级语言的描述，以及诸如此类的东西。2005年是很久以前了，但是……我需要一些时间。嗯……所以，我大概四年前才真正开始。我……我……我有大概一万字我喜欢的内容。嗯……然后大概一年前，我……我……我知道我需要激励来仅仅是写作。因为让我写东西耗时很长的不是我写的时候有多慢，而是我多常根本不动笔。是的。所以，我需要一些激励，于是我开始了一个付费的 Substack，这样我就欠某人价值7美元的某种写作，定期地。令我惊讶的是，这对我非常有效。嗯……所以，我坐下来写这些书，我从指尖流出的第一句话是，“软件设计是一种人际关系的练习。”我当时就想，“什么？那是什么意思？我……我……我完全……我完全不知道我那么说的意思。”所以这个过程就是我发现我那句话意思的过程。但是，我越深入，就越意识到，是的，软件设计是一种人际关系的练习。我们用“关系”这个词来谈论我们设计中的元素，以及 coupling 和 cohesion，但实际上，好设计和坏设计的区别，更多地与参与其中的“人”之间的关系有关，而不是这个系统调用那个系统，或者什么尾部延迟，等等等等。因为，如果人际关系健康，我们就能解决所有技术问题。如果人际关系不正常，这就是 Conway's Law 最黑暗的含义：如果关系病态，软件就病态。

[54:51:19] **Dave Farley:** 嗯……

[54:52:19] **Dave Farley:** 这听起来你写作的方式和我一样。

[54:56:04] **Kent Beck:** 当然，这就是我写作的原因。

[54:58:16] **Dave Farley:** 脑力倾泻，然后你想，“我那句话到底是什么意思？”

[55:03:04] **Kent Beck:** 哦，是的，当然。这就是我写作的原因。嗯……

[55:07:08] **Dave Farley:** 但是，我……我……我正在想……在你描述那个的时候，我……我……我……我……我……这可能是我的原创，但我在我的书中经常谈论的一个想法是，软件不是关于与计算机沟通，而是关于与人沟通。所以，你知道，你写作是为了能够……你知道，如果我们是与计算机沟通，我们现在还在翻动面板上的开关。你知道，所以我们写作是为了能够与他人沟通。我正在想，你刚才说的是否……是否包含了所有这些，或者更多。我想是更多。所以，你知道，另一个部分……我最近比较沉迷的一个想法是 Team Topologies 那帮人的东西，他们谈论……你知道，社会技术设计，来促进小团体中合理的软件开发。嗯……然后，所有这些东西都起了作用，但正如你所说，它们是深刻地人性化的，它们是深刻地与我们的能力相关的，因为是“我们”在做这件事。软件不是……

[56:22:20] **Kent Beck:** 是的，我讨厌那样。

[56:24:06] **Dave Farley:** 是我们做的。我……我……我……我……我不确定，但……你知道，你向我们介绍的、最被低估的想法之一是 Pair Programming。至少对我来说是这样。而且……你知道，一个使用 Pair Programming 工作的团队的乐趣之一是，你多么了解你的同事，无论你喜欢他们与否，你都更了解他们，他们也更了解你，你们的协作更有效，你们的工作也做得更好。你知道，Lennon 和 McCartney 写出伟大的歌曲是因为他们一起工作。你知道，那不是……那不是个人的努力。他们两个单独都不如他们在一起时那么好。所以，我认为人类是创造性的，我认为软件是深度创造性的东西，你知道，这是关于……试图促进人们互动、互相学习、一起做有趣的事情。所以，听起来……听起来是个很好的起点。

[57:22:12] **Kent Beck:** 所以……所以这是序列。我不知道你是否有过这样的经历：当我开始写一本书时，我总是觉得没有足够的篇幅来写一本书。然后我开始写，发现篇幅是足够的十倍，所以我要删减。然后我删减了，又觉得篇幅根本不够写一本书。然后我开始写，然后……三、四次这样的迭代之后，我终于有了一本书的篇幅和内容。所以，这次是这样运作的：我开始想解决一个挑战，就是向那些不会编程的人提供功能。这是关于权力差异的。程序员，我称之为“改变者”，那些能改变代码的人，在关系中拥有一种权力，而那些希望程序改变其行为，但无法自己做到的人……我称他们为“等待者”。所以我们有等待者和改变者。那是一种……那是一种充满摩擦的关系。那是……商业与技术，那是一种充满摩擦的关系，有很多不好的历史，很多积怨，很多不同的视角。这是我最终想要解决的关系。但是，当我开始深入研究时，我意识到我有很多基础工作要做。所以第一本书叫《Tidy First?》。技术上，它是关于……你是一个程序员，你看到一些代码，你需要改变它的行为，但它很乱。你会“先整理”吗？答案是有时是，有时不是。而你为什么可能想要先整理，之后再整理，或者让它慢慢发酵之后再整理……我可以把软件设计的所有原则，一点一点地拉进来：coupling、cohesion、权力分布、金钱的时间价值与期权性……我可以把这些东西拉进来，来阐明这个问题，这个问题是每个程序员每天都要问自己十几次的。那就是技术层面。但关系层面是，你和你自己的关系是怎样的？程序员通常有这种自虐倾向，就像……哦，这代码糟透了，我讨厌改它，但……我就是要去做。这很痛苦，很混乱，让我很焦虑，你也学不到什么新东西。但你就是硬着头皮上，因为你是程序员。那是一种和你自己不正常的关系。所以，整理，在这个意义上，是微观层面的软件设计，整理是一种自我关怀的行为。是的。我值得。我必须改这段代码。它会……它会很吓人，很混乱，很痛苦，很昂贵地去改变。所以，我会在改变代码之前解决这个问题。这就是结构和行为之间的区别。这里我们谈论的是，让我在改变行为之前改变结构。有时你会这样做，有时你会反过来。但这是真的……关于……你值得吗？我想答案通常是，是的，你值得。这是否意味着你可以一直整理，而不改变行为？是的。那……那是……在最高层次上，这种等待者-改变者的关系，这不适用于……我会先处理那个。但对于这第一本书，《Tidy First?》，这真的关于你和你自己的关系，以及你是否有让事情变得更容易改变的习惯，随着你在微观层面上的工作。现在，我认为从那会产生很多更大的主题。是的。我认为那会让你成为一个更好的伙伴，与那些也必须改变这段代码的其他人。我认为那会让你成为一个更好的伙伴，与那些不能改变代码但需要系统改变的人。是的。但首先，我们得先和自己处好关系。

[1:02:24:19] **Dave Farley:** 是的。不，那太棒了。那……那太棒了。你……你知道第二和第三卷的主题是什么吗？还是那也要探索……

[1:02:37:04] **Kent Beck:** 我……我知道，也就是说它们很可能会变。但……是的，第二卷是关于……是关于技术人员之间的关系的。是的。所以，你调用我提供的 API，而我想改变它。我们有一个关系问题。我们不仅仅有一个软件设计问题，从……你知道，“参数的顺序是什么，它们的类型是什么”的意义上。我们有一个关系问题。因为我想改变它，但这会给你带来价值吗？你知道，它多快能给你带来价值？我给你造成了多少痛苦？如果我想改变它，我需要为这个改变的后果负责。这是……这……我认为这是……这是对这个问题不寻常的观点。这让我最近，大概是上周，开始思考责任，这个原则在关系中为什么如此重要。

[1:03:45:04] **Dave Farley:** 是的。是的，是的。

[1:03:47:04] **Kent Beck:** 所以，第二本书是关于这种技术人员之间的关系。然后，三部曲的第三本书将是关于等待者和改变者之间的关系。是的。在那里，“商业”根本不在乎软件设计，或者他们认为他们不在乎。但是他们确实在乎，因为如果你不设计……你知道，如果你不在软件的结构上投资，他们会非常不高兴。所以，他们在乎软件设计，但是……你如何……你如何利用软件设计来增强那种关系？你又如何利用商业和技术之间的健康关系来增强软件设计？这就是我最终想要达到的目标。但首先，我们得先和自己处好关系。

[1:04:33:04] **Dave Farley:** 是的，是的。是的，这……这很吸引人。我读过的那些……那些公开的……所以我推荐大家去看看……看看 Kent 正在进行中的工作，然后订阅第一本书。但是，我目前读到的内容……像往常一样，从你的作品中，有很多想法冒出来，让我思考，让我更深入地思考。所以……谢谢你把它公开。我……我真的很期待第一本书。

[1:05:06:04] **Kent Beck:** 嗯，我很高兴你觉得有帮助。

[1:05:08:02] **Dave Farley:** 不，太棒了。嗯……我们可能……我们可能应该开始……开始收尾了。在我们结束之前，还有什么我们应该谈论的，你有什么想提的吗？

[1:05:24:12] **Dave Farley:** 如果没有也没关系。

[1:05:25:22] **Kent Beck:** 现在没有特别想到的。嗯……你知道，我总是有……我有一个主题列表。这些是我写完之前想写的书。是的。嗯……当然，当你写了一本，它又会催生出三本新的。所以……

[1:05:41:20] **Dave Farley:** 是的。我……我发现我需要在两本书之间休息一下。我正准备开始写另一本，但是……

[1:05:51:00] **Kent Beck:** 我已经15年没写书了，所以……所以再次投入其中很有趣。

[1:05:56:09] **Dave Farley:** 这很辛苦，但也是一件很美好的事。我……我……你提到的那件事，就是你探索自己想法的方式，然后从自己思考问题的方式中获得新的见解，那是一件美好的事。

[16:10:02] **Dave Farley:** 好的。

[16:11:15] **Kent Beck:** 是的。所以……

[16:12:02] **Dave Farley:** 是的。

[16:16:12] **Kent Beck:** 不，我……我不……我是说，试试看。这是……这是……这就像……这就是魔法，就是……那些知道很多的人，学到了很多。而那些学到很多的人，只是尝试了很多东西。是的。即使你不知道你会从中得到什么，工作本身会教给你你准备好的课程。

[16:42:04] **Dave Farley:** 是的。是的。

[16:43:21] **Kent Beck:** 所以，我……我没有比这更好的总结了。今天没有。

[16:48:19] **Dave Farley:** 是的，那是个很不错的总结。

[16:51:04] **Dave Farley:** 嗯……

[16:54:10] **Kent Beck:** 嗯，Dave，和你聊天很愉快。

[16:56:06] **Dave Farley:** 这绝对是一种乐趣。而且……我……我……我关注你的作品很多很多年了，我只想借此机会感谢你所做的贡献，因为这是一个非常重大的贡献。我……我知道你和所有看这个视频的人都知道。

[17:14:14] **Dave Farley:** 所以，无论如何，非常感谢大家的观看。如果你喜欢今天的节目，请点击订阅和喜欢。嗯……我们会把 Kent 提到的东西的链接放在下面。务必跟进，我强烈建议你们去看看他关于设计的文章，因为我……我认为这很重要。我认为这会帮助我们以不同的方式思考问题，也许能让我们再向前迈进一步。所以，谢谢大家，再见。

[17:42:15] **(片尾动画)** [音乐]

