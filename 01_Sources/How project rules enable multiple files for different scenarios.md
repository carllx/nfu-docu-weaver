
[[Vibe Coding]]

#VibeCoding/cursorrules


![|200](https://i.ytimg.com/vi/QXOZfIUOnQM/hqdefault.jpg)
(Source: [youtube.com: 4..How project rules enable multiple files for different scenarios./ (228) How to Customize Cursor Rules for Maximum AI Coding Accuracy - YouTube](https://youtu.be/QXOZfIUOnQM?t=82))


### 重点整理 (第一人称)

大家好，今天我想和大家分享 Cursor IDE 的一个颠覆性新功能：**项目规则 (Project Rules)**。

**1. 过去的问题：**.cursorrules 文件

- 之前，我们可以使用一个名为 `.cursorrules` 的文件来为 AI 提供项目级的指导，比如告诉它使用 `bun` 而不是 `npm`。
- 但这个方法有两个主要问题：
    - **单一文件限制**：所有规则都挤在一个文件里，当项目变大、规则变多时，文件会变得非常臃肿，不仅难以管理，还会大量消耗宝贵的 AI 上下文（context）。
    - **缺乏灵活性**：我无法指定规则的应用场景。比如，我没办法让一套规则只在处理测试文件时生效，而在处理源代码时不生效。

**2. 解决方案：全新的 `.cursor/rules` 目录**

- Cursor 推出的新功能完美解决了这些问题。现在，我不再使用单一的 `.cursorrules` 文件，而是在项目根目录下创建一个 `.cursor/rules` 文件夹。
- 我可以在这个文件夹里创建**多个规则文件**，每个文件对应一个特定的场景。
- 每个规则文件的格式都非常强大，它包含两个关键部分：
    - **YAML 前置信息**：在文件开头，我可以用 YAML 定义 `description` (描述) 和 `globs` (文件匹配模式)。描述能帮助 AI 理解这条规则的用途，而 `globs` 则精确地告诉 AI 这条规则应该在处理哪些文件或路径时才被激活。
    - **规则内容**：文件的其余部分就是具体的指导内容，就像以前一样。

**3. 实践案例：与 Convex 结合**

- 为了展示这个功能的强大，我以 `Convex` 为例。Convex 团队已经为 Cursor 用户准备好了优化的规则文件。
- 我只需要将这个规则文件（一个 `.mdc` 文件）下载下来，放到我项目中的 `.cursor/rules` 目录下。
- 神奇的事情发生了：当我在 Composer 中输入一个与 `Convex` 相关的任务时，Cursor 的 AI 能够自动识别，并只加载与 `Convex` 相关的那个规则文件。它会在界面上明确告诉我：“我正在使用 `anthropic_convex_rules` 这条规则。”

**4. 总结**

- 这个新功能的美妙之处在于它的**模块化和智能化**。
- 我可以为不同的技术栈（如 `Convex`）、不同的文件类型（如 `.ts` vs `.test.ts`）创建独立的规则文件。
- AI 会根据当前的操作上下文，智能地选择并加载最相关的规则，这不仅大大提高了 AI 生成代码的准确性和质量，还极大地节约了上下文空间。

如果你想了解更多关于如何通过 Evals (评估) 和类似 TDD 的流程来创建这些高质量规则，我强烈推荐你观看我提到的另一支影片。谢谢大家！

### 简体中文逐字稿

**00:00 讲者:** 你是否曾因为 AI 不理解你的项目设置，而生成了完全错误的代码？

**00:04 讲者:** 嗯，Cursor 刚刚发布了一个绝对的宝藏级新功能，它能显著提升 AI 代理在生成代码时的效率，

**00:12 讲者:** 特别是对于新的库或 API。

**00:16 讲者:** 在我开始之前，你可能已经知道 Cursor 是什么了，因为你点击了这个视频。

**00:20 讲者:** 但如果不知道，我简单说一下，它是一款基于 VS Code 的 IDE，增加了一大堆 AI 驱动的功能，

**00:27 讲者:** 能够真正加速软件开发过程。

**00:30 讲者:** 你可能不知道的是 .cursorrules 这个功能，它已经推出了一段时间了。

**00:35 讲者:** 如果你创建一个文件，然后把它放到项目根目录，Cursor 会在每次生成代码时自动读取这个文件，

**00:41 讲者:** 无论是通过聊天、Composer 还是 Tab。这意味着你可以把你希望 AI 了解的项目特定上下文放进去。

**00:49 讲者:** 例如，“请使用 bun 作为包管理器，而不是 npm”。

**00:53 讲者:** 这个规则之后会包含在每一个提示中，而无需你手动将其包含在上下文中。

**00:59 讲者:** 这个功能虽然很棒，但 Cursor 团队刚刚发布的功能要比这好上十倍。

**1:03 讲者:** 但在我讲到那之前，我得先谈谈 .cursorrules 的问题。

**1:08 讲者:** 首先，因为它是一个单一文件，处理起来会变得很棘手，因为你不可避免地会往里面堆积越来越多的东西，

**1:15 讲者:** 最终会耗尽你所有的上下文。

**1:17 讲者:** 这会导致你搞不清楚模型是否正在使用这些规则。

**1:21 讲者:** 其次，因为没有办法指定在什么情况下使用这些规则，

**1:26 讲者:** 所以不可能让一些规则在某些情况下包含，而在另一些情况下不包含。

**1:31 讲者:** 好的，所以这些确实是问题，但幸运的是，Cursor 团队正在解决它们。

**1:36 讲者:** 他们最近发布了项目规则（Project Rules）功能，它通过允许你编写多个文件来解决这些问题，

**1:43 讲者:** 每个场景一个文件。

**1:45 讲者:** 为了展示我的意思，我们来看看 Convex 全新的规则文件。

**1:49 讲者:** 顺便说一句，我把这个文件的链接放在了下面的描述中。

**1:52 讲者:** 如果我们在文本编辑器中打开它，我们可以看到开头有一些 YAML，

**1:56 讲者:** 其中包含了描述和一系列 glob 模式。

**1:59 讲者:** 这个 YAML 前置信息至关重要，因为它能帮助 AI 在运行你的提示时，决定是否将你的规则包含在上下文中。

**2:06 讲者:** 如果你希望你的规则只应用于特定的路径或文件类型，你可以在这个 glob 列表中指定。

**2:12 讲者:** 文件的其余部分就是规则本身。

**2:15 讲者:** 所以在这个案例中，我们有一堆由 Convex 团队精心提炼的指南，

**2:19 讲者:** 以确保模型确切地知道如何生成最高质量的 Convex 代码。

**2:24 讲者:** 如果我们回到 Cursor，我们有两种方法可以将这个规则文件放入我们的项目中。

**2:28 讲者:** 第一种方法，我们可以打开设置，然后导航到“通用”选项卡，

**2:32 讲者:** 向下滚动到“项目规则”部分，然后点击“添加新规则”按钮。

**2:37 讲者:** 然后我们可以填写描述、glob 模式和我们的实际规则。

**2:41 讲者:** 但这似乎有点太费事了，所以为什么不直接用我们已经为你准备好的规则文件，

**2:45 讲者:** 然后把它放到你的 .cursor/rules 目录里呢？

**2:49 讲者:** 现在，神奇的时刻来了。

**2:51 讲者:** 只需开始在 Composer 中输入你的提示，你会注意到 AI 自动拉取了规则文件，

**2:57 讲者:** 当我们想要处理 Convex 相关的功能时。

**3:00 讲者:** 漂亮。

**3:02 讲者:** 所以这个系统的美妙之处在于，我们可以为不同的场景指定不同的文件。

**3:07 讲者:** 例如，如果我们想为普通的 TypeScript 代码和测试用的 TypeScript 代码设置不同的样式规则，

**3:14 讲者:** 我们完全可以做到这一点，而且不会在这个过程中用完我们所有的上下文空间。

**3:18 讲者:** 好了，今天我就讲到这里。

**3:20 讲者:** 如果你想深入了解 Evals 是什么，以及 Convex 是如何通过类似 TDD 的严谨流程来开发规则文件的，

**3:27 讲者:** 你应该现在就去看看这个视频。

**3:30 讲者:** 那么，下次再见！感谢观看。

**3:33 讲者:** 再会。

---

