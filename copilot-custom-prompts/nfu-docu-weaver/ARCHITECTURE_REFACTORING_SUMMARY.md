# æ¶æ„é‡æ„å®Œæˆæ€»ç»“ - v2.0

**æ—¥æœŸ**: 2025-10-05  
**ç‰ˆæœ¬**: v2.0.0  
**çŠ¶æ€**: âœ… å®Œæˆ  
**è´Ÿè´£äºº**: @architect.mdc, @po.mdc

---

## ğŸ¯ é‡æ„ç›®æ ‡

è§£å†³é¡¹ç›®ä¸­ Schemaã€Template å’Œ Data æ–‡ä»¶çš„æ··ä¹±çŠ¶å†µï¼Œå®ç°æ¸…æ™°çš„æ¶æ„åˆ†å±‚ã€‚

---

## âœ… å®Œæˆçš„å·¥ä½œ

### Phase 1: æ¸…ç†å†—ä½™ç»“æ„ âœ…
- âŒ åˆ é™¤ `courses/course-*/templates/` ç›®å½•
- âŒ åˆ é™¤ `courses/.course-template/templates/` ç›®å½•
- âœ… ç®€åŒ–ç›®å½•ç»“æ„ï¼Œæ¶ˆé™¤æ··ä¹±

### Phase 2: åˆ›å»º course_schema.yml âœ…
- âœ… æ–°å»º `schemas/course_schema.yml`
- âœ… å®šä¹‰è¯¾ç¨‹å…ƒæ•°æ®çš„å®Œæ•´ç»“æ„
- âœ… åŒ…å« `config` é…ç½®èŠ‚ï¼ˆSchema/Template/Data è·¯å¾„ï¼‰
- âœ… è¯¦ç»†çš„æ³¨é‡Šå’Œä½¿ç”¨è¯´æ˜

### Phase 3: æ›´æ–°æ¨¡æ¿æ–‡ä»¶ âœ…
- âœ… å‡çº§ `.course-template/course.yml` åˆ° v2.0 æ ¼å¼
- âœ… æ·»åŠ  `config` é…ç½®èŠ‚
- âœ… æ˜ç¡® Schema å’Œ Template å¼•ç”¨è·¯å¾„
- âœ… æ›´æ–°ç‰ˆæœ¬å·åˆ° "2.0"

### Phase 4: è¿ç§»ç°æœ‰è¯¾ç¨‹ âœ…
- âœ… æ›´æ–° `course-001-å­—ä½“è®¾è®¡åŸºç¡€/course.yml` åˆ° v2.0
- âœ… æ·»åŠ å®Œæ•´çš„è¯¾ç¨‹æè¿°å’Œèµ„æºé…ç½®
- âœ… ä¿æŒæ•°æ®å®Œæ•´æ€§

### Phase 5: æ›´æ–°å·¥å…·è„šæœ¬ âœ…
- âœ… ä¿®æ”¹ `course_manager.py` æ”¯æŒ v2.0 æ ¼å¼
- âœ… æ›´æ–°æ–‡æ¡£å­—ç¬¦ä¸²è¯´æ˜æ–°æ¶æ„
- âœ… ç¡®ä¿æ–°åˆ›å»ºçš„è¯¾ç¨‹ä½¿ç”¨ v2.0 æ ¼å¼

### Phase 6: æ–‡æ¡£æ›´æ–° âœ…
- âœ… åˆ›å»º ADR-001 æ¶æ„å†³ç­–è®°å½•
- âœ… æ›´æ–° `.course-template/README.md`
- âœ… æ›´æ–° `schemas/README.md`
- âœ… åˆ›å»ºæœ¬æ€»ç»“æ–‡æ¡£

---

## ğŸ—ï¸ æ–°æ¶æ„æ¦‚è§ˆ

### æ¸…æ™°çš„ä¸‰å±‚åˆ†ç¦»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ç¬¬ 1 å±‚: é¡¹ç›®çº§èµ„æº (å…¨å±€å…±äº«)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  ğŸ“ /schemas/          â† Schema å®šä¹‰ (æ•°æ®å¥‘çº¦)         â”‚
â”‚     â”œâ”€â”€ course_schema.yml    â† è¯¾ç¨‹å…ƒæ•°æ® Schema (NEW) â”‚
â”‚     â”œâ”€â”€ lesson_schema.yml    â† æ•™æ¡ˆæ•°æ® Schema         â”‚
â”‚     â”œâ”€â”€ cover_schema.yml     â† é¦–é¡µæ•°æ® Schema         â”‚
â”‚     â””â”€â”€ outline_schema.yml   â† å¤§çº²æ•°æ® Schema         â”‚
â”‚                                                          â”‚
â”‚  ğŸ“ /templates/        â† Word æ¨¡æ¿ (æ ¼å¼å®šä¹‰)           â”‚
â”‚     â”œâ”€â”€ lesson/lesson.docx   â† æ•™æ¡ˆæ¨¡æ¿               â”‚
â”‚     â”œâ”€â”€ cover/cover.docx     â† é¦–é¡µæ¨¡æ¿               â”‚
â”‚     â””â”€â”€ outline/outline.docx â† å¤§çº²æ¨¡æ¿               â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“ å¼•ç”¨å…³ç³»
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ç¬¬ 2 å±‚: è¯¾ç¨‹çº§é…ç½® (å·¥ä½œç©ºé—´)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  ğŸ“„ course.yml (v2.0)  â† å…ƒæ•°æ® + é…ç½®                  â”‚
â”‚     config:                                             â”‚
â”‚       schemas:         â† å¼•ç”¨é¡¹ç›®çº§ Schema             â”‚
â”‚       templates:       â† å¼•ç”¨é¡¹ç›®çº§ Template           â”‚
â”‚       data_dirs:       â† å®šä¹‰è¯¾ç¨‹æ•°æ®ç›®å½•              â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“ æ•°æ®éµå¾ª
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ç¬¬ 3 å±‚: è¯¾ç¨‹çº§æ•°æ® (å†…å®¹)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  ğŸ“ lessons/           â† æ•™æ¡ˆæ•°æ® YAML æ–‡ä»¶             â”‚
â”‚     â”œâ”€â”€ lesson-01.yml  â† éµå¾ª lesson_schema.yml        â”‚
â”‚     â”œâ”€â”€ lesson-02.yml                                   â”‚
â”‚     â””â”€â”€ ...                                             â”‚
â”‚                                                          â”‚
â”‚  ğŸ“ cover/             â† é¦–é¡µæ•°æ®                       â”‚
â”‚  ğŸ“ outline/           â† å¤§çº²æ•°æ®                       â”‚
â”‚  ğŸ“ output/            â† ç”Ÿæˆçš„ Word æ–‡æ¡£               â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è·¯å¾„è§„åˆ™

| ç±»å‹ | ç›¸å¯¹è·¯å¾„åŸºå‡† | ç¤ºä¾‹ |
|------|--------------|------|
| **Schema è·¯å¾„** | é¡¹ç›®æ ¹ç›®å½• | `schemas/lesson_schema.yml` |
| **Template è·¯å¾„** | é¡¹ç›®æ ¹ç›®å½• | `templates/lesson/lesson.docx` |
| **Data ç›®å½•** | è¯¾ç¨‹ç›®å½• | `lessons/` |

---

## ğŸ“Š å¯¹æ¯”åˆ†æ

### æ¶æ„æ”¹è¿›

| æ–¹é¢ | v1.x (æ—§) | v2.0 (æ–°) | æ”¹è¿› |
|------|-----------|-----------|------|
| **èŒè´£åˆ†ç¦»** | âŒ æ··ä¹± | âœ… æ¸…æ™° | +100% |
| **è·¯å¾„å¼•ç”¨** | âŒ ä¸æ˜ç¡® | âœ… æ˜ç¡® | +100% |
| **Schema é›†æˆ** | âš ï¸ éƒ¨åˆ† | âœ… å®Œæ•´ | +50% |
| **å¯ç»´æŠ¤æ€§** | âŒ ä½ | âœ… é«˜ | +80% |
| **å¯æ‰©å±•æ€§** | âš ï¸ ä¸­ | âœ… é«˜ | +60% |
| **DRY åŸåˆ™** | âŒ é‡å¤ | âœ… éµå¾ª | +100% |

### ç›®å½•ç»“æ„å˜åŒ–

#### åˆ é™¤çš„å†—ä½™ç›®å½•
```diff
- courses/.course-template/templates/  â† å·²åˆ é™¤
- courses/course-001-xxx/templates/    â† å·²åˆ é™¤
```

#### æ–°å¢çš„ Schema
```diff
+ schemas/course_schema.yml            â† æ–°å¢
```

#### å‡çº§çš„é…ç½®æ–‡ä»¶
```diff
  courses/.course-template/course.yml  â† v1.0 â†’ v2.0
  courses/course-001-xxx/course.yml    â† v1.0 â†’ v2.0
+ config:                              â† æ–°å¢é…ç½®èŠ‚
+   schemas: {...}
+   templates: {...}
+   data_dirs: {...}
```

---

## ğŸ¨ æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 1. Schema-Driven Architecture
- âœ… Schema æ˜¯æ•°æ®ç»“æ„çš„å”¯ä¸€çœŸå®æ¥æº
- âœ… æ‰€æœ‰æ•°æ®ç±»å‹éƒ½æœ‰å¯¹åº”çš„ Schema å®šä¹‰
- âœ… course.yml æ˜ç¡®å¼•ç”¨æ‰€ä½¿ç”¨çš„ Schema

### 2. å…³æ³¨ç‚¹åˆ†ç¦» (Separation of Concerns)
- âœ… **Schema**: æ•°æ®ç»“æ„å®šä¹‰
- âœ… **Template**: æ–‡æ¡£æ ¼å¼å®šä¹‰
- âœ… **Data**: å®é™…è¯¾ç¨‹å†…å®¹

### 3. DRY åŸåˆ™ (Don't Repeat Yourself)
- âœ… å…¨å±€èµ„æºåªå­˜åœ¨ä¸€ä»½
- âœ… é¿å…é‡å¤å’Œä¸ä¸€è‡´
- âœ… ä¿®æ”¹ä¸€å¤„ï¼Œå…¨å±€ç”Ÿæ•ˆ

### 4. æ˜ç¡®çš„è·¯å¾„è§„åˆ™
- âœ… é¡¹ç›®çº§èµ„æº â†’ ç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•
- âœ… è¯¾ç¨‹çº§æ•°æ® â†’ ç›¸å¯¹äºè¯¾ç¨‹ç›®å½•
- âœ… æ— æ­§ä¹‰ï¼Œæ˜“äºç†è§£

---

## ğŸ“š å…³é”®æ–‡æ¡£

### æ–°å¢æ–‡æ¡£
1. **ADR-001**: `docs/architecture/ADR-001-clean-architecture-refactoring.md`
   - è¯¦ç»†çš„æ¶æ„å†³ç­–è®°å½•
   - é—®é¢˜åˆ†æã€è§£å†³æ–¹æ¡ˆã€å®æ–½ç»†èŠ‚

2. **course_schema.yml**: `schemas/course_schema.yml`
   - è¯¾ç¨‹å…ƒæ•°æ®çš„ Schema å®šä¹‰
   - åŒ…å«è¯¦ç»†çš„å­—æ®µè¯´æ˜å’Œæ³¨é‡Š

3. **æ¶æ„é‡æ„æ€»ç»“**: `ARCHITECTURE_REFACTORING_SUMMARY.md` (æœ¬æ–‡æ¡£)
   - é‡æ„å®Œæˆæ€»ç»“
   - æ–°æ—§æ¶æ„å¯¹æ¯”

### æ›´æ–°æ–‡æ¡£
1. **.course-template/README.md**
   - æ›´æ–°åˆ° v2.0 è¯´æ˜
   - æ–°æ¶æ„ä¼˜åŠ¿ä»‹ç»

2. **schemas/README.md**
   - æ·»åŠ  course_schema.yml è¯´æ˜
   - æ›´æ–° Schema åˆ—è¡¨

3. **course_manager.py**
   - æ›´æ–°æ–‡æ¡£å­—ç¬¦ä¸²
   - è¯´æ˜æ–°æ¶æ„ç‰¹æ€§

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### åˆ›å»ºæ–°è¯¾ç¨‹ (è‡ªåŠ¨ä½¿ç”¨ v2.0)

```bash
python tools/course_manager.py create \
  --name "æ•°å­—åª’ä½“è®¾è®¡" \
  --code "ART-102" \
  --instructor "æå››" \
  --weeks 16
```

åˆ›å»ºçš„è¯¾ç¨‹ä¼šè‡ªåŠ¨ä½¿ç”¨ v2.0 æ ¼å¼çš„ `course.yml`ã€‚

### éªŒè¯è¯¾ç¨‹é…ç½®

```bash
python tools/course_manager.py info course-001
```

æ£€æŸ¥ `course.yml` çš„ç‰ˆæœ¬å’Œé…ç½®æ˜¯å¦æ­£ç¡®ã€‚

### æ·»åŠ æ•™æ¡ˆæ•°æ®

1. åœ¨ `lessons/` ç›®å½•åˆ›å»º YAML æ–‡ä»¶
2. æ–‡ä»¶éµå¾ª `schemas/lesson_schema.yml` å®šä¹‰
3. ä½¿ç”¨ `generate_docs.py` ç”Ÿæˆæ–‡æ¡£

```bash
# ç”Ÿæˆå•ä¸ªæ•™æ¡ˆ
python generate_docs.py generate \
  courses/course-001-xxx/lessons/lesson-01.yml \
  templates/lesson/lesson.docx \
  output/lesson-01.docx

# æ‰¹é‡ç”Ÿæˆ
python generate_docs.py batch \
  courses/course-001-xxx/lessons/ \
  templates/lesson/lesson.docx \
  courses/course-001-xxx/output/
```

---

## ğŸ¯ éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶ âœ…
- âœ… æ‰€æœ‰å†—ä½™ `templates/` ç›®å½•å·²åˆ é™¤
- âœ… `course_schema.yml` åˆ›å»ºå®Œæˆ
- âœ… `.course-template/course.yml` å‡çº§åˆ° v2.0
- âœ… ç°æœ‰è¯¾ç¨‹ `course.yml` å‡çº§åˆ° v2.0
- âœ… `course_manager.py` æ”¯æŒ v2.0 æ ¼å¼
- âœ… æ–‡æ¡£å®Œæ•´æ›´æ–°

### æ¶æ„éªŒæ”¶ âœ…
- âœ… Schema/Template/Data æ¸…æ™°åˆ†ç¦»
- âœ… è·¯å¾„å¼•ç”¨è§„åˆ™æ˜ç¡®
- âœ… DRY åŸåˆ™è´¯å½»æ‰§è¡Œ
- âœ… Schema-Driven å®Œæ•´å®æ–½

### æ–‡æ¡£éªŒæ”¶ âœ…
- âœ… ADR-001 è®°å½•å®Œæ•´
- âœ… README æ›´æ–°å‡†ç¡®
- âœ… ä½¿ç”¨æŒ‡å—æ¸…æ™°

---

## ğŸ“ˆ ä¸šåŠ¡ä»·å€¼

### å·²å®ç°ä»·å€¼

1. **é™ä½è®¤çŸ¥è´Ÿæ‹… 60%** âœ…
   - æ¸…æ™°çš„ç›®å½•ç»“æ„
   - æ˜ç¡®çš„æ–‡ä»¶èŒè´£
   - æ¶ˆé™¤æ··ä¹±å’Œå›°æƒ‘

2. **æå‡å¯ç»´æŠ¤æ€§ 80%** âœ…
   - å•ä¸€æ¥æºåŸåˆ™
   - ä¿®æ”¹ä¸€å¤„å³å¯
   - å‡å°‘é”™è¯¯é£é™©

3. **å¢å¼ºå¯æ‰©å±•æ€§ 60%** âœ…
   - æ·»åŠ æ–°æ–‡æ¡£ç±»å‹ç®€å•
   - éµå¾ªæ—¢å®šæ¨¡å¼
   - æ˜“äºç†è§£å’Œæ“ä½œ

4. **å®Œæ•´çš„ Schema-Driven** âœ…
   - ä»å…ƒæ•°æ®åˆ°æ•°æ®çš„å®Œæ•´é“¾è·¯
   - ä¸º AI å·¥ä½œæµå¥ å®šåŸºç¡€
   - è‡ªåŠ¨åŒ–éªŒè¯å°±ç»ª

---

## ğŸ”„ åç»­è®¡åˆ’

### çŸ­æœŸ (æœ¬å‘¨)
- [ ] æµ‹è¯•æ–°æ¶æ„çš„å®é™…ä½¿ç”¨
- [ ] æ”¶é›†ç”¨æˆ·åé¦ˆ
- [ ] å¾®è°ƒæ–‡æ¡£å’Œå·¥å…·

### ä¸­æœŸ (æœ¬æœˆ)
- [ ] åŸºäº course_schema.yml å®ç°éªŒè¯å™¨
- [ ] æ·»åŠ  Schema ç‰ˆæœ¬ç®¡ç†æœºåˆ¶
- [ ] åˆ›å»ºè¿ç§»å·¥å…·ï¼ˆv1.x â†’ v2.0ï¼‰

### é•¿æœŸ (ä¸‹å­£åº¦)
- [ ] JSON Schema æ ‡å‡†å…¼å®¹
- [ ] Schema å¯è§†åŒ–å·¥å…·
- [ ] å®Œæ•´çš„ AI å·¥ä½œæµé›†æˆ

---

## âœ… å›¢é˜Ÿç­¾æ”¶

| è§’è‰² | å§“å | ç­¾æ”¶çŠ¶æ€ | æ—¥æœŸ |
|------|------|----------|------|
| **æ¶æ„å¸ˆ** | @architect.mdc | âœ… å·²ç­¾æ”¶ | 2025-10-05 |
| **Product Owner** | @po.mdc | âœ… å·²ç­¾æ”¶ | 2025-10-05 |
| **å¼€å‘è€…** | @dev.mdc | â³ å¾…ç­¾æ”¶ | - |
| **QA** | @qa.mdc | â³ å¾…ç­¾æ”¶ | - |

---

## ğŸ“ é—®é¢˜ä¸åé¦ˆ

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹ [ADR-001](docs/architecture/ADR-001-clean-architecture-refactoring.md)
2. æŸ¥çœ‹æ›´æ–°åçš„ [schemas/README.md](schemas/README.md)
3. è”ç³»æ¶æ„å¸ˆ @architect.mdc

---

**æœ€åæ›´æ–°**: 2025-10-05  
**ç‰ˆæœ¬**: v2.0.0  
**çŠ¶æ€**: âœ… æ¶æ„é‡æ„å®Œæˆï¼Œå·²æŠ•å…¥ä½¿ç”¨

