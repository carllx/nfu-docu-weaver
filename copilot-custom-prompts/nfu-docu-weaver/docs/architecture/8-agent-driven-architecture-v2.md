# 8. Agent-Driven Architecture v2.0 (Agent ä¸»å¯¼æ¶æ„)

**ç‰ˆæœ¬**: v2.0  
**æ›´æ–°æ—¥æœŸ**: 2025-10-05  
**çŠ¶æ€**: ğŸ—ï¸ Architecture Design  
**æ¶æ„å¸ˆ**: @architect.mdc

---

## ğŸ“‹ ç›®å½•

- [8.1 æ¶æ„é‡æ–°è®¾è®¡çš„åŠ¨æœº](#81-æ¶æ„é‡æ–°è®¾è®¡çš„åŠ¨æœº)
- [8.2 æ ¸å¿ƒè®¾è®¡ç†å¿µ](#82-æ ¸å¿ƒè®¾è®¡ç†å¿µ)
- [8.3 è¯¾ç¨‹æ•°æ®ç»„ç»‡ç»“æ„](#83-è¯¾ç¨‹æ•°æ®ç»„ç»‡ç»“æ„)
- [8.4 Agent ä¸»å¯¼çš„å·¥ä½œæµ](#84-agent-ä¸»å¯¼çš„å·¥ä½œæµ)
- [8.5 å·¥å…·æ³¨å†Œä¸å‘ç°æœºåˆ¶](#85-å·¥å…·æ³¨å†Œä¸å‘ç°æœºåˆ¶)
- [8.6 å®Œæ•´æ¶æ„å›¾](#86-å®Œæ•´æ¶æ„å›¾)
- [8.7 å®æ–½è·¯çº¿å›¾](#87-å®æ–½è·¯çº¿å›¾)

---

## 8.1 æ¶æ„é‡æ–°è®¾è®¡çš„åŠ¨æœº

### 8.1.1 å½“å‰æ¶æ„çš„é—®é¢˜

**é—®é¢˜ 1: Agent å®šä½ä¸æ¸…æ™°**
- âŒ å½“å‰ Agent åªæ˜¯"å‰ç«¯äº¤äº’å±‚"ï¼Œç¼ºä¹ä¸»å¯¼æƒ
- âŒ Agent ä¸çŸ¥é“å¦‚ä½•æ‰¾åˆ°å’Œä½¿ç”¨å·¥å…·
- âŒ å·¥ä½œæµç¨‹å›ºåŒ–åœ¨çŠ¶æ€æœºä¸­ï¼Œç¼ºä¹çµæ´»æ€§

**é—®é¢˜ 2: æ•°æ®ç»„ç»‡ä¸åˆç†**
- âŒ æ‰€æœ‰è¯¾ç¨‹æ•°æ®æ··åœ¨ä¸€ä¸ªç›®å½• (`test_data/`)
- âŒ æ— æ³•åŒºåˆ†ä¸åŒè¯¾ç¨‹ã€ä¸åŒå‘¨æ¬¡çš„æ•°æ®
- âŒ ç¼ºå°‘è¯¾ç¨‹å…ƒæ•°æ®å’Œä¸Šä¸‹æ–‡ä¿¡æ¯

**é—®é¢˜ 3: åŠŸèƒ½èŒƒå›´å—é™**
- âŒ åªèƒ½ç”Ÿæˆæ•™æ¡ˆï¼Œæ— æ³•ç”Ÿæˆè¯¾ç¨‹å¤§çº²
- âŒ æ— æ³•ä»ç”¨æˆ·æä¾›çš„å†…å®¹ï¼ˆMD/DOCï¼‰ç”Ÿæˆæ•°æ®
- âŒ ç¼ºå°‘ AI æ•°æ®ç”Ÿæˆèƒ½åŠ›

**é—®é¢˜ 4: å·¥å…·å‘ç°å›°éš¾**
- âŒ Agent éœ€è¦ç¡¬ç¼–ç å·¥å…·è°ƒç”¨
- âŒ æ–°å¢å·¥å…·éœ€è¦ä¿®æ”¹ Agent æŒ‡ä»¤
- âŒ ç¼ºå°‘å·¥å…·å…ƒæ•°æ®å’Œä½¿ç”¨è¯´æ˜

### 8.1.2 æ–°æ¶æ„çš„ç›®æ ‡

âœ… **Agent æˆä¸ºçœŸæ­£çš„ä¸»å¯¼è€…** - è‡ªä¸»å†³ç­–ã€è‡ªä¸»è°ƒç”¨å·¥å…·  
âœ… **ä»¥è¯¾ç¨‹ä¸ºä¸­å¿ƒçš„æ•°æ®ç»„ç»‡** - æ¸…æ™°çš„ç›®å½•ç»“æ„  
âœ… **å·¥å…·è‡ªåŠ¨å‘ç°** - Agent å¯ä»¥è‡ªä¸»æ‰¾åˆ°éœ€è¦çš„å·¥å…·  
âœ… **å®Œæ•´çš„åŠŸèƒ½è¦†ç›–** - ä»å¤§çº²åˆ°æ•™æ¡ˆçš„å…¨æµç¨‹  
âœ… **å¯æ‰©å±•æ€§** - æ˜“äºæ·»åŠ æ–°å·¥å…·å’Œæ–°åŠŸèƒ½

---

## 8.2 æ ¸å¿ƒè®¾è®¡ç†å¿µ

### 8.2.1 Agent-First Design (Agent ä¼˜å…ˆè®¾è®¡)

```
ä¼ ç»Ÿæ¶æ„:
  ç”¨æˆ· â†’ Agent â†’ å›ºå®šæµç¨‹ â†’ å·¥å…·

æ–°æ¶æ„:
  ç”¨æˆ· â†’ Agent (æ™ºèƒ½å†³ç­–) â†’ åŠ¨æ€é€‰æ‹©å·¥å…· â†’ æ‰§è¡Œä»»åŠ¡
```

**æ ¸å¿ƒåŸåˆ™**:
1. **Agent æ‹¥æœ‰å®Œæ•´çš„å†³ç­–æƒ** - æ ¹æ®ç”¨æˆ·éœ€æ±‚è‡ªä¸»é€‰æ‹©å·¥ä½œæµ
2. **å·¥å…·æ˜¯ Agent çš„èƒ½åŠ›æ‰©å±•** - ä¸æ˜¯å›ºå®šçš„è°ƒç”¨é“¾
3. **Schema æ˜¯ Agent çš„çŸ¥è¯†æ ¸å¿ƒ** - ç†è§£æ•°æ®ç»“æ„å’Œçº¦æŸ

### 8.2.2 Course-Centric Organization (ä»¥è¯¾ç¨‹ä¸ºä¸­å¿ƒ)

```
æ¯ä¸ªè¯¾ç¨‹æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å·¥ä½œç©ºé—´:
  - æœ‰è‡ªå·±çš„å¤§çº²ã€æ•™æ¡ˆã€æ¨¡æ¿
  - æœ‰æ¸…æ™°çš„å‘¨æ¬¡ç»„ç»‡
  - æœ‰å®Œæ•´çš„å…ƒæ•°æ®
```

### 8.2.3 Tool Registry Pattern (å·¥å…·æ³¨å†Œæ¨¡å¼)

```
å·¥å…·é€šè¿‡å…ƒæ•°æ®è‡ªæˆ‘æè¿°:
  - å·¥å…·åç§°å’Œç”¨é€”
  - è¾“å…¥è¾“å‡ºè§„èŒƒ
  - ä½¿ç”¨ç¤ºä¾‹
  - Agent å¯ä»¥è‡ªåŠ¨å‘ç°å’Œè°ƒç”¨
```

---

## 8.3 è¯¾ç¨‹æ•°æ®ç»„ç»‡ç»“æ„

### 8.3.1 æ–°çš„ç›®å½•ç»“æ„

```
nfu-docu-weaver/
â”œâ”€â”€ courses/                          # ğŸ“š è¯¾ç¨‹å·¥ä½œç©ºé—´ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ course-001-typography/        # è¯¾ç¨‹ 1: å­—ä½“è®¾è®¡
â”‚   â”‚   â”œâ”€â”€ course.yml                # è¯¾ç¨‹å…ƒæ•°æ®
â”‚   â”‚   â”œâ”€â”€ outline/                  # è¯¾ç¨‹å¤§çº²
â”‚   â”‚   â”‚   â”œâ”€â”€ outline.md            # åŸå§‹å¤§çº²ï¼ˆç”¨æˆ·æä¾›ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ outline.yml           # ç»“æ„åŒ–å¤§çº²æ•°æ®
â”‚   â”‚   â”‚   â””â”€â”€ outline.docx          # æœ€ç»ˆå¤§çº²æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ cover/                    # æ•™æ¡ˆé¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ cover.yml             # é¦–é¡µæ•°æ®
â”‚   â”‚   â”‚   â””â”€â”€ cover.docx            # é¦–é¡µæ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ lessons/                  # æ•™æ¡ˆæ•°æ®ï¼ˆæŒ‰å‘¨æ¬¡ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ week-01.yml           # ç¬¬ 1 å‘¨æ•™æ¡ˆæ•°æ®
â”‚   â”‚   â”‚   â”œâ”€â”€ week-02.yml           # ç¬¬ 2 å‘¨æ•™æ¡ˆæ•°æ®
â”‚   â”‚   â”‚   â”œâ”€â”€ week-03.yml           # ç¬¬ 3 å‘¨æ•™æ¡ˆæ•°æ®
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ output/                   # ç”Ÿæˆçš„æ–‡æ¡£
â”‚   â”‚   â”‚   â”œâ”€â”€ outline.docx          # è¯¾ç¨‹å¤§çº²
â”‚   â”‚   â”‚   â”œâ”€â”€ cover.docx            # æ•™æ¡ˆé¦–é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ week-01.docx          # ç¬¬ 1 å‘¨æ•™æ¡ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ week-02.docx          # ç¬¬ 2 å‘¨æ•™æ¡ˆ
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ templates/                # è¯¾ç¨‹ä¸“ç”¨æ¨¡æ¿ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚       â”œâ”€â”€ outline-template.docx
â”‚   â”‚       â”œâ”€â”€ cover-template.docx
â”‚   â”‚       â””â”€â”€ lesson-template.docx
â”‚   â”‚
â”‚   â”œâ”€â”€ course-002-color-theory/      # è¯¾ç¨‹ 2: è‰²å½©ç†è®º
â”‚   â”‚   â””â”€â”€ ...ï¼ˆåŒä¸Šç»“æ„ï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ .course-template/             # è¯¾ç¨‹æ¨¡æ¿ï¼ˆç”¨äºåˆ›å»ºæ–°è¯¾ç¨‹ï¼‰
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ templates/                        # ğŸ¨ å…¨å±€æ¨¡æ¿åº“
â”‚   â”œâ”€â”€ outline/                      # å¤§çº²æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ default-outline.docx
â”‚   â”œâ”€â”€ cover/                        # é¦–é¡µæ¨¡æ¿
â”‚   â”‚   â””â”€â”€ default-cover.docx
â”‚   â””â”€â”€ lesson/                       # æ•™æ¡ˆæ¨¡æ¿
â”‚       â””â”€â”€ default-lesson.docx
â”‚
â”œâ”€â”€ schemas/                          # ğŸ“‹ æ•°æ®å¥‘çº¦ï¼ˆSchemaï¼‰
â”‚   â”œâ”€â”€ course_schema.yml             # è¯¾ç¨‹å…ƒæ•°æ® Schemaï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ outline_schema.yml            # å¤§çº²æ•°æ® Schemaï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ cover_schema.yml              # é¦–é¡µæ•°æ® Schemaï¼ˆæ–°å¢ï¼‰
â”‚   â””â”€â”€ lesson_schema.yml             # æ•™æ¡ˆæ•°æ® Schemaï¼ˆé‡å‘½åï¼‰
â”‚
â”œâ”€â”€ tools/                            # ğŸ”§ å·¥å…·åº“ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ registry.yml                  # å·¥å…·æ³¨å†Œè¡¨ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ doc_generator.py              # æ–‡æ¡£ç”Ÿæˆå·¥å…·ï¼ˆé‡æ„ï¼‰
â”‚   â”œâ”€â”€ outline_generator.py          # å¤§çº²ç”Ÿæˆå·¥å…·ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ data_converter.py             # æ•°æ®è½¬æ¢å·¥å…·ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ course_manager.py             # è¯¾ç¨‹ç®¡ç†å·¥å…·ï¼ˆæ–°å¢ï¼‰
â”‚   â””â”€â”€ validator.py                  # æ•°æ®éªŒè¯å·¥å…·ï¼ˆé‡æ„ï¼‰
â”‚
â”œâ”€â”€ agents/                           # ğŸ¤– Agent æŒ‡ä»¤é›†
â”‚   â”œâ”€â”€ lesson-weaver-v2.md           # Lesson Weaver Agent v2ï¼ˆé‡å†™ï¼‰
â”‚   â””â”€â”€ tool-discovery.md             # å·¥å…·å‘ç°æŒ‡ä»¤ï¼ˆæ–°å¢ï¼‰
â”‚
â”œâ”€â”€ docs/                             # ğŸ“š é¡¹ç›®æ–‡æ¡£
â””â”€â”€ tests/                            # ğŸ§ª æµ‹è¯•å¥—ä»¶
```

### 8.3.2 è¯¾ç¨‹å…ƒæ•°æ® (course.yml)

æ¯ä¸ªè¯¾ç¨‹éƒ½æœ‰ä¸€ä¸ª `course.yml` æ–‡ä»¶ï¼Œæè¿°è¯¾ç¨‹çš„åŸºæœ¬ä¿¡æ¯ï¼š

```yaml
# courses/course-001-typography/course.yml

course_id: "course-001"
course_name: "å­—ä½“è®¾è®¡åŸºç¡€"
course_code: "ART-101"
instructor: "å¼ ä¸‰"
semester: "2024-2025 ç¬¬ä¸€å­¦æœŸ"
total_weeks: 16

# è¯¾ç¨‹çŠ¶æ€
status:
  outline_completed: true        # å¤§çº²æ˜¯å¦å®Œæˆ
  cover_completed: true          # é¦–é¡µæ˜¯å¦å®Œæˆ
  lessons_completed: 8           # å·²å®Œæˆçš„æ•™æ¡ˆæ•°
  lessons_total: 16              # æ€»æ•™æ¡ˆæ•°

# æ¨¡æ¿é…ç½®
templates:
  outline: "templates/outline/default-outline.docx"
  cover: "templates/cover/default-cover.docx"
  lesson: "templates/lesson/default-lesson.docx"

# å…ƒæ•°æ®
created_at: "2024-10-01"
updated_at: "2024-10-05"
version: "1.0"
```

### 8.3.3 æ•°æ®ç»„ç»‡çš„ä¼˜åŠ¿

âœ… **æ¸…æ™°çš„è¯¾ç¨‹éš”ç¦»** - æ¯ä¸ªè¯¾ç¨‹ç‹¬ç«‹ç®¡ç†  
âœ… **æ˜ç¡®çš„å‘¨æ¬¡ç»„ç»‡** - `week-01.yml`, `week-02.yml` ä¸€ç›®äº†ç„¶  
âœ… **å®Œæ•´çš„ä¸Šä¸‹æ–‡** - è¯¾ç¨‹å…ƒæ•°æ®æä¾›å…¨å±€ä¿¡æ¯  
âœ… **çµæ´»çš„æ¨¡æ¿** - å¯ä»¥ä½¿ç”¨å…¨å±€æ¨¡æ¿æˆ–è¯¾ç¨‹ä¸“ç”¨æ¨¡æ¿  
âœ… **æ˜“äºæ‰©å±•** - æ–°å¢è¯¾ç¨‹åªéœ€å¤åˆ¶æ¨¡æ¿ç›®å½•

---

## 8.4 Agent ä¸»å¯¼çš„å·¥ä½œæµ

### 8.4.1 æ–°çš„å·¥ä½œæµè®¾è®¡

**æ ¸å¿ƒç†å¿µ**: Agent æ ¹æ®ç”¨æˆ·æ„å›¾ï¼Œè‡ªä¸»é€‰æ‹©æ‰§è¡Œè·¯å¾„

```
ç”¨æˆ·è¾“å…¥
    â†“
Agent ç†è§£æ„å›¾
    â†“
    â”œâ”€â†’ åœºæ™¯ 1: åˆ›å»ºæ–°è¯¾ç¨‹
    â”‚     â†“
    â”‚   è°ƒç”¨ course_manager.create_course()
    â”‚     â†“
    â”‚   åˆ›å»ºè¯¾ç¨‹ç›®å½•ç»“æ„
    â”‚
    â”œâ”€â†’ åœºæ™¯ 2: ç”Ÿæˆè¯¾ç¨‹å¤§çº²
    â”‚     â†“
    â”‚   è°ƒç”¨ outline_generator.from_content()
    â”‚     â†“
    â”‚   è§£æç”¨æˆ·æä¾›çš„ MD/DOC â†’ ç”Ÿæˆ outline.yml â†’ ç”Ÿæˆ outline.docx
    â”‚
    â”œâ”€â†’ åœºæ™¯ 3: ç”Ÿæˆæ•™æ¡ˆé¦–é¡µ
    â”‚     â†“
    â”‚   è¯»å– outline.yml â†’ è°ƒç”¨ AI ç”Ÿæˆ cover.yml â†’ ç”Ÿæˆ cover.docx
    â”‚
    â”œâ”€â†’ åœºæ™¯ 4: ç”Ÿæˆå•æ¬¡æ•™æ¡ˆ
    â”‚     â†“
    â”‚   è¯»å– cover.yml â†’ è°ƒç”¨ AI ç”Ÿæˆ week-N.yml â†’ éªŒè¯ â†’ ç”Ÿæˆ week-N.docx
    â”‚
    â””â”€â†’ åœºæ™¯ 5: æ‰¹é‡ç”Ÿæˆæ•™æ¡ˆ
          â†“
        å¾ªç¯ç”Ÿæˆ week-01 åˆ° week-N
          â†“
        æ±‡æ€»æŠ¥å‘Š
```

### 8.4.2 Agent å†³ç­–æµç¨‹

```markdown
## Agent å†³ç­–æ ‘

**Step 1: ç†è§£ç”¨æˆ·æ„å›¾**
- ç”¨æˆ·æƒ³åšä»€ä¹ˆï¼Ÿ
  - åˆ›å»ºæ–°è¯¾ç¨‹ï¼Ÿ
  - ç”Ÿæˆå¤§çº²ï¼Ÿ
  - ç”Ÿæˆæ•™æ¡ˆï¼Ÿ
  - éªŒè¯æ•°æ®ï¼Ÿ

**Step 2: æ£€æŸ¥å‰ç½®æ¡ä»¶**
- è¯¾ç¨‹æ˜¯å¦å­˜åœ¨ï¼Ÿ
- å¤§çº²æ˜¯å¦å®Œæˆï¼Ÿ
- é¦–é¡µæ˜¯å¦å®Œæˆï¼Ÿ
- éœ€è¦å“ªäº›æ•°æ®ï¼Ÿ

**Step 3: é€‰æ‹©å·¥å…·**
- æŸ¥è¯¢å·¥å…·æ³¨å†Œè¡¨ (tools/registry.yml)
- æ‰¾åˆ°åŒ¹é…çš„å·¥å…·
- æ£€æŸ¥å·¥å…·çš„è¾“å…¥è¦æ±‚

**Step 4: æ‰§è¡Œä»»åŠ¡**
- è°ƒç”¨å·¥å…·
- å¤„ç†ç»“æœ
- æŠ¥å‘Šç»™ç”¨æˆ·

**Step 5: åç»­è¡ŒåŠ¨**
- æ˜¯å¦éœ€è¦ç»§ç»­ï¼Ÿ
- æ˜¯å¦éœ€è¦éªŒè¯ï¼Ÿ
- æ˜¯å¦éœ€è¦ç”¨æˆ·ç¡®è®¤ï¼Ÿ
```

### 8.4.3 ç¤ºä¾‹ï¼šç”Ÿæˆç¬¬ 3 å‘¨æ•™æ¡ˆ

```
ç”¨æˆ·: "è¯·ä¸ºå­—ä½“è®¾è®¡è¯¾ç¨‹ç”Ÿæˆç¬¬ 3 å‘¨çš„æ•™æ¡ˆ"

Agent æ€è€ƒ:
1. è¯†åˆ«è¯¾ç¨‹: "å­—ä½“è®¾è®¡" â†’ course-001-typography
2. æ£€æŸ¥å‰ç½®æ¡ä»¶:
   - âœ… è¯¾ç¨‹å­˜åœ¨
   - âœ… å¤§çº²å·²å®Œæˆ
   - âœ… é¦–é¡µå·²å®Œæˆ
   - âŒ week-03.yml ä¸å­˜åœ¨
3. å†³ç­–: éœ€è¦å…ˆç”Ÿæˆæ•°æ®ï¼Œå†ç”Ÿæˆæ–‡æ¡£
4. æŸ¥æ‰¾å·¥å…·:
   - AI æ•°æ®ç”Ÿæˆå·¥å…·: ai_data_generator.py
   - æ•°æ®éªŒè¯å·¥å…·: validator.py
   - æ–‡æ¡£ç”Ÿæˆå·¥å…·: doc_generator.py
5. æ‰§è¡Œ:
   Step 1: è°ƒç”¨ ai_data_generator.generate_lesson_data(
             course_id="course-001",
             week=3,
             context=["outline.yml", "cover.yml", "week-01.yml", "week-02.yml"]
           )
           â†’ ç”Ÿæˆ week-03.yml
   
   Step 2: è°ƒç”¨ validator.validate(
             data_file="week-03.yml",
             schema="schemas/lesson_schema.yml"
           )
           â†’ éªŒè¯é€šè¿‡ âœ…
   
   Step 3: è°ƒç”¨ doc_generator.generate(
             data="week-03.yml",
             template="templates/lesson/default-lesson.docx",
             output="output/week-03.docx"
           )
           â†’ ç”Ÿæˆ week-03.docx âœ…

6. æŠ¥å‘Š:
   "âœ… ç¬¬ 3 å‘¨æ•™æ¡ˆå·²ç”Ÿæˆ: courses/course-001-typography/output/week-03.docx"
```

---

## 8.5 å·¥å…·æ³¨å†Œä¸å‘ç°æœºåˆ¶

### 8.5.1 å·¥å…·æ³¨å†Œè¡¨ (tools/registry.yml)

```yaml
# tools/registry.yml

tools:
  - id: course_manager
    name: "è¯¾ç¨‹ç®¡ç†å·¥å…·"
    description: "åˆ›å»ºã€ç®¡ç†è¯¾ç¨‹å·¥ä½œç©ºé—´"
    script: "tools/course_manager.py"
    capabilities:
      - create_course      # åˆ›å»ºæ–°è¯¾ç¨‹
      - list_courses       # åˆ—å‡ºæ‰€æœ‰è¯¾ç¨‹
      - get_course_info    # è·å–è¯¾ç¨‹ä¿¡æ¯
      - update_course      # æ›´æ–°è¯¾ç¨‹å…ƒæ•°æ®
    
    functions:
      - name: create_course
        description: "åˆ›å»ºæ–°è¯¾ç¨‹å·¥ä½œç©ºé—´"
        inputs:
          - name: course_name
            type: string
            required: true
            description: "è¯¾ç¨‹åç§°"
          - name: course_code
            type: string
            required: false
            description: "è¯¾ç¨‹ä»£ç "
          - name: instructor
            type: string
            required: false
            description: "æˆè¯¾æ•™å¸ˆ"
        outputs:
          - name: course_id
            type: string
            description: "ç”Ÿæˆçš„è¯¾ç¨‹ ID"
          - name: course_path
            type: string
            description: "è¯¾ç¨‹ç›®å½•è·¯å¾„"
        example: |
          python tools/course_manager.py create \
            --name "å­—ä½“è®¾è®¡åŸºç¡€" \
            --code "ART-101" \
            --instructor "å¼ ä¸‰"

  - id: outline_generator
    name: "å¤§çº²ç”Ÿæˆå·¥å…·"
    description: "ä»ç”¨æˆ·æä¾›çš„å†…å®¹ç”Ÿæˆè¯¾ç¨‹å¤§çº²"
    script: "tools/outline_generator.py"
    capabilities:
      - from_markdown      # ä» Markdown ç”Ÿæˆ
      - from_docx          # ä» Word æ–‡æ¡£ç”Ÿæˆ
      - from_text          # ä»çº¯æ–‡æœ¬ç”Ÿæˆ
    
    functions:
      - name: from_markdown
        description: "ä» Markdown æ–‡ä»¶ç”Ÿæˆå¤§çº²æ•°æ®"
        inputs:
          - name: source_file
            type: string
            required: true
            description: "Markdown æ–‡ä»¶è·¯å¾„"
          - name: course_id
            type: string
            required: true
            description: "è¯¾ç¨‹ ID"
        outputs:
          - name: outline_data
            type: string
            description: "ç”Ÿæˆçš„ outline.yml è·¯å¾„"
          - name: outline_doc
            type: string
            description: "ç”Ÿæˆçš„ outline.docx è·¯å¾„"
        example: |
          python tools/outline_generator.py from-markdown \
            --source user-content.md \
            --course course-001

  - id: doc_generator
    name: "æ–‡æ¡£ç”Ÿæˆå·¥å…·"
    description: "ä» YAML æ•°æ®ç”Ÿæˆ Word æ–‡æ¡£"
    script: "tools/doc_generator.py"
    capabilities:
      - generate           # ç”Ÿæˆå•ä¸ªæ–‡æ¡£
      - batch_generate     # æ‰¹é‡ç”Ÿæˆæ–‡æ¡£
      - validate           # éªŒè¯æ•°æ®
    
    functions:
      - name: generate
        description: "ç”Ÿæˆå•ä¸ªæ–‡æ¡£"
        inputs:
          - name: data_file
            type: string
            required: true
            description: "YAML æ•°æ®æ–‡ä»¶"
          - name: template
            type: string
            required: true
            description: "Word æ¨¡æ¿æ–‡ä»¶"
          - name: output
            type: string
            required: true
            description: "è¾“å‡ºæ–‡ä»¶è·¯å¾„"
        outputs:
          - name: success
            type: boolean
            description: "æ˜¯å¦æˆåŠŸ"
          - name: output_path
            type: string
            description: "ç”Ÿæˆçš„æ–‡æ¡£è·¯å¾„"
        example: |
          python tools/doc_generator.py generate \
            week-01.yml \
            templates/lesson/default-lesson.docx \
            output/week-01.docx

  - id: validator
    name: "æ•°æ®éªŒè¯å·¥å…·"
    description: "åŸºäº Schema éªŒè¯ YAML æ•°æ®"
    script: "tools/validator.py"
    capabilities:
      - validate_file      # éªŒè¯å•ä¸ªæ–‡ä»¶
      - validate_batch     # æ‰¹é‡éªŒè¯
    
    functions:
      - name: validate_file
        description: "éªŒè¯å•ä¸ªæ•°æ®æ–‡ä»¶"
        inputs:
          - name: data_file
            type: string
            required: true
            description: "YAML æ•°æ®æ–‡ä»¶"
          - name: schema
            type: string
            required: true
            description: "Schema æ–‡ä»¶"
        outputs:
          - name: valid
            type: boolean
            description: "æ˜¯å¦é€šè¿‡éªŒè¯"
          - name: errors
            type: array
            description: "é”™è¯¯åˆ—è¡¨"
        example: |
          python tools/validator.py validate \
            week-01.yml \
            schemas/lesson_schema.yml

  - id: ai_data_generator
    name: "AI æ•°æ®ç”Ÿæˆå·¥å…·"
    description: "ä½¿ç”¨ AI ç”Ÿæˆç»“æ„åŒ–æ•°æ®"
    script: "tools/ai_data_generator.py"
    capabilities:
      - generate_lesson    # ç”Ÿæˆæ•™æ¡ˆæ•°æ®
      - generate_cover     # ç”Ÿæˆé¦–é¡µæ•°æ®
    
    functions:
      - name: generate_lesson
        description: "ç”Ÿæˆæ•™æ¡ˆæ•°æ®"
        inputs:
          - name: course_id
            type: string
            required: true
            description: "è¯¾ç¨‹ ID"
          - name: week
            type: integer
            required: true
            description: "å‘¨æ¬¡"
          - name: context_files
            type: array
            required: false
            description: "ä¸Šä¸‹æ–‡æ–‡ä»¶åˆ—è¡¨"
        outputs:
          - name: data_file
            type: string
            description: "ç”Ÿæˆçš„ YAML æ–‡ä»¶è·¯å¾„"
        example: |
          python tools/ai_data_generator.py generate-lesson \
            --course course-001 \
            --week 3 \
            --context outline.yml cover.yml week-01.yml week-02.yml
```

### 8.5.2 Agent å¦‚ä½•å‘ç°å·¥å…·

```markdown
## Agent å·¥å…·å‘ç°æµç¨‹

**Step 1: è¯»å–å·¥å…·æ³¨å†Œè¡¨**
```python
# Agent å†…éƒ¨é€»è¾‘ï¼ˆä¼ªä»£ç ï¼‰
tools_registry = load_yaml("tools/registry.yml")
```

**Step 2: æ ¹æ®éœ€æ±‚æœç´¢å·¥å…·**
```python
# ç¤ºä¾‹ï¼šéœ€è¦åˆ›å»ºè¯¾ç¨‹
needed_capability = "create_course"
matching_tools = [
    tool for tool in tools_registry["tools"]
    if needed_capability in tool["capabilities"]
]
# ç»“æœ: course_manager
```

**Step 3: è·å–å·¥å…·ä½¿ç”¨è¯´æ˜**
```python
tool = matching_tools[0]
function = tool["functions"][0]
print(function["description"])
print(function["example"])
```

**Step 4: æ„å»ºå·¥å…·è°ƒç”¨å‘½ä»¤**
```python
command = f"python {tool['script']} create --name 'å­—ä½“è®¾è®¡' --code 'ART-101'"
```

**Step 5: æ‰§è¡Œå¹¶å¤„ç†ç»“æœ**
```python
result = execute_command(command)
parse_output(result)
```
```

### 8.5.3 å·¥å…·è‡ªæˆ‘æè¿°çš„ä¼˜åŠ¿

âœ… **Agent æ— éœ€ç¡¬ç¼–ç ** - åŠ¨æ€å‘ç°å·¥å…·  
âœ… **æ˜“äºæ‰©å±•** - æ–°å¢å·¥å…·åªéœ€æ³¨å†Œ  
âœ… **è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£** - ä»æ³¨å†Œè¡¨ç”Ÿæˆå·¥å…·æ‰‹å†Œ  
âœ… **ç±»å‹å®‰å…¨** - è¾“å…¥è¾“å‡ºè§„èŒƒæ˜ç¡®  
âœ… **ç¤ºä¾‹é©±åŠ¨** - æ¯ä¸ªå·¥å…·éƒ½æœ‰ä½¿ç”¨ç¤ºä¾‹

---

## 8.6 å®Œæ•´æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç”¨æˆ· (User)                                  â”‚
â”‚                                                                   â”‚
â”‚  "è¯·ä¸ºå­—ä½“è®¾è®¡è¯¾ç¨‹ç”Ÿæˆç¬¬ 3 å‘¨çš„æ•™æ¡ˆ"                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Lesson-Weaver Agent v2.0 (AI Agent)                 â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ ¸å¿ƒèƒ½åŠ› (Core Capabilities)                             â”‚   â”‚
â”‚  â”‚  1. æ„å›¾ç†è§£ (Intent Understanding)                       â”‚   â”‚
â”‚  â”‚  2. å·¥å…·å‘ç° (Tool Discovery)                             â”‚   â”‚
â”‚  â”‚  3. å†³ç­–åˆ¶å®š (Decision Making)                            â”‚   â”‚
â”‚  â”‚  4. ä»»åŠ¡ç¼–æ’ (Task Orchestration)                         â”‚   â”‚
â”‚  â”‚  5. ç»“æœéªŒè¯ (Result Validation)                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  çŸ¥è¯†åº“ (Knowledge Base)                                  â”‚   â”‚
â”‚  â”‚  â€¢ Schema å®šä¹‰ (schemas/*.yml)                            â”‚   â”‚
â”‚  â”‚  â€¢ å·¥å…·æ³¨å†Œè¡¨ (tools/registry.yml)                        â”‚   â”‚
â”‚  â”‚  â€¢ è¯¾ç¨‹å…ƒæ•°æ® (courses/*/course.yml)                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â†“ (æŸ¥è¯¢å·¥å…·æ³¨å†Œè¡¨)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å·¥å…·æ³¨å†Œè¡¨ (Tool Registry)                       â”‚
â”‚                    tools/registry.yml                             â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ course_      â”‚  â”‚ outline_     â”‚  â”‚ doc_         â”‚          â”‚
â”‚  â”‚ manager      â”‚  â”‚ generator    â”‚  â”‚ generator    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚ validator    â”‚  â”‚ ai_data_     â”‚                            â”‚
â”‚  â”‚              â”‚  â”‚ generator    â”‚                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â†“ (è°ƒç”¨å·¥å…·)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å·¥å…·å±‚ (Tools Layer)                         â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  course_manager.py                                        â”‚   â”‚
â”‚  â”‚  â€¢ create_course()  â€¢ list_courses()                      â”‚   â”‚
â”‚  â”‚  â€¢ get_course_info()  â€¢ update_course()                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  outline_generator.py                                     â”‚   â”‚
â”‚  â”‚  â€¢ from_markdown()  â€¢ from_docx()  â€¢ from_text()          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  doc_generator.py (é‡æ„è‡ª generate_docs.py)               â”‚   â”‚
â”‚  â”‚  â€¢ generate()  â€¢ batch_generate()  â€¢ validate()           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  validator.py                                             â”‚   â”‚
â”‚  â”‚  â€¢ validate_file()  â€¢ validate_batch()                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ai_data_generator.py (æ–°å¢)                              â”‚   â”‚
â”‚  â”‚  â€¢ generate_lesson()  â€¢ generate_cover()                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â†“ (è¯»å†™æ•°æ®)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å±‚ (Data Layer)                            â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  courses/ (è¯¾ç¨‹å·¥ä½œç©ºé—´)                                  â”‚   â”‚
â”‚  â”‚    â”œâ”€â”€ course-001-typography/                             â”‚   â”‚
â”‚  â”‚    â”‚   â”œâ”€â”€ course.yml          (è¯¾ç¨‹å…ƒæ•°æ®)               â”‚   â”‚
â”‚  â”‚    â”‚   â”œâ”€â”€ outline/             (å¤§çº²)                    â”‚   â”‚
â”‚  â”‚    â”‚   â”œâ”€â”€ cover/               (é¦–é¡µ)                    â”‚   â”‚
â”‚  â”‚    â”‚   â”œâ”€â”€ lessons/             (æ•™æ¡ˆæ•°æ®)                â”‚   â”‚
â”‚  â”‚    â”‚   â”‚   â”œâ”€â”€ week-01.yml                                â”‚   â”‚
â”‚  â”‚    â”‚   â”‚   â”œâ”€â”€ week-02.yml                                â”‚   â”‚
â”‚  â”‚    â”‚   â”‚   â””â”€â”€ week-03.yml      â† æ–°ç”Ÿæˆ                  â”‚   â”‚
â”‚  â”‚    â”‚   â”œâ”€â”€ output/              (ç”Ÿæˆçš„æ–‡æ¡£)              â”‚   â”‚
â”‚  â”‚    â”‚   â”‚   â””â”€â”€ week-03.docx     â† æœ€ç»ˆè¾“å‡º                â”‚   â”‚
â”‚  â”‚    â”‚   â””â”€â”€ templates/           (è¯¾ç¨‹ä¸“ç”¨æ¨¡æ¿)            â”‚   â”‚
â”‚  â”‚    â””â”€â”€ course-002-color-theory/                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  schemas/ (æ•°æ®å¥‘çº¦)                                      â”‚   â”‚
â”‚  â”‚    â”œâ”€â”€ course_schema.yml                                  â”‚   â”‚
â”‚  â”‚    â”œâ”€â”€ outline_schema.yml                                 â”‚   â”‚
â”‚  â”‚    â”œâ”€â”€ cover_schema.yml                                   â”‚   â”‚
â”‚  â”‚    â””â”€â”€ lesson_schema.yml                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  templates/ (å…¨å±€æ¨¡æ¿)                                    â”‚   â”‚
â”‚  â”‚    â”œâ”€â”€ outline/default-outline.docx                       â”‚   â”‚
â”‚  â”‚    â”œâ”€â”€ cover/default-cover.docx                           â”‚   â”‚
â”‚  â”‚    â””â”€â”€ lesson/default-lesson.docx                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8.7 å®æ–½è·¯çº¿å›¾

### Phase 1: åŸºç¡€é‡æ„ (1-2 å‘¨)

**ç›®æ ‡**: å»ºç«‹æ–°çš„ç›®å½•ç»“æ„å’Œå·¥å…·æ¡†æ¶

**ä»»åŠ¡**:
1. âœ… åˆ›å»ºæ–°çš„ç›®å½•ç»“æ„
   ```bash
   mkdir -p courses/.course-template/{outline,cover,lessons,output,templates}
   mkdir -p tools
   ```

2. âœ… åˆ›å»ºå·¥å…·æ³¨å†Œè¡¨
   - ç¼–å†™ `tools/registry.yml`
   - å®šä¹‰å·¥å…·å…ƒæ•°æ®è§„èŒƒ

3. âœ… é‡æ„ `generate_docs.py` â†’ `tools/doc_generator.py`
   - ä¿æŒæ ¸å¿ƒåŠŸèƒ½ä¸å˜
   - æ·»åŠ  CLI æ¥å£
   - æ”¯æŒå·¥å…·æ³¨å†Œè¡¨è°ƒç”¨

4. âœ… åˆ›å»º `tools/course_manager.py`
   - `create_course()` - åˆ›å»ºè¯¾ç¨‹å·¥ä½œç©ºé—´
   - `list_courses()` - åˆ—å‡ºæ‰€æœ‰è¯¾ç¨‹
   - `get_course_info()` - è·å–è¯¾ç¨‹ä¿¡æ¯

5. âœ… åˆ›å»ºæ–°çš„ Schema æ–‡ä»¶
   - `schemas/course_schema.yml`
   - `schemas/outline_schema.yml`
   - `schemas/cover_schema.yml`
   - é‡å‘½å `lesson_data_schema.yml` â†’ `lesson_schema.yml`

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ–°ç›®å½•ç»“æ„åˆ›å»ºå®Œæˆ
- [ ] å·¥å…·æ³¨å†Œè¡¨å¯ç”¨
- [ ] å¯ä»¥åˆ›å»ºæ–°è¯¾ç¨‹
- [ ] å¯ä»¥ç”Ÿæˆæ–‡æ¡£ï¼ˆä½¿ç”¨æ–°å·¥å…·ï¼‰

---

### Phase 2: Agent é‡å†™ (1 å‘¨)

**ç›®æ ‡**: é‡å†™ Lesson-Weaver Agentï¼Œå®ç°å·¥å…·è‡ªåŠ¨å‘ç°

**ä»»åŠ¡**:
1. âœ… ç¼–å†™ `agents/lesson-weaver-v2.md`
   - æ–°çš„ Agent èº«ä»½å’ŒåŸåˆ™
   - å·¥å…·å‘ç°æœºåˆ¶
   - å†³ç­–æµç¨‹
   - ç¤ºä¾‹å¯¹è¯

2. âœ… æ·»åŠ å·¥å…·å‘ç°æŒ‡ä»¤
   - å¦‚ä½•è¯»å– `tools/registry.yml`
   - å¦‚ä½•é€‰æ‹©åˆé€‚çš„å·¥å…·
   - å¦‚ä½•æ„å»ºå·¥å…·è°ƒç”¨å‘½ä»¤

3. âœ… å®šä¹‰æ–°çš„å·¥ä½œæµ
   - åœºæ™¯ 1: åˆ›å»ºè¯¾ç¨‹
   - åœºæ™¯ 2: ç”Ÿæˆå¤§çº²
   - åœºæ™¯ 3: ç”Ÿæˆé¦–é¡µ
   - åœºæ™¯ 4: ç”Ÿæˆæ•™æ¡ˆ
   - åœºæ™¯ 5: æ‰¹é‡ç”Ÿæˆ

**éªŒæ”¶æ ‡å‡†**:
- [ ] Agent å¯ä»¥è‡ªåŠ¨å‘ç°å·¥å…·
- [ ] Agent å¯ä»¥æ ¹æ®æ„å›¾é€‰æ‹©å·¥å…·
- [ ] Agent å¯ä»¥å¤„ç†å¤šç§åœºæ™¯

---

### Phase 3: æ–°å·¥å…·å¼€å‘ (2-3 å‘¨)

**ç›®æ ‡**: å¼€å‘ç¼ºå¤±çš„å·¥å…·

**ä»»åŠ¡**:
1. âœ… `tools/outline_generator.py`
   - ä» Markdown ç”Ÿæˆå¤§çº²
   - ä» Word æ–‡æ¡£ç”Ÿæˆå¤§çº²
   - ç”Ÿæˆ `outline.yml` å’Œ `outline.docx`

2. âœ… `tools/ai_data_generator.py`
   - é›†æˆ AI API (OpenAI/Claude)
   - æ ¹æ® Schema ç”Ÿæˆæ•°æ®
   - ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç”Ÿæˆ

3. âœ… `tools/validator.py`
   - é‡æ„éªŒè¯é€»è¾‘
   - æ”¯æŒæ‰€æœ‰ Schema ç±»å‹
   - è¯¦ç»†çš„é”™è¯¯æŠ¥å‘Š

4. âœ… `tools/data_converter.py`
   - Markdown â†’ YAML
   - Word â†’ YAML
   - JSON â†’ YAML

**éªŒæ”¶æ ‡å‡†**:
- [ ] å¯ä»¥ä»ç”¨æˆ·å†…å®¹ç”Ÿæˆå¤§çº²
- [ ] å¯ä»¥ä½¿ç”¨ AI ç”Ÿæˆæ•™æ¡ˆæ•°æ®
- [ ] æ‰€æœ‰å·¥å…·éƒ½åœ¨æ³¨å†Œè¡¨ä¸­

---

### Phase 4: ç«¯åˆ°ç«¯æµ‹è¯• (1 å‘¨)

**ç›®æ ‡**: å®Œæ•´æµ‹è¯•æ–°æ¶æ„

**ä»»åŠ¡**:
1. âœ… åˆ›å»ºæµ‹è¯•è¯¾ç¨‹
   ```bash
   python tools/course_manager.py create \
     --name "å­—ä½“è®¾è®¡åŸºç¡€" \
     --code "ART-101"
   ```

2. âœ… æµ‹è¯•å¤§çº²ç”Ÿæˆ
   - æä¾› Markdown å¤§çº²
   - ç”Ÿæˆ `outline.yml` å’Œ `outline.docx`

3. âœ… æµ‹è¯•æ•™æ¡ˆç”Ÿæˆ
   - ç”Ÿæˆç¬¬ 1 å‘¨æ•™æ¡ˆ
   - æ‰¹é‡ç”Ÿæˆ 1-16 å‘¨æ•™æ¡ˆ

4. âœ… æµ‹è¯• Agent å·¥ä½œæµ
   - å®Œæ•´çš„å¯¹è¯æµç¨‹
   - é”™è¯¯å¤„ç†
   - ç”¨æˆ·ç¡®è®¤

**éªŒæ”¶æ ‡å‡†**:
- [ ] å¯ä»¥å®Œæˆå®Œæ•´çš„è¯¾ç¨‹ç”Ÿæˆæµç¨‹
- [ ] Agent å¯ä»¥è‡ªä¸»å†³ç­–å’Œè°ƒç”¨å·¥å…·
- [ ] æ‰€æœ‰ç”Ÿæˆçš„æ–‡æ¡£ç¬¦åˆè¦æ±‚

---

### Phase 5: æ–‡æ¡£å’ŒåŸ¹è®­ (1 å‘¨)

**ç›®æ ‡**: å®Œå–„æ–‡æ¡£ï¼Œå‡†å¤‡å‘å¸ƒ

**ä»»åŠ¡**:
1. âœ… æ›´æ–° README.md
   - æ–°çš„ç›®å½•ç»“æ„è¯´æ˜
   - æ–°çš„ä½¿ç”¨æµç¨‹
   - å·¥å…·ä½¿ç”¨ç¤ºä¾‹

2. âœ… ç¼–å†™å·¥å…·æ–‡æ¡£
   - æ¯ä¸ªå·¥å…·çš„è¯¦ç»†è¯´æ˜
   - ä½¿ç”¨ç¤ºä¾‹
   - å¸¸è§é—®é¢˜

3. âœ… ç¼–å†™ Agent ä½¿ç”¨æŒ‡å—
   - å¦‚ä½•ä¸ Agent äº¤äº’
   - å¸¸è§åœºæ™¯ç¤ºä¾‹
   - æœ€ä½³å®è·µ

4. âœ… åˆ›å»ºè¿ç§»æŒ‡å—
   - å¦‚ä½•ä»æ—§ç»“æ„è¿ç§»åˆ°æ–°ç»“æ„
   - æ•°æ®è¿ç§»è„šæœ¬

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ–‡æ¡£å®Œæ•´ä¸”å‡†ç¡®
- [ ] ç”¨æˆ·å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ç³»ç»Ÿ
- [ ] æœ‰å®Œæ•´çš„ç¤ºä¾‹å’Œæ•™ç¨‹

---

## 8.8 å…³é”®è®¾è®¡å†³ç­–

### å†³ç­– 1: ä¸ºä»€ä¹ˆé‡‡ç”¨è¯¾ç¨‹ä¸ºä¸­å¿ƒçš„ç»„ç»‡ï¼Ÿ

**ç†ç”±**:
- âœ… ç¬¦åˆç”¨æˆ·çš„å¿ƒæ™ºæ¨¡å‹ï¼ˆæ•™å¸ˆæŒ‰è¯¾ç¨‹ç»„ç»‡æ•™å­¦ï¼‰
- âœ… æ¸…æ™°çš„æ•°æ®éš”ç¦»ï¼ˆä¸åŒè¯¾ç¨‹ä¸ä¼šæ··æ·†ï¼‰
- âœ… æ˜“äºç®¡ç†å’Œç»´æŠ¤
- âœ… æ”¯æŒå¤šè¯¾ç¨‹å¹¶è¡Œå¼€å‘

### å†³ç­– 2: ä¸ºä»€ä¹ˆéœ€è¦å·¥å…·æ³¨å†Œè¡¨ï¼Ÿ

**ç†ç”±**:
- âœ… Agent å¯ä»¥è‡ªåŠ¨å‘ç°å·¥å…·ï¼ˆæ— éœ€ç¡¬ç¼–ç ï¼‰
- âœ… æ–°å¢å·¥å…·æ— éœ€ä¿®æ”¹ Agent
- âœ… å·¥å…·è‡ªæˆ‘æè¿°ï¼Œæ˜“äºç†è§£å’Œä½¿ç”¨
- âœ… æ”¯æŒå·¥å…·ç‰ˆæœ¬ç®¡ç†å’Œå‡çº§

### å†³ç­– 3: ä¸ºä»€ä¹ˆ Agent éœ€è¦å®Œæ•´çš„å†³ç­–æƒï¼Ÿ

**ç†ç”±**:
- âœ… ç”¨æˆ·æ„å›¾å¤šæ ·ï¼Œå›ºå®šæµç¨‹æ— æ³•è¦†ç›–
- âœ… AI çš„ä¼˜åŠ¿åœ¨äºç†è§£å’Œå†³ç­–
- âœ… çµæ´»æ€§å’Œå¯æ‰©å±•æ€§
- âœ… æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ

### å†³ç­– 4: ä¸ºä»€ä¹ˆä¿ç•™ Schema-Driven Architectureï¼Ÿ

**ç†ç”±**:
- âœ… Schema æ˜¯æ•°æ®è´¨é‡çš„ä¿éšœ
- âœ… Schema æ˜¯ AI ç”Ÿæˆçš„æŒ‡å—
- âœ… Schema æ˜¯ç³»ç»Ÿçš„å¥‘çº¦
- âœ… å·²æœ‰çš„æŠ•èµ„å’Œæˆæœ

---

## 8.9 ä¸ v1.0 çš„å¯¹æ¯”

| ç»´åº¦ | v1.0 (å½“å‰) | v2.0 (æ–°æ¶æ„) |
|------|-------------|---------------|
| **Agent è§’è‰²** | å‰ç«¯äº¤äº’å±‚ | æ™ºèƒ½å†³ç­–ä¸­å¿ƒ |
| **å·¥ä½œæµ** | å›ºå®šçŠ¶æ€æœº | åŠ¨æ€å†³ç­–æ ‘ |
| **å·¥å…·è°ƒç”¨** | ç¡¬ç¼–ç  | è‡ªåŠ¨å‘ç° |
| **æ•°æ®ç»„ç»‡** | æ‰å¹³ç›®å½• | è¯¾ç¨‹ä¸ºä¸­å¿ƒ |
| **åŠŸèƒ½èŒƒå›´** | ä»…ç”Ÿæˆæ•™æ¡ˆ | å¤§çº²+é¦–é¡µ+æ•™æ¡ˆ |
| **AI é›†æˆ** | æ—  | å®Œæ•´é›†æˆ |
| **å¯æ‰©å±•æ€§** | ä½ | é«˜ |
| **ç”¨æˆ·ä½“éªŒ** | å›ºå®šæµç¨‹ | çµæ´»äº¤äº’ |

---

## 8.10 ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**ç«‹å³è¡ŒåŠ¨** (ç”± @architect.mdc å’Œ @dev.mdc åä½œ):

1. **åˆ›å»ºç›®å½•ç»“æ„**
   ```bash
   cd /Users/yamlam/Documents/obsdiannote/copilot-custom-prompts/nfu-docu-weaver
   mkdir -p courses/.course-template/{outline,cover,lessons,output,templates}
   mkdir -p tools
   mkdir -p templates/{outline,cover,lesson}
   ```

2. **åˆ›å»ºå·¥å…·æ³¨å†Œè¡¨**
   ```bash
   touch tools/registry.yml
   # å¤åˆ¶ä¸Šé¢çš„æ³¨å†Œè¡¨å†…å®¹
   ```

3. **åˆ›å»ºæ–°çš„ Schema æ–‡ä»¶**
   ```bash
   touch schemas/course_schema.yml
   touch schemas/outline_schema.yml
   touch schemas/cover_schema.yml
   mv schemas/lesson_data_schema.yml schemas/lesson_schema.yml
   ```

4. **å¼€å§‹é‡æ„ç¬¬ä¸€ä¸ªå·¥å…·**
   ```bash
   cp generate_docs.py tools/doc_generator.py
   # æ·»åŠ  CLI æ¥å£
   ```

5. **ç¼–å†™æ–°çš„ Agent æŒ‡ä»¤**
   ```bash
   touch agents/lesson-weaver-v2.md
   # å¼€å§‹ç¼–å†™æ–°çš„ Agent æŒ‡ä»¤
   ```

---

**æ¶æ„å¸ˆ**: @architect.mdc  
**æ—¥æœŸ**: 2025-10-05  
**çŠ¶æ€**: ğŸ—ï¸ Ready for Implementation  
**ç‰ˆæœ¬**: v2.0
