
![|200](https://i.ytimg.com/vi/l9NX06mvp2E/hqdefault.jpg)
(Source: [youtube.com:  (217) Creating the Art of ABZU - YouTube](https://youtu.be/l9NX06mvp2E?t=4))

游戏概念有关案例
### **重点整理**

我叫 Matt Nava，我是 Giant Squid 工作室的创始人，也是游戏《ABZÛ》的美术总监。今天我想分享一下我们是如何克服在水下环境中创作艺术时遇到的独特技术挑战。

**核心技术挑战：**

我们面临四大技术美术挑战：
1.  **大量的交互式鱼类：** 屏幕上需要同时渲染和动画化多达1万条鱼。
2.  **大量的交互式海草：** 同样需要处理海量的、能与玩家和生物互动的海草。
3.  **支持快速迭代的地形系统：** 我们的关卡设计是不断变化的，需要一个灵活的地形工具。
4.  **可美术导向的体积光和大气效果：** 创造既真实又具风格化的水下氛围。

**解决方案：**

1.  **鱼的动画：**
    *   **问题：** 传统的骨骼绑定对于上万条鱼来说性能开销太大。
    *   **解决方案：** 我们放弃了骨骼，转而使用**静态网格体实例化 (Static Mesh Instancing)**，这是一种通常用于渲染草地的技术。我们编写了自定义系统，通过向每个实例传递少量数据，在材质中用**顶点动画 (Vertex Animation)**来实现游泳、咬合和转弯等动作，从而在不牺牲性能的情况下实现了大规模、高保真的鱼群动画。
    *   **游泳循环**是通过组合多个正弦波驱动的平移和旋转，并用遮罩将其效果限制在鱼的后半身来实现的。
    *   **咬合和复杂动作**则是通过一个**混合形状序列 (Blendshape Sequences)**系统完成的，它能按顺序播放多个姿势，创造出挤压拉伸等细腻的动画效果。
    *   **转弯**是通过一个包含多个弯曲姿势的**混合形状混合空间 (Blendshape Blendspace)** 实现的，我们甚至创建了“修正”混合形状来解决对角线混合时产生的拉伸问题。

2.  **海草系统：**
    *   **问题：** 海草叶子的数量比鱼还多，用关节或骨骼同样不可行。
    *   **解决方案：** 我们重用了为鱼类开发的**静态网格体实例化**系统。每一片叶子都是一个静态网格体实例，其动态效果由附着在更长的绳索模拟（作为茎干）上的简单绳索物理驱动。这让我们能实现每一片叶子与潜水员和大型生物的真实互动。

3.  **地形系统：**
    *   **问题：** 传统的雕刻/绘画式地形创作工具迭代速度太慢，不适合我们不断调整的关卡设计。
    *   **解决方案：** 我们开发了**地形高度补丁 (Terrain Height Patches)** 系统。我们将地形分解成一个个可移动、旋转、缩放的静态网格体“补丁”。美术师可以像摆放普通物体一样搭建关卡，然后我们的工具会将这些补丁无缝地融合成一个单一的高度图地形。这个方法大大加快了迭代速度。我们还用类似“地形图章”的思路来绘制颜色，使得整个创作流程更加直观和高效。

4.  **大气与光照：**
    *   **问题：** 如何在保持性能的同时，创造出既有深度感又清晰的水下世界。
    *   **解决方案：** 我们最终采用了简单的**线性雾**，但关键在于一个可调整的**衰减曲线**。我们将这个曲线数据以体积方式存储在空间中，定义了“过渡距离”和“远距离”。在两者之间的“剪影范围”内，我们会调暗场景光照，从而在不牺牲可视性的情况下创造出朦胧的剪影效果。为了引导玩家和突出重点，我们使用了“**传送门卡片 (Portal Cards)**”——这是一种带有特殊深度淡出材质的平面，可以“戳穿”雾气，照亮特定区域，这是一种非常高效且艺术可控的“假”体积光效果。



---

**影片逐字稿**

**讲者：Matt Nava**

[00:00] GDC 标志动画
[00:03] GDC 17, CREATING THE ART OF ABZÛ

[00:06] **Matt Nava:** 大家好。
[00:08] **Matt Nava:** 嗯，大家能听到我说话吗？
[00:10] **Matt Nava:** 好的。
[00:11] **Matt Nava:** 我为我的声音道歉，有点沙哑。但是，嗯……
[00:15] **Matt Nava:** 非常感谢大家来参加“Creating the Art of ABZÛ”的演讲。
[00:20] **Matt Nava:** 我是 Matt Nava。你们可能在这些游戏中见过我的作品。我是《Flower》和《Journey》的美术总监。
[00:26] **Matt Nava:** 在《Journey》发布后，我创办了一个新的工作室，
[00:28] **Matt Nava:** 去创作像那样的小型游戏，叫做 Giant Squid。
[00:32] **Matt Nava:** 我们的第一个项目叫做《ABZÛ》。
[00:34] **Matt Nava:** 《ABZÛ》是一款水下冒险游戏，
[00:37] **Matt Nava:** 在游戏中你可以探索海洋，
[00:40] **Matt Nava:** 里面有一个充满活力的世界，充满了基于现实生活中鱼类的鱼。
[00:46] **Matt Nava:** 对于那些没怎么见过这个游戏的人，我准备了一个小短片，
[00:49] **Matt Nava:** 展示一下它是什么样子的。

[00:50] （游戏视频片段播放）
[01:39] （游戏视频片段结束）

[01:40] **Matt Nava:** 所以，这款游戏很大程度上是受到了我作为一名水肺潜水员的亲身经历的启发。
[01:44] **Matt Nava:** 这是……右边是我，
[01:46] **Matt Nava:** 还有我们项目的主工程师，Brian Balamut，
[01:49] **Matt Nava:** 在一次水肺潜水研究旅行之后。
[01:54] **Matt Nava:** 我们游戏使用的是 Unreal Engine 4。
[01:56] **Matt Nava:** 开发花了三年时间。
[01:58] **Matt Nava:** 在团队规模最大的时候，我们有10名开发者。
[02:02] **Matt Nava:** 我们没有专门的动画师。
[02:04] **Matt Nava:** 这很疯狂，因为我们游戏里有大量的角色，大量的鱼。
[02:09] **Matt Nava:** 所以，水下设定带来了一个技术美术上的挑战，
[02:13] **Matt Nava:** 很多游戏都不需要去解决。
[02:15] **Matt Nava:** 我们需要处理大量的交互式鱼类。
[02:18] **Matt Nava:** 大量的交互式海草 (Kelp)。
[02:21] **Matt Nava:** 还有，我们需要一个能够支持快速迭代的地形。
[02:26] **Matt Nava:** 我们还需要有可美术导向的体积光和大气效果。
[02:30] **Matt Nava:** 所以，我将告诉你们我们是如何解决其中一些问题的。
[02:34] **Matt Nava:** 第一个问题，我们要做的是鱼。
[02:36] **Matt Nava:** 游戏中有超过200种基于世界各地真实物种的鱼类。
[02:41] **Matt Nava:** 在任何时候，屏幕上都可能有1万条鱼在游动。
[02:45] **Matt Nava:** 所以，我们第一次尝试
[02:47] **Matt Nava:** 制作这些鱼的方法是使用骨骼绑定 (skeletal rigs)。
[02:51] **Matt Nava:** 这是一种典型的角色动画制作方法。
[02:54] **Matt Nava:** 这是一个骨骼绑定。
[02:56] **Matt Nava:** 你可以看到，骨骼绑定非常棒的一点是
[03:00] **Matt Nava:** 你在各处都有关节，可以让你完全控制角色。
[03:04] **Matt Nava:** 你可以张开它们的嘴，做些类似那样的傻事。
[03:08] **Matt Nava:** 你真的可以做到让它做任何你想做的事。
[03:10] **Matt Nava:** 但问题是，当你有大量的角色时，
[03:12] **Matt Nava:** 因为要为所有的鱼更新所有的关节，
[03:16] **Matt Nava:** 成本非常高。
[03:19] **Matt Nava:** 另一个使用关节能做到的很酷的事情是，你可以程序化地
[03:22] **Matt Nava:** 动画化它们的脊椎，让它们沿着游动的路径弯曲。
[03:27] **Matt Nava:** 所以你可以看到这里的鲨鱼是使用骨骼绑定，
[03:31] **Matt Nava:** 并且可以在游动时弯曲身体。
[03:33] **Matt Nava:** 这对于游泳来说是一个非常非常重要的效果。
[03:37] **Matt Nava:** 当你有大量的鱼时，
[03:39] **Matt Nava:** 这些角色中的每一个都需要一个完整的关节骨架，
[03:42] **Matt Nava:** 大概有60到100个关节，每一帧你都必须为每一条鱼更新所有这些关节。
[03:47] **Matt Nava:** 所以你不是要更新1万条鱼，
[03:49] **Matt Nava:** 而是要更新1万乘以100个关节，这太疯狂了。
[03:52] **Matt Nava:** 所以我们必须想出一种不同的方法来达到我们想要的密度。
[03:57] **Matt Nava:** 我们的答案是静态网格体实例化 (static mesh instancing)，
[04:00] **Matt Nava:** 这是一种通常用于制作草地
[04:03] **Matt Nava:** 或其他地面植被的技术。
[04:05] **Matt Nava:** 我们实际上为《ABZÛ》编写了我们自己的这种系统的变体，
[04:10] **Matt Nava:** 它允许我们为每个实例输入少量数据，
[04:14] **Matt Nava:** 从而让我们能独立地动画化每一条鱼。
[04:18] **Matt Nava:** 但是我们不知道如何让一个静态网格体动起来，
[04:22] **Matt Nava:** 因为它没有关节，它不能弯曲或做任何类似的事情。
[04:26] **Matt Nava:** 所以我们必须想办法为鱼做出这些效果：一个游泳循环，
[04:29] **Matt Nava:** 一个咬合动画，
[04:30] **Matt Nava:** 因为游戏里有一个完整的生态系统，鱼会互相捕食。
[04:34] **Matt Nava:** 我们还需要能做出那个它沿着路径弯曲的效果。
[04:38] **Matt Nava:** 所以我来告诉你们我们是如何用静态网格体解决这个问题的。
[04:41] **Matt Nava:** 对于游泳循环，我们
[04:43] **Matt Nava:** 在鱼的材质中使用了顶点动画 (vertex animation)。
[04:48] **Matt Nava:** 当我为这些鱼做动画时，我发现要创建一个游泳循环，
[04:52] **Matt Nava:** 你只需要几个基本组件：一个左右平移，
[04:55] **Matt Nava:** 一个偏航旋转 (yaw rotation)，
[04:57] **Matt Nava:** 和一些沿着脊椎的平移旋转。
[05:00] **Matt Nava:** 我来展示一下它是如何运作的。
[05:01] **Matt Nava:** 这是在 Unreal 中，我们的游泳着色器 (swim shader)。
[05:05] **Matt Nava:** 这是一条巨型鲹鱼 (Giant Trevally)，
[05:08] **Matt Nava:** 在材质中，我们只是动画化顶点。
[05:11] **Matt Nava:** 这里你可以看到我们用一个正弦波做了一个左右移动的动作，
[05:14] **Matt Nava:** 它拉动了所有的顶点来回移动。
[05:18] **Matt Nava:** 下一个我们做的动作是
[05:22] **Matt Nava:** 围绕物体枢轴点的偏航旋转。
[05:25] **Matt Nava:** 你基本上可以看到，这是一个非常简单的旋转。
[05:30] **Matt Nava:** 然后我们有这些更疯狂的旋转，
[05:32] **Matt Nava:** 我们沿着脊椎平移旋转。
[05:35] **Matt Nava:** 所以我们得到了这种……滚动的
[05:38] **Matt Nava:** 效果，它看起来非常疯狂。
[05:41] **Matt Nava:** 所以你有这个滚动 (roll)，然后我们还有一个
[05:44] **Matt Nava:** 平移的偏航 (panning yaw)。
[05:46] **Matt Nava:** 这个也特别疯狂，因为你可以看到，
[05:49] **Matt Nava:** 离枢轴点越远，它变形得越厉害。
[05:52] **Matt Nava:** 所以如果你有一个很长的东西，这个方法就不行了，但对于游戏中的大多数鱼来说，这没问题。
[05:57] **Matt Nava:** 所以当你把所有这些加在一起时，
[06:01] **Matt Nava:** 并在这些曲线之间设置一个偏移，你就会得到一种游泳的动作。
[06:05] **Matt Nava:** 所以这里我们引入左右平移。
[06:08] **Matt Nava:** 加上旋转。
[06:11] **Matt Nava:** 然后引入滚动的平移旋转。
[06:17] **Matt Nava:** 和偏航。
[06:20] **Matt Nava:** 所以你得到的是这种黏糊糊的游泳鱼。
[06:23] **Matt Nava:** 所以我们做了一个小技巧，就是把这些平移旋转
[06:26] **Matt Nava:** 只遮罩到鱼的后半部分。
[06:28] **Matt Nava:** 所以在这里你可以看到，我只是在调整这个遮罩 (mask)，
[06:33] **Matt Nava:** 只把那些效果放在尾部。
[06:35] **Matt Nava:** 当你看到它的时候，突然间你就得到了一个
[06:37] **Matt Nava:** 没有任何关节并且是在静态网格体上的游泳循环，
[06:41] **Matt Nava:** 这非常酷。而且它看起来和用关节做的游泳循环一样好。
[06:45] **Matt Nava:** 非常棒的是，你可以用一个参数来控制这一切。
[06:48] **Matt Nava:** 所以你只需要输入一个速度变量，
[06:51] **Matt Nava:** 我们用鱼在模拟中的加速度来驱动它。
[06:55] **Matt Nava:** 不是速度，这是一个很重要的点，
[06:58] **Matt Nava:** 因为如果你用加速度来驱动，那么当它加速时就会有这些尾巴的摆动，
[07:04] **Matt Nava:** 然后它会滑行，这更像现实生活。
[07:09] **Matt Nava:** 所以，这是它在实际中的样子。
[07:11] **Matt Nava:** 这是游戏中的一个场景，
[07:14] **Matt Nava:** 大概有……你可以在角落里看到，我想是……
[07:17] **Matt Nava:** 大约11000条鱼。
[07:19] **Matt Nava:** 这些是巨型鲹鱼，它们都在用独特的游泳循环时间来游动。
[07:27] **Matt Nava:** 这完全是因为我们想出了这个静态网格体实例化系统，
[07:31] **Matt Nava:** 才能做出这么多鱼。
[07:33] **Matt Nava:** 当我们试图用骨骼鱼来做这个场景时，
[07:37] **Matt Nava:** 我们在屏幕上最多只能得到30条鱼。所以这是一个巨大的差异。
[07:43] **Matt Nava:** 我们要做的下一件事是咬合动画，
[07:46] **Matt Nava:** 这个只用着色器里的正弦波来做就有点难了。
[07:50] **Matt Nava:** 所以，我们最终想出了这个
[07:52] **Matt Nava:** 使用混合形状 (blendshapes) 的方法。我们使用了一系列的混合形状来让鱼咬合。
[07:58] **Matt Nava:** 所以在这里你可以看到，我们只有两个混合形状，
[08:01] **Matt Nava:** 一个张开嘴，一个把嘴向前伸。
[08:04] **Matt Nava:** 当你按顺序播放这些，你张开嘴，
[08:07] **Matt Nava:** 然后向前推，
[08:09] **Matt Nava:** 然后你闭上嘴，
[08:11] **Matt Nava:** 然后再把它拉回来，你就会得到这种挤压和拉伸 (squash and stretch) 的咬合动画。
[08:14] **Matt Nava:** 在这里你可以看到它由一些曲线驱动。
[08:18] **Matt Nava:** 我们加上了这种挤压和拉伸，这样当你放大时，
[08:21] **Matt Nava:** 你能清楚地看到这个动作，
[08:23] **Matt Nava:** 因为在游戏中很多时候，屏幕上有很多鱼，它们在屏幕上很小，
[08:27] **Matt Nava:** 所以你需要看到这种非常夸张的咬合动作。
[08:31] **Matt Nava:** 他在游戏里是这样的，砰！
[08:37] **Matt Nava:** 他是个坏梭鱼 (cooda) 啊。
[08:39] **Matt Nava:** 嗯，所以……
[08:41] **Matt Nava:** 我们想出了一个方法来……
[08:43] **Matt Nava:** 用这个混合形状序列的想法来做更复杂的动画。
[08:48] **Matt Nava:** 这是一个螃蟹的骨骼网格体，
[08:51] **Matt Nava:** 我们只有四个腿部的姿势，
[08:54] **Matt Nava:** 我们能够做出这个非常复杂的动作，
[08:58] **Matt Nava:** 完全只用混合形状。
[09:02] **Matt Nava:** 甚至这个小小的夹人动作，当潜水员靠近螃蟹时，
[09:05] **Matt Nava:** 它们会试图夹你。这很傻。
[09:09] **Matt Nava:** 我们也用这个来做其他事情，比如鸟的飞行循环。
[09:14] **Matt Nava:** 这个用了八个不同的姿势。
[09:20] **Matt Nava:** 它让我们能为在屏幕上很小的东西制作非常精细的动画。
[09:28] **Matt Nava:** 这真的很酷，真的是个很棒的技术。
[09:32] **Matt Nava:** 有趣的是，为了创建这些混合形状的姿势，
[09:35] **Matt Nava:** 我们创建了完整的骨骼绑定，
[09:38] **Matt Nava:** 只是为了创建那些姿势。所以，
[09:41] **Matt Nava:** 我们在这些很小的螃蟹上节省了大量的关节，
[09:44] **Matt Nava:** 它们本来每个会有41个关节，太疯狂了。所以这是一个巨大的胜利。
[09:49] **Matt Nava:** 我们要做的最后一件事，为了让这些鱼看起来更真实，
[09:52] **Matt Nava:** 是做一个转弯时的弯曲动画。
[09:54] **Matt Nava:** 所以在这里我们可以看到其中一条鲨鱼的弯曲是关闭的。
[09:58] **Matt Nava:** 你可以看到当它们急转弯时，它们像一块木板一样旋转。
[10:02] **Matt Nava:** 鱼越长，这个问题就越夸张。
[10:05] **Matt Nava:** 当它们追逐鱼的时候，它们真的会做这种扭曲的动作，
[10:08] **Matt Nava:** 所以我们必须想办法让它们弯曲。
[10:11] **Matt Nava:** 我们最终的做法是……
[10:12] **Matt Nava:** 使用一个混合空间 (blendspace)。一个混合形状的混合空间。
[10:16] **Matt Nava:** 你可以看到这里，我们把角色摆成这四种弯曲的姿势，
[10:20] **Matt Nava:** 并且为每一种姿势都做了一个中间姿势，
[10:24] **Matt Nava:** 这让我们能够有一种旋转的插值，
[10:28] **Matt Nava:** 当混合形状被应用到角色上时。
[10:33] **Matt Nava:** 我们也必须自己把这个写进引擎里。
[10:35] **Matt Nava:** 这里你可以看到它在实际中的样子，但是有一个问题，
[10:39] **Matt Nava:** 因为如果你完美地对齐这些方向，
[10:43] **Matt Nava:** 尾巴会弯曲，但如果你试图通过组合两个来做一个45度角，
[10:47] **Matt Nava:** 比如说向左和向上，那么尾巴会变得两倍长，
[10:51] **Matt Nava:** 因为混合形状是相加的。
[10:53] **Matt Nava:** 所以我们实际上必须创建一个第三个混合形状，
[10:56] **Matt Nava:** 它是一个负的混合空间，一个混合形状，可以把它拉回来。
[10:59] **Matt Nava:** 所以当我们同时做三个的时候，我们就能做到45度角。
[11:03] **Matt Nava:** 如果你只看那个修正的混合形状，它很疯狂，因为它把尾巴拉向相反的方向，
[11:09] **Matt Nava:** 这就做出了这个非常疯狂的鲨鱼。
[11:12] **Matt Nava:** 我们实际上创建了一个在 Maya 里的脚本，
[11:14] **Matt Nava:** 它可以自动生成那个姿势，因为我们不知道怎么建模那个。
[11:18] **Matt Nava:** 你可以看到这些是45度姿势的修正混合形状。
[11:26] **Matt Nava:** 所以当你把那个加到鱼身上时，
[11:28] **Matt Nava:** 你可以看到它在做急转弯时会有一个很好的转弯。
[11:32] **Matt Nava:** 它会弯曲它的身体。
[11:36] **Matt Nava:** 这对于让它们感觉更流畅非常重要。
[11:51] **Matt Nava:** 所以这就是我们如何得到大量的鱼，
[11:45] **Matt Nava:** 用相当高保真的动画来制作动画，比用骨骼要便宜得多。
[11:52] **Matt Nava:** 下一个我们要解决的问题是做海草。
[11:55] **Matt Nava:** 海草很疯狂，因为我们觉得我们已经有很多鱼了，
[11:58] **Matt Nava:** 但海草叶子要多得多，
[12:02] **Matt Nava:** 这太疯狂了。我们实际上最初也是从关节开始的，
[12:05] **Matt Nava:** 因为我们没有吸取教训。但是，
[12:08] **Matt Nava:** 那很快就行不通了。所以，我们用了另一种方法，用静态网格体。
[12:13] **Matt Nava:** 这是《ABZÛ》早期版本的一个视频，
[12:16] **Matt Nava:** 里面有一个非常静态的海草森林。
[12:20] **Matt Nava:** 我们做了这个非常简单的，当潜水员靠近时，叶子会被推开的动作。
[12:26] **Matt Nava:** 这并不是很理想，它真的没有捕捉到
[12:29] **Matt Nava:** 我们在真实潜水时看到的那种非常动态的，
[12:32] **Matt Nava:** 由潮汐等因素驱动的叶子的流体运动。
[12:37] **Matt Nava:** 所以我们最终的做法是，
[12:40] **Matt Nava:** 重复使用我们为鱼制作的静态网格体实例化系统，
[12:44] **Matt Nava:** 来制作这些叶子。但是我们不是用着色器来驱动它们，
[12:46] **Matt Nava:** 而是用非常简单的绳索模拟 (rope simulations) 来驱动它们。
[12:49] **Matt Nava:** 我们把它们附着在长长的绳索模拟上，作为茎干。
[12:52] **Matt Nava:** 所以你可以看到，通过这样做，我们实际上能够让它们
[12:55] **Matt Nava:** 让每一片叶子都与潜水员发生碰撞，
[12:58] **Matt Nava:** 以及一小部分较大的生物，比如这个蝠鲼 (manta ray)。
[13:01] **Matt Nava:** 你可以看到它在推开海草。
[13:05] **Matt Nava:** 你可以看到，我们实际上有大约35万片叶子在这个场景中，
[13:10] **Matt Nava:** 这个场景里还有大量的鱼。
[13:13] **Matt Nava:** 所以静态网格体实例化真的非常酷。
[13:17] **Matt Nava:** 下一件事是地形。
[13:20] **Matt Nava:** 我们真的不知道游戏的设计会是什么样的，
[13:23] **Matt Nava:** 在我们制作它的时候。我们必须弄清楚这些关卡有多大，
[13:28] **Matt Nava:** 我很快学到的一点是，
[13:31] **Matt Nava:** 用于创作景观的雕刻/绘画范式，
[13:35] **Matt Nava:** 对于迭代来说并不理想。
[13:37] **Matt Nava:** 如果你绘制一个地形图，
[13:39] **Matt Nava:** 让它变高或变低，
[13:42] **Matt Nava:** 比如说你做了一座山，然后你意识到这座山太大或太小，
[13:46] **Matt Nava:** 或者需要旋转，或者需要在世界中平移，
[13:49] **Matt Nava:** 这真的很难，因为你必须擦掉它，然后在另一个地方重画。
[13:53] **Matt Nava:** 这非常慢。所以我们想做的是，
[13:56] **Matt Nava:** 继续使用我们用来移动和旋转像岩石和其他物体的
[13:59] **Matt Nava:** 移动-缩放-旋转范式。
[14:02] **Matt Nava:** 我们想出的主意是地形高度补丁 (terrain height patches)。
[14:07] **Matt Nava:** 所以我们创建了一个静态网格体的库，
[14:10] **Matt Nava:** 它们看起来像是一块块的地形。
[14:13] **Matt Nava:** 然后我们只是把它们拼接在一起。
[14:16] **Matt Nava:** 这里有一个小小的演示。
[14:18] **Matt Nava:** 这是其中一个静态网格体高度补丁。
[14:21] **Matt Nava:** 你可以把它复制，创建一块地形。
[14:25] **Matt Nava:** 你可以看到它们是独立的网格体，但我们有一个工具，
[14:28] **Matt Nava:** 可以将一个高度图投射到它们上面。
[14:31] **Matt Nava:** 当你看到那个线框时，它现在是一个带有 LOD 和所有这些的高度图。
[14:36] **Matt Nava:** 所以，非常棒的是你可以创建景观的特征，
[14:40] **Matt Nava:** 复制它们，旋转它们，缩放它们，
[14:44] **Matt Nava:** 并且非常快速地构建你的景观，
[14:47] **Matt Nava:** 使用你用来移动场景中所有其他物体的相同工具。
[14:52] **Matt Nava:** 这真的帮助我们非常快速地创建景观和改变设计。
[14:58] **Matt Nava:** 另一个好处是，因为你使用相同的工具来移动你的景观和你的物体，
[15:03] **Matt Nava:** 你可以同时移动它们。所以，如果我，
[15:05] **Matt Nava:** 比如说有一块岩石，我需要让地形与它对齐，
[15:10] **Matt Nava:** 我可以创建与那块岩石对齐的高度补丁，
[15:13] **Matt Nava:** 然后我可以选择所有这些补丁和岩石一起，
[15:18] **Matt Nava:** 移动它们或复制它们，
[15:21] **Matt Nava:** 从而保持特征和地形的关联。
[15:26] **Matt Nava:** 你再也不用切换到绘画模式，这实际上是一个非常慢的过程。
[15:31] **Matt Nava:** 所以这对我们的工作流程是一个非常好的优化。
[15:40] **Matt Nava:** 这里你可以看到《ABZÛ》的一个关卡，放大来看，
[15:44] **Matt Nava:** 如果我把所有的岩石都拿掉，你可以看到我们用来制作这些区域地面
[15:47] **Matt Nava:** 的所有高度补丁。我们用了大量的它们来创建各种不同高度的地形。
[15:55] **Matt Nava:** 我们将这个想法扩展到使用移动-缩放-旋转工具
[16:00] **Matt Nava:** 来绘制地形的颜色。
[16:02] **Matt Nava:** 所以我们有了这个“地形图章 (terrain stamps)”的想法，可以放下颜色。
[16:06] **Matt Nava:** 我们甚至有可以像 Photoshop 画笔一样放下图章的样条线。
[16:12] **Matt Nava:** 所以，这样做的好处是，你不再考虑画笔的笔触，
[16:15] **Matt Nava:** 而是考虑特征。这是一个非常好的区别，
[16:20] **Matt Nava:** 在创建关卡时。
[16:22] **Matt Nava:** 最后一件事是，我们如何制作大气效果。
[16:26] **Matt Nava:** 我们做了很多测试，用光线步进 (ray marching) 和体积光之类的东西。
[16:31] **Matt Nava:** 我们发现，我们最终发布的是简单的线性雾。
[16:36] **Matt Nava:** 原因是这个更容易控制。
[16:40] **Matt Nava:** 我们只是为这个雾设置了一个可调整的衰减曲线。
[16:43] **Matt Nava:** 它看起来像这样。
[16:44] **Matt Nava:** 我们在空间中以体积方式存储了这个曲线。
[16:47] **Matt Nava:** 所以在一个房间里，你可能会有一个不同的衰减。
[16:52] **Matt Nava:** 我们做的就是，我们存储了这个……随着雾远离相机，
[16:56] **Matt Nava:** 我们存储了这个“远距离”数值，
[16:59] **Matt Nava:** 雾在那里变得完全不透明。
[17:02] **Matt Nava:** 我们存储了一个“过渡距离”，我们可以在那里设置雾的透明度。
[17:07] **Matt Nava:** 在这两个距离之间，我们创建了我们称之为“剪影范围”的东西。
[17:12] **Matt Nava:** 我们实际上是在调暗关卡中的灯光。我们只有非常简单的定向光和环境光。
[17:18] **Matt Nava:** 当我们调暗那里的灯光时，它会创造出一种朦胧的感觉。
[17:21] **Matt Nava:** 我在这里展示一下。这是不调暗灯光的情况，
[17:23] **Matt Nava:** 只是一个非常简单的线性雾。
[17:27] **Matt Nava:** 你可以看到远处的景象变得非常模糊。
[17:30] **Matt Nava:** 但当我们调暗那个过渡区域的灯光时，
[17:32] **Matt Nava:** 你就能开始看到这些朦胧的剪影。
[17:35] **Matt Nava:** 这真的很好地营造了在水下的感觉。
[17:38] **Matt Nava:** 你可以看到这是过渡距离开始的地方，
[17:41] **Matt Nava:** 而这里的剪影范围非常重要，
[17:45] **Matt Nava:** 因为我们可以调整它的宽度和远近。
[17:49] **Matt Nava:** 你基本上可以看到比雾更远的地方，
[17:51] **Matt Nava:** 通过看到这些剪影，同时还能保持这种大气的感觉，
[17:55] **Matt Nava:** 让人感觉像在水下。
[17:57] **Matt Nava:** 拯救了我们……我真的认为这拯救了我们设计这个游戏的，
[18:01] **Matt Nava:** 是创造了我们称之为“传送门卡片 (portal cards)”的东西。
[18:04] **Matt Nava:** 我们用这些来突出特定的剪影。
[18:08] **Matt Nava:** 这是一个非常简单的概念，它只是一个……
[18:10] **Matt Nava:** 一张你用的卡片。所以，这是游戏中的一个环境，
[18:15] **Matt Nava:** 它有一个有点难看到的隧道。
[18:19] **Matt Nava:** 所以我们放入这张传送门卡片，它本质上是一个平面，
[18:22] **Matt Nava:** 上面有一个材质，当相机靠近它时会淡出。
[18:29] **Matt Nava:** 我们有一些可以控制的衰减。
[18:32] **Matt Nava:** 我们所做的就是我们缩放这些东西，
[18:35] **Matt Nava:** 让它们与一些关卡几何体相交。所以，
[18:37] **Matt Nava:** 你可以看到我们用它覆盖了这扇门。
[18:41] **Matt Nava:** 神奇之处在于，当你开始调整这个深度淡出参数时，
[18:45] **Matt Nava:** 它基本上会随着靠近场景深度中的物体而淡出。
[18:50] **Matt Nava:** 它所做的就是创造出这种假的雾效，
[18:53] **Matt Nava:** 照亮一个区域，并突出一个传送门。
[18:57] **Matt Nava:** 所以没有它，你甚至看不到前进的路。
[19:00] **Matt Nava:** 当你打开它时，你实际上可以看到你要去哪里。
[19:03] **Matt Nava:** 所以我们实际上用这些来引导玩家，
[19:06] **Matt Nava:** 这非常重要，因为那个基础的体积雾已经帮我们很多了，
[19:10] **Matt Nava:** 但我们需要突出特定的区域。
[19:13] **Matt Nava:** 快速带大家看一下一个场景是如何构建起来的。
[19:16] **Matt Nava:** 我们有这个工作模式的灯光，
[19:19] **Matt Nava:** 它让我们能在一个均匀光照下看到整个场景，
[19:22] **Matt Nava:** 这样我们就能看到我们在做什么。我们可以打开和关闭它。
[19:27] **Matt Nava:** 我们做的第一件事是添加体积环境光和定向光。
[19:31] **Matt Nava:** 所以，我们只有一个非常简单的定向光和环境光，
[19:35] **Matt Nava:** 没有太多复杂的东西。但我们在场景的独立区域存储了它们的颜色和亮度。
[19:40] **Matt Nava:** 所以你可以看到在远处的门周围有局部对比度。
[19:44] **Matt Nava:** 然后我们也对雾做了同样的事情，
[19:47] **Matt Nava:** 用剪影范围来帮助我们看到……
[19:50] **Matt Nava:** 看得更深，在我们想看的地方，比如远处的门。
[19:54] **Matt Nava:** 你可以看到更远。
[19:57] **Matt Nava:** 然后我们添加传送门卡片来突出山脊之类的东西，
[20:00] **Matt Nava:** 所以你实际上可以看到，这是我们放置这些卡片的地方。
[20:06] **Matt Nava:** 最后我们添加了光线，我们的光线技术
[20:08] **Matt Nava:** 基本上和我们的传送门卡片技术是一样的，
[20:11] **Matt Nava:** 只是自动放置的，非常细长的传送门卡片，
[20:15] **Matt Nava:** 它们会上下缩放地动画。这就是我们做灯光的方式。
[20:21] **Matt Nava:** 所以，这基本上就是我们如何创造……
[20:25] **Matt Nava:** 《ABZÛ》中的环境和鱼，以及我们如何解决一些
[20:28] **Matt Nava:** 水下环境带来的技术挑战。
[20:34] **Matt Nava:** 非常感谢大家。
[20:36] （掌声）
[20:47] **Matt Nava:** 所以我想我们可能有时间回答一些问题，
[20:50] **Matt Nava:** 如果有人有什么问题，可以走到麦克风前。
[20:54] **观众1:** 嗨。
[20:54] **Matt Nava:** 嗨。
[20:55] **观众1:** 游戏很美。
[20:57] **Matt Nava:** 谢谢。
[20:58] **观众1:** 有一件事我不太明白，
[21:01] **Matt Nava:** 就是雾是如何做到体积感的，
[21:04] **Matt Nava:** 意思是你可以看到远处的那扇门。
[21:07] **Matt Nava:** 你是如何在雾中“戳”出一个洞的？
[21:09] **Matt Nava:** 疯狂的是，每8x8米我们有一个体积雾的体素，
[21:14] **Matt Nava:** 所以数据非常粗糙，
[21:18] **Matt Nava:** 但在那8x8米中，我们存储了灯光的颜色，
[21:21] **Matt Nava:** 还有衰减的曲线。
[21:24] **Matt Nava:** 所以，它不会随着距离累积。
[21:27] **Matt Nava:** 它不像一个参与介质模拟，
[21:32] **Matt Nava:** 我们实际上在累积。它只是一个简单的线性衰减。
[21:35] **Matt Nava:** 所以即使某个东西在很远的地方，如果它有一个被推远的曲线，
[21:40] **Matt Nava:** 它也会显示出来。
[21:42] **Matt Nava:** 所以，这其实比看起来要简单得多。
[21:46] **Matt Nava:** 如果那说得通的话。
[21:48] **观众1:** 是的。我能再问一个小问题吗？
[21:49] **Matt Nava:** 当然，当然。
[21:50] **观众1:** 如果你能稍微谈谈
[21:52] **Matt Nava:** 鱼的寻路 (pathing) 和集群 (flocking) 特性。
[21:56] **Matt Nava:** 我当然知道它们是如何独立动画的，但它们作为一个群体是如何动画的？
[22:00] **Matt Nava:** 它们如何与玩家互动？
[22:02] **Matt Nava:** 是的，那是一个我们必须弄清楚的巨大挑战，
[22:04] **Matt Nava:** 如何让行为表现正确。
[22:06] **Matt Nava:** 这是我们的主工程师 Brian，就是那个穿着潜水服的人，
[22:10] **Matt Nava:** 解决的一个大挑战。
[22:12] **Matt Nava:** 基本上这是一个惊人的模拟，
[22:15] **Matt Nava:** 每条鱼都有对其他所有鱼的感知，
[22:19] **Matt Nava:** 它们都在……不仅是在空间上分段，
[22:23] **Matt Nava:** 这样靠近的鱼会知道彼此，
[22:27] **Matt Nava:** 但会忽略远处的鱼。
[22:30] **Matt Nava:** 我们也确保它们在内存中是相邻的，
[22:33] **Matt Nava:** 这样它们可以快速查找彼此的位置。
[22:36] **Matt Nava:** 所以我们根据鱼彼此的距离，不断地在内存中调整鱼的位置。
[22:42] **Matt Nava:** 这让我们能够让每条鱼都感知到周围大量的鱼，
[22:47] **Matt Nava:** 然后与它们对齐，或者追逐它们。
[22:49] **Matt Nava:** 当你创建了一大堆这样简单的规则，比如只是“对齐”或“避开”，
[22:53] **Matt Nava:** 然后你把一大堆这些原子化的鱼放进场景里，
[22:57] **Matt Nava:** 那么这些鱼螺旋游动的行为就会自然涌现出来。
[23:00] **Matt Nava:** 这是一个非常酷的现象，这实际上也是鱼类游泳的方式。
[23:03] **Matt Nava:** 所以我们研究了很多真实的鱼类行为。
[23:06] **观众1:** 太棒了，谢谢。
[23:08] **Matt Nava:** 谢谢。
[23:11] **观众2:** 嗨。
[23:11] **Matt Nava:** 嗨。
[23:12] **观众2:** 很棒的游戏。我想知道你们是否尝试过水下焦散效果？
[23:18] **Matt Nava:** 嗯。
[23:19] **Matt Nava:** 我们的焦散效果……
[23:20] **Matt Nava:** 游戏里有焦散效果，但它完全是假的。
[23:23] **Matt Nava:** 我们当时想：“我们能做那种很酷的光线追踪之类的东西吗？”我们说：“不，
[23:27] **Matt Nava:** 那太疯狂了。”我们用的是……
[23:29] **Matt Nava:** 在 Unreal 中叫做光照函数 (light function)，或者也叫 gobo 效果。
[23:34] **Matt Nava:** 基本上它就是一个带有几个滚动遮罩的动画贴图，
[23:41] **Matt Nava:** 就是这样了。
[23:42] **Matt Nava:** 是的，没什么疯狂的。
[23:44] **观众2:** 这正是我想要的答案，谢谢。
[23:45] **Matt Nava:** 谢谢。
[23:46] **观众3:** 嗨。我是你作品的忠实粉丝，
[23:48] **Matt Nava:** 谈到《Journey》，你们有一个潜艇场景，
[23:51] **Matt Nava:** 尽管那里没有水。
[23:54] **Matt Nava:** 所以，在那个潜艇场景和《ABZÛ》之间，
[23:57] **Matt Nava:** 方法上有什么不同？
[24:01] **Matt Nava:** 嗯，在《Journey》中，你说的那个部分，我们试图捕捉那种
[24:04] **Matt Nava:** 水下环境的感觉，
[24:07] **Matt Nava:** 比如深处有生命的想法。
[24:10] **Matt Nava:** 但我们并没有试图去解决，比如说，
[24:12] **Matt Nava:** 那些你会在海洋中看到的真实效果。
[24:18] **Matt Nava:** 所以《ABZÛ》更像是……
[24:19] **Matt Nava:** 试图更真实地模拟你在水下看到的效果。
[24:25] **Matt Nava:** 所以它更多地是受到了海洋真实情况的启发。
[24:29] **观众3:** 好的，谢谢。
[24:30] **Matt Nava:** 好的。
[24:31] **观众4:** 嗨。
[24:31] **Matt Nava:** 嗨。
[24:32] **观众4:** 我对你们的一些材质很好奇，
[24:34] **Matt Nava:** 你们是尝试不用贴图来处理它们，
[24:36] **Matt Nava:** 还是说实际上在鱼上用了贴图，
[24:39] **Matt Nava:** 如果那是一种更高效的方法，或者你们对此有什么想法？
[24:43] **Matt Nava:** 是的，我们……游戏里有大量的材质。
[24:46] **Matt Nava:** 那个……那个想法是创造不强调贴图的材质。
[24:51] **Matt Nava:** 所以它们确实到处都用了贴图，但是它们非常微妙，是低对比度的。
[24:56] **Matt Nava:** 我们做了很多工作来确保几何体的棱角分明的形状能清晰地展现出来，
[25:03] **Matt Nava:** 来赋予游戏独特的风格。
[25:05] **Matt Nava:** 我们想用这个来创造更有标志性的鱼。
[25:10] **Matt Nava:** 我们的灵感来自真实的鱼，
[25:12] **Matt Nava:** 但它们……我们想确保它们真正代表了
[25:16] **Matt Nava:** 每个人心中理想化的鱼的形象，
[25:18] **Matt Nava:** 这样它们就更容易被记住。
[25:21] **观众4:** 是的。
[25:21] **Matt Nava:** 好的。
[25:22] **观众5:** 嗨。
[25:23] **Matt Nava:** 嗨。
[25:23] **观众5:** 你提到了用地形图章在地形上过渡不同的颜色。
[25:28] **Matt Nava:** 我注意到在玩游戏时，有些地方的颜色过渡非常柔和。
[25:33] **Matt Nava:** 那是用了同样的技术，还是用了某种比如点光源系统之类的？
[25:38] **Matt Nava:** 是的，所以我们有……有一些柔和的区域，
[25:40] **Matt Nava:** 我们只是让颜色影响一种材质类型。
[25:44] **Matt Nava:** 所以那就像是在那个类型上做纹理。但之后我们在材质类型之间有硬过渡。
[25:49] **Matt Nava:** 所以比如说，草地和沙子之间从来没有软过渡，
[25:54] **Matt Nava:** 但在沙子内部，可能会有蓝沙平滑过渡到白沙之类的。
[26:01] **Matt Nava:** 所以我想我们还有时间回答最后一个问题，如果……
[26:05] **Matt Nava:** 你有问题吗？
[26:06] **观众6:** 非常感谢。
[26:08] **Matt Nava:** 我很惊讶你们团队里没有专门的动画师，
[26:11] **Matt Nava:** 但我很好奇你们团队里图形……
[26:13] **Matt Nava:** 美术师、程序员和游戏设计师的人数。
[26:17] **Matt Nava:** 好的。我们团队规模最大的时候有10个人。
[26:20] **Matt Nava:** 我们有一个环境美术师，他帮助构建网格体和鱼。
[26:24] **Matt Nava:** 我也做那些工作，我做了大部分动画。
[26:28] **Matt Nava:** 我们在开发后期请了一个合同动画师来帮助我们收尾。
[26:34] **Matt Nava:** 我们现在已经雇了一个动画师了，因为我们吸取了教训。
[26:37] **Matt Nava:** 嗯。
[26:38] **Matt Nava:** 所以希望我们未来不用在这方面花这么多精力了。
[26:42] **Matt Nava:** 我们有一个很棒的图形工程师，
[26:45] **Matt Nava:** 他做了所有那些灯光之类的工作。
[26:48] **Matt Nava:** 好的。
[26:49] **Matt Nava:** 好的，各位，非常感谢。
[26:51] （掌声）
[26:55] （GDC 结束画面）

---

