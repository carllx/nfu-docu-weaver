
![|200](https://i.ytimg.com/vi/ua4zKWJg22g/hqdefault.jpg)
(Source: [youtube.com: Explanation on why/ (50) 2022 Audio histogram - TouchDesigner Tutorial - YouTube](https://youtu.be/ua4zKWJg22g?t=1078))


Transcript:
(00:05) hello and welcome to my very first touch designer tutorial you might hear that my English is not that great but I'll do my best in hiding my Belgian accent just a little today I'll be building an audio histogram which allows you to visualize the frequency content of the song over time and as I'm not that good at multitasking or combining both building and explaining at the same time I came up with another technique that allows me to First intuitively build a nice project or I can just try out a lot of interesting things and once I've come up
(00:45) with something nice I'll just rebuild the chaotic end result in a more structured way and then undo it completely in order to start recording and explaining everything step by step in a structured way while redoing everything so hopefully this allows me to make these tutorials a bit faster while allowing you to still follow along so without any further Ado let's start building or rebuilding so undo everything this is what I've done but been did so we start off with our first stop it's a line it's laying on the x-axis from zero to one
(01:32) but mostly we want to work towards the set direction as it's more used in for depth so I will also activate this toggle um showing you only the parameters that I've changed from a default operator if you edit everything is at default but by toggling this one you'll only see the things that I actually changed so I can more easily explain what I did so for now it's a default but as you can see if I redo you can also follow up here next parameter change is point B so this is point B it's lying on the laying on the x-axis so let's redo
(02:17) moving point B to the origin and next moving it down the z-axis to -5 what else did I do I increased the number of points giving it some more detail so now the line is made up of 200 points um this will give us some more detail to work with so you can actually see the frequency uh going up and down and being registered over time for each frequency so next at a copy what did I do here increased the number of copies to 50 but as you can see if I open up the viewer you only see one that's because all 50 copies are laying
(03:04) on top of each other so next give them some offsets down the X axis so they're nicely spread out next up convert to the Chop domain as this is where we want to do the replacing of the t y Channel and the Ty channel will hold all the frequency information that we will be obtaining soon but for now as you can see there is no frequency information being registered or being used to give all these lines some movement and just for demonstration purposes I will continue adding an info shop making it point due to this job so it can get
(03:55) its length so only get its length and start instead of starring it and getting all its information so we only get its length next up we add a pattern chop and we let's see what happens so if we make it points it's length we make it points to the length we see that this if we middle Mouse button click we see that it has 10 000 samples if we go here do the same we see that it also has ten thousand so it follows along I will toggle this one on again so you can see what I changed um okay so next I gave it some more
(04:43) Cycles to make it more interesting it will become apparent a moment decreased the amplitude uh give it some face apps time not seconds is actually the time that your designer project is open already so as it's longer and longer open um this value will increase and the phase will increase as well so all this sign stuff is moving along anyway let's continue and replace um connect the first one connect the second one and next I'll probably move to channel where I change the channel name to Ty and by doing so the replace
(05:35) chop actually understands that I want to replace this green t y Channel with the one I created down below and lo and behold or however you say it um you see that the flat Ty channel has been updated by the newly created Channel next up we reconvert back to the subdomain in order to visualize or end result and as you can see we have some thing going on not flat lines but actually some dummy frequency just for demonstration purposes just to show you what needs to be done and this is replacing the Ty Channel so that's basically the thought process
(06:26) or the the concept behind the frequency analyzer thing that I made we will keep these uh operators the rest are just for demonstration purposes so let's next continue with the actual audio file that we're going to visualize so add in an audio file in chop um I'll give it my own song which I'll try to leave in the description if I know how to do so um so we want to listen to what we're doing so we add in an audio device thing and make it point to cable input which I'm using for recording this anyway let's continue
(07:26) edit select chop just to select one of the channels we don't need to analyze uh the frequency spectrum of both channels so for this one I will select Channel only channel one probably so we only select channel one next up we add an audio spectrum and most of the time I give it some more high frequency boost because maybe this song I created was a bit bass heavy but uh generally it gives a more um or a better visualization of the high frequencies next up we do a resample because as you can see our middle Mouse button click we
(08:14) now have 22 22 000 samples which is not necessary so therefore um let me go to the common page I deactivate the time slice and this makes the method um available again or active so I can change it to New rate new interval also the unit values change it to Absolute start and end don't use seconds but I'll change it to samples so I can update the end to 199 meaning that I obtain only 200 samples which is more than enough for now to represent the audio Spectrum so what's next um a shuffle what this one will be doing I will
(09:08) update the method to split each and samples actually and each three samples in this case so we're going to split this whole channel into equal chunks of three samples each if we middle Mouse click we see that this gives us like 67 channels of three samples each but we want some more control over this so therefore we will add in an info shop again make it point to the resample only get its length so we now know how long it is 200 as we said it should have 200 samples go ahead by adding a constant and updating it to 50
(09:58) and add in a mouse connect both and then combine both jobs by dividing this gives us a length of four which we want to use for the N value so if we export it activate viewer export it to the end value you'll see now that if I middle Mouse click that indeed I only have 50 channels which I can control now with this constant chop 50 channels of four samples each so that's the thing we want a bit more control over everything so let's continue again next we actually want to analyze the maximum so now we are just looking at average but we go
(10:47) for the maximum of all of these channels which is actually representing the frequency bins so now we have you have to imagine that we now are having 50 frequency bins being registered or generated in this job but we only want to obtain a maximum so that's what we do in the analyze chop next up is the trial or Trail I don't know I'm sorry I I don't know how to pronounce it half of the time but anyway um we just register it for a period of time you can after it still increase this window length to have a more um to register a longer period of time
(11:39) of frequency content but anyway the default is fine for now Um this can stay at its default as you can see afterwards we also add in a stretch chop so we can just reverse it and you can see they're running the opposite way this is so the frequency is running towards the minus Z direction or away from the viewer but you can also quickly change this afterwards to make the frequency content move to yourself foreign so next what did I do um stretch uh apparently I want the length again of this stretch um chop so we can export it
(12:32) both this length and this um number of rows this is actually so you can see that if I undo and redo and undo and redo I'm exporting this job towards the copy you can see that it's now also controlling the copy soap so if I update this constant it will give me more channels in this job but I will equally or in the same time it will also give me more number of copies and more lines that's what we want same for the info for the this info note or operator I'll export it to the line so that I control the number of points of this line so by
(13:27) referencing or exporting these two chops we can easily control the number of lines in parallel or the length of lines or how detailed they are um let's continue again we do a shuffle and this time we go for the sequence all channels method meaning that all these 50 channels are now being placed um one behind another so you get one long Channel which we can then rename and let's see what I did next so okay we renamed this to Ty sounds familiar uh why because I also in the meantime add a little replays so that I can use this
(14:25) created Channel with all our frequency data and I can replace the Ty the flat t y as I said I was going to reuse it I'll reuse this shop I connect it and because I already renamed it to Ty and if I connect it the flat one will be replaced by an actual channel that represents or holds the frequency data so next if we add a chop two we can see that it's not like the dummy frequency movement that is actually representing Our Song with some artifacts which we are going to fix later on but anyway let's continue the default
(15:19) um geometry and rendering uh sequence so add a null so we can add in a geometry next is a camera viewport which is a nice addition I think it's only available in the newest version of touch designer which is 2022 and something but you'll find it under Tools and Camera viewport if you drag this in you'll have a controllable and easy controllable camera um which will see soon so next up um I create a render top that's the render top now it holds the cam one which is default but I didn't add a regular camera I added the camera
(16:09) viewport so you'll see me at the camera viewport and now something appears it's still quite dark but later I'll also add a line material to give it a wide color um next up probably I updated the camera viewport because now for the rendered top it's pointing to a render that's inside of it but we don't need the rendered top inside of it we can just use this one so this one gets updated to render one and now they're pointing towards each other and we can see that indeed the see that I already created now now I continue apparently by adding a line
(17:03) material um if you go to the geometry you need to edit under this field or this parameter so that's exactly what I did and now you can see it's changed to a white color and if I also activate the viewer for the camera camera viewport and let's drink a little bit okay so now we have control over the audio analysis and you can give it some spin and you can make it spin forever if that's what you like but that's basically the end result with some undesired artifacts which are actually let's try to visualize why it
(17:54) is this so each time um this line yeah each line Sorry each time this line is going back to the front it's it's still connected because we use a line material so does that um in for the Z data of these lines is represented here so each time we go back we actually if you can can compare it with a CRT an old television each time a line is drawn it goes back to the beginning and it deactivates so the the going back of the drawing is not registered on the screen this is basically the same so we need to take care of
(18:46) is going back and disable the the drawing of the line each time you move from far to near on the z-axis so therefore let's see what I've done to remove this artifacts we go back to the shuffle one we get its length we add the pattern chop let's see what I did here um we change the type to constant uh we make its length probably the same length as the one above um we create three channels which you can find in a second tab so we create three channels RGB to make it white because by default the amplitude is one so RGB at one is white
(19:44) so that's enough for this one let's undo so um RGB is what we need next we will also need an alpha channel so copy this one it also or it already has the correct length because it's also pointing to the length but we don't need RGB we just need um yeah we need a square that's down spoiler um so we give it a channel name of a but we also gave it a type of square and I if you just give it these parameters I will show you in a bit but then you'll get something like this but let's continue just to show you what I want to do with with it with this
(20:35) sorry um if I then create a merge I can use this one and I can add the newly created channels to it so let's add the RGB and Alpha so if I now view this one and right click again and number of crafts all in a single one I can make it a big bit a bit bigger sorry so if I zoom in you can see now that each time when I go from back to front back to front the alpha which is this uh Square Channel or signal the alpha is put to zero so the the drawing when going from Back to Front is actually um disabled so that's the whole idea behind fixing
(21:36) this um issue it's not an issue it's just as as it's designed but we still need to fix it um again let's create another another job too we don't want to use only the txtydz channel but we also added some additional channels so let's add them RGB and we need to map them to cd012 and also if I make it a bit better a bit a bit bigger also add CD3 for the alpha Channel there you go so now this one has some more information um contained within it except the XYZ components but also now it holds RGB Alpha so now we can replace the original one
(22:40) that doesn't have it with the one that has it so let's replace it undo the old one redo and the new one is being rendered but still we see that we have the artifacts that's because we need to use a pyramid parameter of the line material so if we go to the common Tab and we activate discard pixels based on Alpha we are actually discarding the the lines that are connecting back to front because they are having a alpha of zero so if I activate this one you will see that magically all the lines have disappeared which is what we want
(23:29) and then you have the end result again which you can spin and do whatever you want with you can give it another color in the line color tab you can give it a single constant color or if you go farther back you can give it a more black one so it fades in you can start playing with the rows the length um you can as well use the stretch so if I now for example reverse you see that the music you've got the frequency for the music um is reversing it's going away or it's coming towards you so that brings us to the end of this tutorial and as a
(24:18) homework if you want you can still of course map some parameters to the parent component so you can start modifying the offset for example between the lines individually so it becomes a bit more dense or a bit more spacious if that's still some homework for you so hopefully you enjoyed my first tutorial and hopefully see you in the next one [Music]