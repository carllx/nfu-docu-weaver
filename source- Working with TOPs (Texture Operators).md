
![|200](https://i.ytimg.com/vi/xsXBO6JQVWU/hqdefault.jpg)
(Source: [youtube.com:  (3) 10 - Working with TOPs - TouchDesigner Tutorial: Beginner Crash Course - YouTube](https://youtu.be/xsXBO6JQVWU?t=682))

Transcript:
(00:01) - [Instructor] So now that we have some of the basic fundamentals of TouchDesigner together we're going to start building a few things and we're going to start one operator family at a time and incrementally kind of add complexity and get you a little bit more comfortable with each operator family. So the first thing we're going to start with are TOPs.
(00:16) And like we said, tops are texture operators and they'll probably be the basis of many projects that you're going to be doing. So in this example what we're going to do is put together just a really simple compositing network using a bit of generative text, a little bit of images that we're going to load in.
(00:32) And then we're going to composite them and kind of make a pseudo simple little infographic display. It'll kind of show you a little bit of the fundamentals of building networks. So the first thing we're going to do is create three movie file in TOPs. So I can open the app create dialogue, go to movie file in.
(00:49) Or like we said, previously hit tab, type movie and it's already highlighted and ready to go. And then what I want to do is go to each one. I'm going to go to the file parameter click the plus button to get the file picker. And then what I'm going to use is just some of the stock content inside of TouchDesigner.
(01:13) And I'm going to use the three images of butterflies. So what I'll do is I'll grab the first one in my first movie file in, go to my second movie file in same process but I'm going to grab the second one. And finally in my third movie file in I'll grab the final butterfly. Now, one trick that'll be really helpful for when you're building your networks is what you'll see is if we zoom into one operator, we have our texture here which if we don't know what resolution it is just like we learned previously, we can middle click.
(01:43) We can see size is 512 by 512. And we can see that texture here at the square texture black background, butterfly and metal, but we have a lot of unused space in the actual op viewer. So a nice little trick you can do is if you come to the bottom right corner of the actual operator where you would go to resize it and you click it what it will do is optimize the size of the operator's viewer to better match the actual aspect ratio of your image.
(02:09) So I'll just go ahead and just do that really quick on all three operators. And then what I'm going to do next is start making a little bit of text. So I'm going to double click open the OP create dialogue and I'm going to grab a text top and I can do that even faster by hitting tab, typing text, oops not test text, hitting enter.
(02:32) And finally I'll do the same thing and create a third one. Now, each one of these butterflies is going to have a little label under it. So what I'll do is I'll just kind of reorganize this network a little bit to better represent how things are going to work. And then we'll go ahead and we'll start with our first text TOP here.
(02:54) Now text TOP has a ton of features and functionality changing fonts, colors, but we're going to keep it simple today. So what we're going to do is go to the first text parameters page, go to the text parameter itself, double click and delete Derivative from in there. And then I'm going to type in butterfly space one.
(03:16) And then what I want to do is similarly by default this resolution of 256 by 256 not really conducive for our simple words. I mean, really what we should do is just have a little box that contains our word butterfly one. So if I wanted to change the resolution of a an operator like this, that's a generator operator and that's what we call any of the operators inside of the OP create dialogue that are darker.
(03:40) So you can see here we have OP viewer which is a little bit darker than the open color we have substance which is darker than a slope. Similarly text is darker than a tile and the darker operators and all the families are generators. So in the case of TOPs if I want to change the resolution of the generator I can go to its common page in the parameters and we'll see resolution is available to be changed.
(04:04) And by default, it starts at 256 by 256. So what I can do is two things here. I can either, maybe I have a plan and I know what that resolution needs to be. So I can just say, Oh well maybe I'll do a 512 by maybe 200. So I could do something like that maybe I know, but if I don't know we can go back to using our value ladder.
(04:27) So I can say, well, maybe I'll just middle click on the Y parameter here. And I want to move by tens so I can just move and scrub through different resolutions on the Y axis until I think to myself, well, you know what? A hundred seems, okay it has enough size for my text and 512 I chose that for my X because then it matches the resolution that I have on the X axis of my butterfly here.
(04:56) So now I'm going to go ahead and apply the same properties to my other texts. So I'm going to go here. I'll type in butterfly 2 I'm going to go to common page, change the resolution to be 512 by 100. And I'll go to my third text and I'll change that to be butterfly three. And then similarly on the common page I'll make this 512 by 100.
(05:35) Now let's say we got in this position where we set up all of these, but Oh wait, we forgot. We wanted to change the color of all of our texts to something else. A really useful thing you can do is grab multiple operators in your selection and change the parameter of one of them and have that applied to all of them if they're the same kind of operator.
(05:52) So in this case, because I have three text TOPs what I can do is first start with one of my text TOPs, hold shift and then click on my other two. That way you can see they have a yellow border. And my main text TOP has the green border. I can go to my color and say, maybe instead of a font of white what I can do is either change the RGB values individually or I can use this nice little color picker gadget by clicking on the white color.
(06:21) It'll open up a little color picker with HSV and RGB but let's say I want to make them red. And you can see once I clicked red, it put in a one for the red channel and zero and zero for green and blue. And you could see it did that actually for all of them. So that's a really helpful trick that you can do when working on your networks.
(06:41) So now that I have kind of my base of my little data is set up here in my info display. I got to start compositing. I gotta start adding these things to a bigger canvas. So the best way to start with this is I always say, work at a, the smallest resolution you can work. And then only at the end of the kind of workflow, composite everything onto your big canvas.
(07:03) So if our big canvas is gonna be a 1920 by 1080 screen, I don't wanna go straight from my butterfly onto a 1080, then put this onto a 1080 then all, go through every single one put them on a 1080 and add them together. I'm actually just going to start and group them into smaller chunks and then composite all those chunks on 1080P canvas.
(07:26) So the way we do this is using another useful operator it's called a constant TOP. And a constant TOP is essentially a TOP that gives you a color and a resolution. And for many usages you might use this just as a color but it's actually very useful in compositing because what you can do is make little canvases and then either over or composite your elements onto them.
(07:50) So in this case, I know that I have 512 by 512 butterfly and 512 by 100 texts. So what I would want is a 512 long by 612 canvas per butterfly texts combination. So each group of my butterfly plus the text under it should be 512 wide and 612. We got that by adding the Y of the butterfly with the Y of the text.
(08:18) And that's how we got 612. So what I would do is go to my constant. Similarly we can also check the OP create constant is a generator. You can see it's darker. So that means if I want to change its resolution from the default 256 by 256 I can go to common changes resolution like we said to 512 by 612. Now I also don't want it to have a white background.
(08:44) So what I'll do is go to constant. I'll zero out all of my channels so it's black but then I'll also zero out the alpha. So that it's essentially not only black but it's also nothing. So that if later there's more advanced compositing happening I don't have to worry about having black boxes appear inside of my canvas.
(09:03) So now that I have that I can start compositing and there's a number of different ways we can composite and we'll look at all of them. So the first one, which in our case is going to be the easiest is going to be using an over TOP. And over TOP is great for things like this that are simple where you just kind of want to put one thing over another and do that as quickly and as easily as possible.
(09:24) And you can see over has two inputs. And what it does is it takes the first input and puts it over the second input. So in this case, what I want is to have my canvas as the second input because that's going to be my base layer. And then I want to put the butterfly on top of it. Now, when you do that one thing you're going notice first 512 by 612 resolution is taken by the over.
(09:50) And that's because our fixed layer parameter inside the overtop is set to input two. And this fixed layer parameter on the over TOP only allows you to choose between input one and two. And essentially what it does is it tells the operator which of the inputs to take the resolution from which is going be the base layer that doesn't move.
(10:09) It takes the resolution from that. And then all the other parameters affect the other layer that isn't the fixed layer. So in this case, we have the pre fit which we'll talk about as well as some basic transforms. But in this case, we actually want the fixed layer to be two which is the default. That way it takes the resolution from our canvas.
(10:27) But then you'll see that our butterfly is getting stretched because by default, the pre fit overlay set to fill and what the pre-fill overlay is is it basically gives you a bunch of options for how to take the first input. That's getting over onto the second input. And if there are different resolutions what to do about that discrepancy.
(10:49) So we can see here by default is fill. So it takes my 512 by 512 and actually stretches it to 512 by 612 we could do things like fit horizontally fit vertically. There's a couple of different fits. You're better off reading the Wiki on those but what we actually want is native resolution. We don't want our butterfly to be stretched.
(11:08) We just want it to be centered and add its own correct resolution. So when we set it to native resolution, that's what it does. You can see it's not stretched. And then we have a couple of different options here for how we want to justify that texture onto the bigger background. Cause right now by default it's going to be center center on the X and Y.
(11:27) So what I'm going to do first is justify vertical and set at the top. This will keep it at its native resolution but essentially line it up with the top edge. And that way I'll have room underneath to composite my text. The rest of these options we don't really need yet. So we'll take a look at those in a moment when we start doing our text.
(11:47) So now that I have this butterfly on my background I want to take this texture and composite my text over it. So what I could do is make another over TOP, connect this as my second input because this is going to be the base layer that the text is going to go on top of, grab the output of my butterfly text, connect it to the top layer.
(12:12) And you can see the default in this case were like previously and they stretch our text terribly to try and fill it for us. So what we're going to do is first make sure the fixed layer set in to input two which is what we want. And we can confirm that by middle clicking and checking the size again, we want to set the pre-fit overlay to native resolution.
(12:33) That way our text, isn't getting resized and going all crazy. But this time, instead of, justifying to the top or center, I'm actually gonna justify vertically to the bottom, but in my eyes as it's still too close to the bottom, I want to take it from the bottom and just push it up a little bit. So what I can do is actually use the translate parameters are very helpful here to take this text as justified to the bottom and then just offset it up a little bit.
(13:01) Now, in most cases by default translate and transforms and all those kinds of operations on TOPs you'll see an F here on the right side and anywhere where you have a parameter. And then on the right side is a little F like this with an arrow. What this does is it indicates the units that are being used for that parameter.
(13:23) So in this case F being the default is fraction. That means if we want it to move this butterfly text up a little bit we would actually be moving between zero and one. So we'd want to move in small increments because zero being the bottom and one being the top. But in most cases, I think many people actually want to set this to pixels because this way our units are now in pixel.
(13:46) So instead of being from zero to one, they would be in this case from zero to 612 to get to the top. So if I wanted to bump this upwards by 25 pixels now I can go to my translate Y type 25. And now my butterfly text goes up 25 pixels. So I think that's the workflow that most people want but a lot of people don't know that you can change those units very easily.
(14:11) So with that said that's basically our first unit of butterfly. So we'll do the same thing with our second unit and I'll do it manually again just so that you get the hang of it. We're going to make an over, we're going to go back up to where we have our little canvas, set that as the second input of my over, set the butterfly as the first input, going to the parameters of the over I'm going to set the fixed layer to two which it already is I want my pre fit to be native resolution and I want to justify vertically to the top.
(14:44) And then similarly, I make another over where this new butterfly on canvas texture becomes the second input. And my text becomes the first input. Now, similarly pre-fit overlay is going to go to native resolution, except this time going to justify to the bottom. And then like we did before, I want to translate 25 pixels upwards.
(15:08) So I first changed my units from fraction to pixels and then I type in 25 and we get that made. Now you probably don't want to be doing this manually all the time. So what we can do in this case is copy and paste it really easily. What we can do is we can right click and drag like we talked about at the beginning, highlight both of those overs that we want to copy, control + C control + V we get a copy.
(15:35) Now don't be afraid by the little mess of wires happening. It's really easy for us to fix that. So far we talked about just a really easy ways of wiring and disconnecting wires but you can also overwrite wires very easily. So for example in this over I actually want this butterfly and that same canvas texture.
(15:54) So the canvas texture is okay. I don't need to change anything about it but I want this to be plugged in. So either what I can do is simply grab this output, connected to the input of the over and over write it or something useful that I can do is I can grab for example, now that I wanna overwrite my butterfly two text with butterfly three, I could click on the output here and I can actually go and highlight the wire, which gives me the connection.
(16:19) And you can see it goes from the output of this text to the input of this over. And if I click on that what it does essentially overwrites wherever that wire was going with the wire that I've selected. So those two ways are really easy ways to override paths especially if you're doing things like this and copying and pasting.
(16:37) So now essentially we have our three groups and now we want to place them on a 1920 by 1080 canvas to basically get it ready for our final output our display. So we would follow a very similar process where let's say we would make a constant first. We would go to the common tab and set the resolution to 1920 by 1080.
(17:02) We'd go to the constant parameters page, turn off the alpha and set the color to zero, zero, zero. So that it's black. Now what we can do is we can use a different composite method which is using a composite TOP. So I can start typing composite hit enter and I get a composite TOP. And what you'll notice about composite top there's a little bit different than before is overtop only had two inputs.
(17:30) It had whatever you want to over onto the background that you want to over it on. But composite TOP has this different looking input. You can see, even if I compare it to the constant composite has like a thicker inlet than other operators. And what this is called is this it's called a multi input which means that you can just keep connecting as many different things as you want into this one input.
(17:52) And the operator will just continue to process all the things that you're inputting. So in this case just to keep it simple and just show you a different way of compositing we're going to do similar. We're going to take our constant, plug it into the composite and then we're going to take our over here which is our unit of butterfly plus text, plug that in.
(18:13) And then what you're going to see is nothing because the default operation is multiply. And if we were going to multiply this by all black it's always going to be black. So what we're going to do is go to the operation and change it and what you can see as a ton of different options. Now in our simple case we were using over but you can see the composite tab has all kinds of different photoshop, filters, color dodge, darker colors, exclude, frees, adds, atops all these different things.
(18:42) We're going to stick to over but just introduce you to the composite TOP a little. So I'll switch it to over, but there's one thing I have to be careful of right now because you can see that the resolution is 512 by 612, which is not what we want because we want this 512 by 612 to be on top of the 1920 by 1080.
(19:00) So in this case, what I would do is go to the composite and there's two options. We can either go to the transform page and change the fixed layer to be fixed layer one. So I can do that. And what you'll now see is that this is 1920 by 1080, and by default is filling. So it's stretching our butterfly to fill it.
(19:18) But what I would recommend especially if you're just doing simple overs is to keep the wiring representative of what's happening. So I can actually come back to the, any of the pages of the parameters at the bottom we'll see this little area it says input OP it has all the names of the input. So we can see constant two is the first thing that gets plugged in over two as the second thing that gets plugged in.
(19:40) And then we can either click these buttons on the X's which we'll actually unhook them or we can use these arrows to rearrange them. So if I click this arrow, what you'll see as they've now switched, this is now the first input. And constant two is now the second input which I think is a cleaner way of working because we really do want to take this over this.
(20:01) So now if I go back to my composite what we can do is go to the transform and we have very similar options that we did with the over. We're gonna change our pre-fit overlay to native resolution. And then what I want to do here is actually move this over to the left and then put the second butterfly in the middle and then move the third butterfly to the right.
(20:21) Now like we said before maybe we don't know how far we want to go but what I can do is use the translate. I can middle click and drag, and let's go by maybe 0.1. And I'm just going to keep going until I think it's about right. I think 0.3 in the negative direction on the X feels right to me. I can put another one here and then I can do positive 0.3 on my third.
(20:46) So now that I have that composite we can still use it very similarly to what we did for the over. So I'll make another composite. And then what I'll do is I know it's going to be this second butterfly unit, plug that in over the result of my previous one. So now we have to be careful in this case, because before what we were doing was each butterfly unit needed a clean canvas.
(21:08) So we would always take the output of our constant and plug it into the over. But in this case we're trying to, we're making a composite chain. So we want the results to keep adding on top of each other. We want the clean canvas to get one butterfly. Then on top of that one, we wanna add the second butterfly and then finally the third butterfly.
(21:24) So that's why we use this output from the composite instead of our kind of canvas that we did previously. Now, similarly in our composite, the default is set to multiply. So let's actually change this to over and you can see it stretching again. So we're going to go to the transform. We're going to go to the pre-fit overlay, set that to native resolution, and we can see this being center should be fine for our purposes.
(21:50) So the final thing I'm going to do is make one more composite top. And very similarly this is going to be our third butterfly overed onto our already kind of canvas that we've built with two butterflies. And similarly, we're going to change multiply to over. We're going to go to the transform, change the pre fit overlay to native res.
(22:15) And like I was saying before we can probably just translate this over to 0.3 because our other one is negative 0.3 to the left. We can move this 1.3 to the right which will give us a balance and equal distance from the center. So with that even just doing these simple things, we're all in the same operator family we'll start animating stuff shortly.
(22:36) You're starting to understand the workflow of compositing working with some parameters using the value ladder in real life. And then at the end of the day we get to this nice little 1920 by 1080 canvas with a couple of butterflies and a bit of text. Now there's two more things that we should talk about when working with TouchDesigner networks, the first is that you always want to put always, always, always if you don't do this, please do this.
(23:03) There's no, I can't even say anything else that you should always do this is putting null operator after you've reached a big checkpoint in your network. And the checkpoint can be as big or as small as you like. What would have been nice, maybe as me putting nulls after each one of these butterflies but in this case I'm just putting a null at the end here.
(23:23) And there's a couple of reasons for this, the null operators and every family has one not just TOPs they don't do anything but they serve as very useful checkpoints once you start making more and more complicated projects because as you'll see once we start using CHOPs and other things, once we start moving data around the network, and it's not just linear lines a wire is kind of going left to right.
(23:46) We want to have the ability to go and insert operators into the chain without having to redo a bunch of references and scripting and code. And the only way that's possible is to have things referencing your nulls, because those are the checkpoints. And then what happens is let's say all of a sudden somebody says, Hey, can you just change that one thing make it a little darker.
(24:06) What I can do is go in between these two operators right click hit insert and say, maybe add a level top. And then I could change whatever I want without affecting what all of the other project was looking at. Otherwise, what I would have to do is if I didn't add this null what would happen was all of the project would be looking for an operator named COMP three.
(24:28) But then if I had to add a level after it then I would have to go to all of my network and say, Oh, well, sorry I changed. Instead of looking at COMP three start looking at level one, because that's what you should be looking at. So the null operators are extremely important in really preventing refactoring, which is what programmers call it when they have to go through and change a bunch of the infrastructure of the code for really no reason at all other than name changes and maybe restructuring things.
(24:56) So you should always add a null. Now the final thing we're going to look at with this is just a quick little trick with TOPs is you'll see we have this little blue ball at the bottom, and we already talked about the plus sign. The plus sign gives us access to the viewer. But what we're going to do is start looking at flags and what the different flags do.
(25:14) And flags are all represented by little colored balls. And each family has a different set of flags. So TOPs have something called the display flag and you'll see by default it's off. What happens when you turn it on though is that it actually sets the texture that's inside of this operator to be the background of your network.
(25:34) And the nice thing is you can do this with as many operators as you want and it just keeps dynamically arranging them and placing them as the background. So if you ever needed to work on something and you wanted to see the output you could do something like this, where you turn on the display flag, then you can say, Oh, well maybe I don't like the color red, maybe yellow is better and you can get that visual feedback immediately without having to like zoom into one operator, go over to the other, make the change, come back, zoom in.
(26:06) We're always trying to build good workflows. So with that said, this should be a nice and easy introduction to TOPs. And from here, we're going to go look at the next operator family.